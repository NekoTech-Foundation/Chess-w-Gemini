var ll=Object.defineProperty;var al=(e,t,s)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ae=(e,t,s)=>al(e,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ti(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const re={},es=[],it=()=>{},wr=()=>!1,fn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),si=e=>e.startsWith("onUpdate:"),Ee=Object.assign,ni=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},cl=Object.prototype.hasOwnProperty,X=(e,t)=>cl.call(e,t),V=Array.isArray,ts=e=>un(e)==="[object Map]",Ar=e=>un(e)==="[object Set]",W=e=>typeof e=="function",pe=e=>typeof e=="string",Rt=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",Or=e=>(fe(e)||W(e))&&W(e.then)&&W(e.catch),Tr=Object.prototype.toString,un=e=>Tr.call(e),fl=e=>un(e).slice(8,-1),Ir=e=>un(e)==="[object Object]",ii=e=>pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bs=ti(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},ul=/-\w/g,Tt=hn(e=>e.replace(ul,t=>t.slice(1).toUpperCase())),hl=/\B([A-Z])/g,Gt=hn(e=>e.replace(hl,"-$1").toLowerCase()),Rr=hn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cn=hn(e=>e?`on${Rr(e)}`:""),At=(e,t)=>!Object.is(e,t),Sn=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Nr=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},dl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ni;const dn=()=>Ni||(Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ri(e){if(V(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=pe(n)?ml(n):ri(n);if(i)for(const r in i)t[r]=i[r]}return t}else if(pe(e)||fe(e))return e}const pl=/;(?![^(]*\))/g,gl=/:([^]+)/,_l=/\/\*[^]*?\*\//g;function ml(e){const t={};return e.replace(_l,"").split(pl).forEach(s=>{if(s){const n=s.split(gl);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function st(e){let t="";if(pe(e))t=e;else if(V(e))for(let s=0;s<e.length;s++){const n=st(e[s]);n&&(t+=n+" ")}else if(fe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const vl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bl=ti(vl);function Mr(e){return!!e||e===""}const Pr=e=>!!(e&&e.__v_isRef===!0),He=e=>pe(e)?e:e==null?"":V(e)||fe(e)&&(e.toString===Tr||!W(e.toString))?Pr(e)?He(e.value):JSON.stringify(e,$r,2):String(e),$r=(e,t)=>Pr(t)?$r(e,t.value):ts(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],r)=>(s[xn(n,r)+" =>"]=i,s),{})}:Ar(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>xn(s))}:Rt(t)?xn(t):fe(t)&&!V(t)&&!Ir(t)?String(t):t,xn=(e,t="")=>{var s;return Rt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fe;class yl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Fe;try{return Fe=this,t()}finally{Fe=s}}}on(){++this._on===1&&(this.prevScope=Fe,Fe=this)}off(){this._on>0&&--this._on===0&&(Fe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function El(){return Fe}let ie;const wn=new WeakSet;class kr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fe&&Fe.active&&Fe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wn.has(this)&&(wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mi(this),Dr(this);const t=ie,s=Je;ie=this,Je=!0;try{return this.fn()}finally{Kr(this),ie=t,Je=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ai(t);this.deps=this.depsTail=void 0,Mi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hn(this)&&this.run()}get dirty(){return Hn(this)}}let Lr=0,ys,Es;function Fr(e,t=!1){if(e.flags|=8,t){e.next=Es,Es=e;return}e.next=ys,ys=e}function oi(){Lr++}function li(){if(--Lr>0)return;if(Es){let t=Es;for(Es=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ys;){let t=ys;for(ys=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Dr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Kr(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),ai(n),Cl(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Hn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ur(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ur(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Os)||(e.globalVersion=Os,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Hn(e))))return;e.flags|=2;const t=e.dep,s=ie,n=Je;ie=e,Je=!0;try{Dr(e);const i=e.fn(e._value);(t.version===0||At(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ie=s,Je=n,Kr(e),e.flags&=-3}}function ai(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)ai(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Cl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Je=!0;const Hr=[];function pt(){Hr.push(Je),Je=!1}function gt(){const e=Hr.pop();Je=e===void 0?!0:e}function Mi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ie;ie=void 0;try{t()}finally{ie=s}}}let Os=0;class Sl{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ci{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ie||!Je||ie===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ie)s=this.activeLink=new Sl(ie,this),ie.deps?(s.prevDep=ie.depsTail,ie.depsTail.nextDep=s,ie.depsTail=s):ie.deps=ie.depsTail=s,jr(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ie.depsTail,s.nextDep=void 0,ie.depsTail.nextDep=s,ie.depsTail=s,ie.deps===s&&(ie.deps=n)}return s}trigger(t){this.version++,Os++,this.notify(t)}notify(t){oi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{li()}}}function jr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)jr(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const jn=new WeakMap,Ut=Symbol(""),Bn=Symbol(""),Ts=Symbol("");function we(e,t,s){if(Je&&ie){let n=jn.get(e);n||jn.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new ci),i.map=n,i.key=s),i.track()}}function ht(e,t,s,n,i,r){const o=jn.get(e);if(!o){Os++;return}const l=a=>{a&&a.trigger()};if(oi(),t==="clear")o.forEach(l);else{const a=V(e),u=a&&ii(s);if(a&&s==="length"){const c=Number(n);o.forEach((p,d)=>{(d==="length"||d===Ts||!Rt(d)&&d>=c)&&l(p)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),u&&l(o.get(Ts)),t){case"add":a?u&&l(o.get("length")):(l(o.get(Ut)),ts(e)&&l(o.get(Bn)));break;case"delete":a||(l(o.get(Ut)),ts(e)&&l(o.get(Bn)));break;case"set":ts(e)&&l(o.get(Ut));break}}li()}function Qt(e){const t=z(e);return t===e?t:(we(t,"iterate",Ts),Ye(e)?t:t.map(ze))}function pn(e){return we(e=z(e),"iterate",Ts),e}function yt(e,t){return _t(e)?rs(Ht(e)?ze(t):t):ze(t)}const xl={__proto__:null,[Symbol.iterator](){return An(this,Symbol.iterator,e=>yt(this,e))},concat(...e){return Qt(this).concat(...e.map(t=>V(t)?Qt(t):t))},entries(){return An(this,"entries",e=>(e[1]=yt(this,e[1]),e))},every(e,t){return ft(this,"every",e,t,void 0,arguments)},filter(e,t){return ft(this,"filter",e,t,s=>s.map(n=>yt(this,n)),arguments)},find(e,t){return ft(this,"find",e,t,s=>yt(this,s),arguments)},findIndex(e,t){return ft(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ft(this,"findLast",e,t,s=>yt(this,s),arguments)},findLastIndex(e,t){return ft(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ft(this,"forEach",e,t,void 0,arguments)},includes(...e){return On(this,"includes",e)},indexOf(...e){return On(this,"indexOf",e)},join(e){return Qt(this).join(e)},lastIndexOf(...e){return On(this,"lastIndexOf",e)},map(e,t){return ft(this,"map",e,t,void 0,arguments)},pop(){return ds(this,"pop")},push(...e){return ds(this,"push",e)},reduce(e,...t){return Pi(this,"reduce",e,t)},reduceRight(e,...t){return Pi(this,"reduceRight",e,t)},shift(){return ds(this,"shift")},some(e,t){return ft(this,"some",e,t,void 0,arguments)},splice(...e){return ds(this,"splice",e)},toReversed(){return Qt(this).toReversed()},toSorted(e){return Qt(this).toSorted(e)},toSpliced(...e){return Qt(this).toSpliced(...e)},unshift(...e){return ds(this,"unshift",e)},values(){return An(this,"values",e=>yt(this,e))}};function An(e,t,s){const n=pn(e),i=n[t]();return n!==e&&!Ye(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const wl=Array.prototype;function ft(e,t,s,n,i,r){const o=pn(e),l=o!==e&&!Ye(e),a=o[t];if(a!==wl[t]){const p=a.apply(e,r);return l?ze(p):p}let u=s;o!==e&&(l?u=function(p,d){return s.call(this,yt(e,p),d,e)}:s.length>2&&(u=function(p,d){return s.call(this,p,d,e)}));const c=a.call(o,u,n);return l&&i?i(c):c}function Pi(e,t,s,n){const i=pn(e);let r=s;return i!==e&&(Ye(e)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,e)}):r=function(o,l,a){return s.call(this,o,yt(e,l),a,e)}),i[t](r,...n)}function On(e,t,s){const n=z(e);we(n,"iterate",Ts);const i=n[t](...s);return(i===-1||i===!1)&&di(s[0])?(s[0]=z(s[0]),n[t](...s)):i}function ds(e,t,s=[]){pt(),oi();const n=z(e)[t].apply(e,s);return li(),gt(),n}const Al=ti("__proto__,__v_isRef,__isVue"),Br=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Rt));function Ol(e){Rt(e)||(e=String(e));const t=z(this);return we(t,"has",e),t.hasOwnProperty(e)}class Gr{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?Fl:Yr:r?Wr:Vr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=V(t);if(!i){let a;if(o&&(a=xl[s]))return a;if(s==="hasOwnProperty")return Ol}const l=Reflect.get(t,s,Oe(t)?t:n);if((Rt(s)?Br.has(s):Al(s))||(i||we(t,"get",s),r))return l;if(Oe(l)){const a=o&&ii(s)?l:l.value;return i&&fe(a)?qn(a):a}return fe(l)?i?qn(l):ui(l):l}}class qr extends Gr{constructor(t=!1){super(!1,t)}set(t,s,n,i){let r=t[s];const o=V(t)&&ii(s);if(!this._isShallow){const u=_t(r);if(!Ye(n)&&!_t(n)&&(r=z(r),n=z(n)),!o&&Oe(r)&&!Oe(n))return u||(r.value=n),!0}const l=o?Number(s)<t.length:X(t,s),a=Reflect.set(t,s,n,Oe(t)?t:i);return t===z(i)&&(l?At(n,r)&&ht(t,"set",s,n):ht(t,"add",s,n)),a}deleteProperty(t,s){const n=X(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&ht(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Rt(s)||!Br.has(s))&&we(t,"has",s),n}ownKeys(t){return we(t,"iterate",V(t)?"length":Ut),Reflect.ownKeys(t)}}class Tl extends Gr{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Il=new qr,Rl=new Tl,Nl=new qr(!0);const Gn=e=>e,Bs=e=>Reflect.getPrototypeOf(e);function Ml(e,t,s){return function(...n){const i=this.__v_raw,r=z(i),o=ts(r),l=e==="entries"||e===Symbol.iterator&&o,a=e==="keys"&&o,u=i[e](...n),c=s?Gn:t?rs:ze;return!t&&we(r,"iterate",a?Bn:Ut),Ee(Object.create(u),{next(){const{value:p,done:d}=u.next();return d?{value:p,done:d}:{value:l?[c(p[0]),c(p[1])]:c(p),done:d}}})}}function Gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Pl(e,t){const s={get(i){const r=this.__v_raw,o=z(r),l=z(i);e||(At(i,l)&&we(o,"get",i),we(o,"get",l));const{has:a}=Bs(o),u=t?Gn:e?rs:ze;if(a.call(o,i))return u(r.get(i));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&we(z(i),"iterate",Ut),i.size},has(i){const r=this.__v_raw,o=z(r),l=z(i);return e||(At(i,l)&&we(o,"has",i),we(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=z(l),u=t?Gn:e?rs:ze;return!e&&we(a,"iterate",Ut),l.forEach((c,p)=>i.call(r,u(c),u(p),o))}};return Ee(s,e?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(i){!t&&!Ye(i)&&!_t(i)&&(i=z(i));const r=z(this);return Bs(r).has.call(r,i)||(r.add(i),ht(r,"add",i,i)),this},set(i,r){!t&&!Ye(r)&&!_t(r)&&(r=z(r));const o=z(this),{has:l,get:a}=Bs(o);let u=l.call(o,i);u||(i=z(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,r),u?At(r,c)&&ht(o,"set",i,r):ht(o,"add",i,r),this},delete(i){const r=z(this),{has:o,get:l}=Bs(r);let a=o.call(r,i);a||(i=z(i),a=o.call(r,i)),l&&l.call(r,i);const u=r.delete(i);return a&&ht(r,"delete",i,void 0),u},clear(){const i=z(this),r=i.size!==0,o=i.clear();return r&&ht(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Ml(i,e,t)}),s}function fi(e,t){const s=Pl(e,t);return(n,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(X(s,i)&&i in n?s:n,i,r)}const $l={get:fi(!1,!1)},kl={get:fi(!1,!0)},Ll={get:fi(!0,!1)};const Vr=new WeakMap,Wr=new WeakMap,Yr=new WeakMap,Fl=new WeakMap;function Dl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kl(e){return e.__v_skip||!Object.isExtensible(e)?0:Dl(fl(e))}function ui(e){return _t(e)?e:hi(e,!1,Il,$l,Vr)}function Ul(e){return hi(e,!1,Nl,kl,Wr)}function qn(e){return hi(e,!0,Rl,Ll,Yr)}function hi(e,t,s,n,i){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Kl(e);if(r===0)return e;const o=i.get(e);if(o)return o;const l=new Proxy(e,r===2?n:s);return i.set(e,l),l}function Ht(e){return _t(e)?Ht(e.__v_raw):!!(e&&e.__v_isReactive)}function _t(e){return!!(e&&e.__v_isReadonly)}function Ye(e){return!!(e&&e.__v_isShallow)}function di(e){return e?!!e.__v_raw:!1}function z(e){const t=e&&e.__v_raw;return t?z(t):e}function Hl(e){return!X(e,"__v_skip")&&Object.isExtensible(e)&&Nr(e,"__v_skip",!0),e}const ze=e=>fe(e)?ui(e):e,rs=e=>fe(e)?qn(e):e;function Oe(e){return e?e.__v_isRef===!0:!1}function ue(e){return jl(e,!1)}function jl(e,t){return Oe(e)?e:new Bl(e,t)}class Bl{constructor(t,s){this.dep=new ci,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:z(t),this._value=s?t:ze(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Ye(t)||_t(t);t=n?t:z(t),At(t,s)&&(this._rawValue=t,this._value=n?t:ze(t),this.dep.trigger())}}function ce(e){return Oe(e)?e.value:e}const Gl={get:(e,t,s)=>t==="__v_raw"?e:ce(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return Oe(i)&&!Oe(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Qr(e){return Ht(e)?e:new Proxy(e,Gl)}class ql{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new ci(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Os-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return Fr(this,!0),!0}get value(){const t=this.dep.track();return Ur(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vl(e,t,s=!1){let n,i;return W(e)?n=e:(n=e.get,i=e.set),new ql(n,i,s)}const qs={},nn=new WeakMap;let Kt;function Wl(e,t=!1,s=Kt){if(s){let n=nn.get(s);n||nn.set(s,n=[]),n.push(e)}}function Yl(e,t,s=re){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=s,u=$=>i?$:Ye($)||i===!1||i===0?wt($,1):wt($);let c,p,d,m,_=!1,C=!1;if(Oe(e)?(p=()=>e.value,_=Ye(e)):Ht(e)?(p=()=>u(e),_=!0):V(e)?(C=!0,_=e.some($=>Ht($)||Ye($)),p=()=>e.map($=>{if(Oe($))return $.value;if(Ht($))return u($);if(W($))return a?a($,2):$()})):W(e)?t?p=a?()=>a(e,2):e:p=()=>{if(d){pt();try{d()}finally{gt()}}const $=Kt;Kt=c;try{return a?a(e,3,[m]):e(m)}finally{Kt=$}}:p=it,t&&i){const $=p,oe=i===!0?1/0:i;p=()=>wt($(),oe)}const O=El(),I=()=>{c.stop(),O&&O.active&&ni(O.effects,c)};if(r&&t){const $=t;t=(...oe)=>{$(...oe),I()}}let k=C?new Array(e.length).fill(qs):qs;const U=$=>{if(!(!(c.flags&1)||!c.dirty&&!$))if(t){const oe=c.run();if(i||_||(C?oe.some((De,Te)=>At(De,k[Te])):At(oe,k))){d&&d();const De=Kt;Kt=c;try{const Te=[oe,k===qs?void 0:C&&k[0]===qs?[]:k,m];k=oe,a?a(t,3,Te):t(...Te)}finally{Kt=De}}}else c.run()};return l&&l(U),c=new kr(p),c.scheduler=o?()=>o(U,!1):U,m=$=>Wl($,!1,c),d=c.onStop=()=>{const $=nn.get(c);if($){if(a)a($,4);else for(const oe of $)oe();nn.delete(c)}},t?n?U(!0):k=c.run():o?o(U.bind(null,!0),!0):c.run(),I.pause=c.pause.bind(c),I.resume=c.resume.bind(c),I.stop=I,I}function wt(e,t=1/0,s){if(t<=0||!fe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Oe(e))wt(e.value,t,s);else if(V(e))for(let n=0;n<e.length;n++)wt(e[n],t,s);else if(Ar(e)||ts(e))e.forEach(n=>{wt(n,t,s)});else if(Ir(e)){for(const n in e)wt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&wt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ks(e,t,s,n){try{return n?e(...n):e()}catch(i){gn(i,t,s)}}function ot(e,t,s,n){if(W(e)){const i=ks(e,t,s,n);return i&&Or(i)&&i.catch(r=>{gn(r,t,s)}),i}if(V(e)){const i=[];for(let r=0;r<e.length;r++)i.push(ot(e[r],t,s,n));return i}}function gn(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||re;if(t){let l=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const c=l.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,a,u)===!1)return}l=l.parent}if(r){pt(),ks(r,null,10,[e,a,u]),gt();return}}Ql(e,s,i,n,o)}function Ql(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const ke=[];let et=-1;const ss=[];let Et=null,zt=0;const Jr=Promise.resolve();let rn=null;function Jl(e){const t=rn||Jr;return e?t.then(this?e.bind(this):e):t}function zl(e){let t=et+1,s=ke.length;for(;t<s;){const n=t+s>>>1,i=ke[n],r=Is(i);r<e||r===e&&i.flags&2?t=n+1:s=n}return t}function pi(e){if(!(e.flags&1)){const t=Is(e),s=ke[ke.length-1];!s||!(e.flags&2)&&t>=Is(s)?ke.push(e):ke.splice(zl(t),0,e),e.flags|=1,zr()}}function zr(){rn||(rn=Jr.then(Zr))}function Xl(e){V(e)?ss.push(...e):Et&&e.id===-1?Et.splice(zt+1,0,e):e.flags&1||(ss.push(e),e.flags|=1),zr()}function $i(e,t,s=et+1){for(;s<ke.length;s++){const n=ke[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ke.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Xr(e){if(ss.length){const t=[...new Set(ss)].sort((s,n)=>Is(s)-Is(n));if(ss.length=0,Et){Et.push(...t);return}for(Et=t,zt=0;zt<Et.length;zt++){const s=Et[zt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Et=null,zt=0}}const Is=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zr(e){try{for(et=0;et<ke.length;et++){const t=ke[et];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ks(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;et<ke.length;et++){const t=ke[et];t&&(t.flags&=-2)}et=-1,ke.length=0,Xr(),rn=null,(ke.length||ss.length)&&Zr()}}let nt=null,eo=null;function on(e){const t=nt;return nt=e,eo=e&&e.type.__scopeId||null,t}function Zl(e,t=nt,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Gi(-1);const r=on(t);let o;try{o=e(...i)}finally{on(r),n._d&&Gi(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Lt(e,t,s,n){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[n];a&&(pt(),ot(a,s,8,[e.el,l,e,t]),gt())}}function ea(e,t){if(Le){let s=Le.provides;const n=Le.parent&&Le.parent.provides;n===s&&(s=Le.provides=Object.create(n)),s[e]=t}}function Js(e,t,s=!1){const n=Za();if(n||is){let i=is?is._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&W(t)?t.call(n&&n.proxy):t}}const ta=Symbol.for("v-scx"),sa=()=>Js(ta);function Tn(e,t,s){return to(e,t,s)}function to(e,t,s=re){const{immediate:n,deep:i,flush:r,once:o}=s,l=Ee({},s),a=t&&n||!t&&r!=="post";let u;if(Ns){if(r==="sync"){const m=sa();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=it,m.resume=it,m.pause=it,m}}const c=Le;l.call=(m,_,C)=>ot(m,c,_,C);let p=!1;r==="post"?l.scheduler=m=>{Ue(m,c&&c.suspense)}:r!=="sync"&&(p=!0,l.scheduler=(m,_)=>{_?m():pi(m)}),l.augmentJob=m=>{t&&(m.flags|=4),p&&(m.flags|=2,c&&(m.id=c.uid,m.i=c))};const d=Yl(e,t,l);return Ns&&(u?u.push(d):a&&d()),d}function na(e,t,s){const n=this.proxy,i=pe(e)?e.includes(".")?so(n,e):()=>n[e]:e.bind(n,n);let r;W(t)?r=t:(r=t.handler,s=t);const o=Ls(this),l=to(i,r.bind(n),s);return o(),l}function so(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const ia=Symbol("_vte"),ra=e=>e.__isTeleport,oa=Symbol("_leaveCb");function gi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,gi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _i(e,t){return W(e)?Ee({name:e.name},t,{setup:e}):e}function no(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ln=new WeakMap;function Cs(e,t,s,n,i=!1){if(V(e)){e.forEach((_,C)=>Cs(_,t&&(V(t)?t[C]:t),s,n,i));return}if(Ss(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Cs(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?yi(n.component):n.el,o=i?null:r,{i:l,r:a}=e,u=t&&t.r,c=l.refs===re?l.refs={}:l.refs,p=l.setupState,d=z(p),m=p===re?wr:_=>X(d,_);if(u!=null&&u!==a){if(ki(t),pe(u))c[u]=null,m(u)&&(p[u]=null);else if(Oe(u)){u.value=null;const _=t;_.k&&(c[_.k]=null)}}if(W(a))ks(a,l,12,[o,c]);else{const _=pe(a),C=Oe(a);if(_||C){const O=()=>{if(e.f){const I=_?m(a)?p[a]:c[a]:a.value;if(i)V(I)&&ni(I,r);else if(V(I))I.includes(r)||I.push(r);else if(_)c[a]=[r],m(a)&&(p[a]=c[a]);else{const k=[r];a.value=k,e.k&&(c[e.k]=k)}}else _?(c[a]=o,m(a)&&(p[a]=o)):C&&(a.value=o,e.k&&(c[e.k]=o))};if(o){const I=()=>{O(),ln.delete(e)};I.id=-1,ln.set(e,I),Ue(I,s)}else ki(e),O()}}}function ki(e){const t=ln.get(e);t&&(t.flags|=8,ln.delete(e))}dn().requestIdleCallback;dn().cancelIdleCallback;const Ss=e=>!!e.type.__asyncLoader,io=e=>e.type.__isKeepAlive;function la(e,t){ro(e,"a",t)}function aa(e,t){ro(e,"da",t)}function ro(e,t,s=Le){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(_n(t,n,s),s){let i=s.parent;for(;i&&i.parent;)io(i.parent.vnode)&&ca(n,t,s,i),i=i.parent}}function ca(e,t,s,n){const i=_n(t,e,n,!0);oo(()=>{ni(n[t],i)},s)}function _n(e,t,s=Le,n=!1){if(s){const i=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...o)=>{pt();const l=Ls(s),a=ot(t,s,e,o);return l(),gt(),a});return n?i.unshift(r):i.push(r),r}}const mt=e=>(t,s=Le)=>{(!Ns||e==="sp")&&_n(e,(...n)=>t(...n),s)},fa=mt("bm"),ua=mt("m"),ha=mt("bu"),da=mt("u"),pa=mt("bum"),oo=mt("um"),ga=mt("sp"),_a=mt("rtg"),ma=mt("rtc");function va(e,t=Le){_n("ec",e,t)}const ba=Symbol.for("v-ndc");function ns(e,t,s,n){let i;const r=s,o=V(e);if(o||pe(e)){const l=o&&Ht(e);let a=!1,u=!1;l&&(a=!Ye(e),u=_t(e),e=pn(e)),i=new Array(e.length);for(let c=0,p=e.length;c<p;c++)i[c]=t(a?u?rs(ze(e[c])):ze(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let l=0;l<e;l++)i[l]=t(l+1,l,void 0,r)}else if(fe(e))if(e[Symbol.iterator])i=Array.from(e,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(e);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=t(e[c],c,a,r)}}else i=[];return i}const Vn=e=>e?Io(e)?yi(e):Vn(e.parent):null,xs=Ee(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Vn(e.parent),$root:e=>Vn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ao(e),$forceUpdate:e=>e.f||(e.f=()=>{pi(e.update)}),$nextTick:e=>e.n||(e.n=Jl.bind(e.proxy)),$watch:e=>na.bind(e)}),In=(e,t)=>e!==re&&!e.__isScriptSetup&&X(e,t),ya={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:l,appContext:a}=e;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return r[t]}else{if(In(n,t))return o[t]=1,n[t];if(i!==re&&X(i,t))return o[t]=2,i[t];if(X(r,t))return o[t]=3,r[t];if(s!==re&&X(s,t))return o[t]=4,s[t];Wn&&(o[t]=0)}}const u=xs[t];let c,p;if(u)return t==="$attrs"&&we(e.attrs,"get",""),u(e);if((c=l.__cssModules)&&(c=c[t]))return c;if(s!==re&&X(s,t))return o[t]=4,s[t];if(p=a.config.globalProperties,X(p,t))return p[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:r}=e;return In(i,t)?(i[t]=s,!0):n!==re&&X(n,t)?(n[t]=s,!0):X(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,props:r,type:o}},l){let a;return!!(s[l]||e!==re&&l[0]!=="$"&&X(e,l)||In(t,l)||X(r,l)||X(n,l)||X(xs,l)||X(i.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:X(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Li(e){return V(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Wn=!0;function Ea(e){const t=ao(e),s=e.proxy,n=e.ctx;Wn=!1,t.beforeCreate&&Fi(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:p,mounted:d,beforeUpdate:m,updated:_,activated:C,deactivated:O,beforeDestroy:I,beforeUnmount:k,destroyed:U,unmounted:$,render:oe,renderTracked:De,renderTriggered:Te,errorCaptured:Ie,serverPrefetch:Re,expose:Q,inheritAttrs:he,components:Ne,directives:qt,filters:Vt}=t;if(u&&Ca(u,n,null),o)for(const ne in o){const te=o[ne];W(te)&&(n[ne]=te.bind(s))}if(i){const ne=i.call(s,s);fe(ne)&&(e.data=ui(ne))}if(Wn=!0,r)for(const ne in r){const te=r[ne],lt=W(te)?te.bind(s,s):W(te.get)?te.get.bind(s,s):it,Nt=!W(te)&&W(te.set)?te.set.bind(s):it,at=zn({get:lt,set:Nt});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>at.value,set:Be=>at.value=Be})}if(l)for(const ne in l)lo(l[ne],n,s,ne);if(a){const ne=W(a)?a.call(s):a;Reflect.ownKeys(ne).forEach(te=>{ea(te,ne[te])})}c&&Fi(c,e,"c");function _e(ne,te){V(te)?te.forEach(lt=>ne(lt.bind(s))):te&&ne(te.bind(s))}if(_e(fa,p),_e(ua,d),_e(ha,m),_e(da,_),_e(la,C),_e(aa,O),_e(va,Ie),_e(ma,De),_e(_a,Te),_e(pa,k),_e(oo,$),_e(ga,Re),V(Q))if(Q.length){const ne=e.exposed||(e.exposed={});Q.forEach(te=>{Object.defineProperty(ne,te,{get:()=>s[te],set:lt=>s[te]=lt,enumerable:!0})})}else e.exposed||(e.exposed={});oe&&e.render===it&&(e.render=oe),he!=null&&(e.inheritAttrs=he),Ne&&(e.components=Ne),qt&&(e.directives=qt),Re&&no(e)}function Ca(e,t,s=it){V(e)&&(e=Yn(e));for(const n in e){const i=e[n];let r;fe(i)?"default"in i?r=Js(i.from||n,i.default,!0):r=Js(i.from||n):r=Js(i),Oe(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function Fi(e,t,s){ot(V(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function lo(e,t,s,n){let i=n.includes(".")?so(s,n):()=>s[n];if(pe(e)){const r=t[e];W(r)&&Tn(i,r)}else if(W(e))Tn(i,e.bind(s));else if(fe(e))if(V(e))e.forEach(r=>lo(r,t,s,n));else{const r=W(e.handler)?e.handler.bind(s):t[e.handler];W(r)&&Tn(i,r,e)}}function ao(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,l=r.get(t);let a;return l?a=l:!i.length&&!s&&!n?a=t:(a={},i.length&&i.forEach(u=>an(a,u,o,!0)),an(a,t,o)),fe(t)&&r.set(t,a),a}function an(e,t,s,n=!1){const{mixins:i,extends:r}=t;r&&an(e,r,s,!0),i&&i.forEach(o=>an(e,o,s,!0));for(const o in t)if(!(n&&o==="expose")){const l=Sa[o]||s&&s[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const Sa={data:Di,props:Ki,emits:Ki,methods:ms,computed:ms,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:ms,directives:ms,watch:wa,provide:Di,inject:xa};function Di(e,t){return t?e?function(){return Ee(W(e)?e.call(this,this):e,W(t)?t.call(this,this):t)}:t:e}function xa(e,t){return ms(Yn(e),Yn(t))}function Yn(e){if(V(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function $e(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?Ee(Object.create(null),e,t):t}function Ki(e,t){return e?V(e)&&V(t)?[...new Set([...e,...t])]:Ee(Object.create(null),Li(e),Li(t??{})):t}function wa(e,t){if(!e)return t;if(!t)return e;const s=Ee(Object.create(null),e);for(const n in t)s[n]=$e(e[n],t[n]);return s}function co(){return{app:null,config:{isNativeTag:wr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Aa=0;function Oa(e,t){return function(n,i=null){W(n)||(n=Ee({},n)),i!=null&&!fe(i)&&(i=null);const r=co(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:Aa++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:rc,get config(){return r.config},set config(c){},use(c,...p){return o.has(c)||(c&&W(c.install)?(o.add(c),c.install(u,...p)):W(c)&&(o.add(c),c(u,...p))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,p){return p?(r.components[c]=p,u):r.components[c]},directive(c,p){return p?(r.directives[c]=p,u):r.directives[c]},mount(c,p,d){if(!a){const m=u._ceVNode||rt(n,i);return m.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),e(m,c,d),a=!0,u._container=c,c.__vue_app__=u,yi(m.component)}},onUnmount(c){l.push(c)},unmount(){a&&(ot(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return r.provides[c]=p,u},runWithContext(c){const p=is;is=u;try{return c()}finally{is=p}}};return u}}let is=null;const Ta=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tt(t)}Modifiers`]||e[`${Gt(t)}Modifiers`];function Ia(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||re;let i=s;const r=t.startsWith("update:"),o=r&&Ta(n,t.slice(7));o&&(o.trim&&(i=s.map(c=>pe(c)?c.trim():c)),o.number&&(i=s.map(dl)));let l,a=n[l=Cn(t)]||n[l=Cn(Tt(t))];!a&&r&&(a=n[l=Cn(Gt(t))]),a&&ot(a,e,6,i);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ot(u,e,6,i)}}const Ra=new WeakMap;function fo(e,t,s=!1){const n=s?Ra:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const r=e.emits;let o={},l=!1;if(!W(e)){const a=u=>{const c=fo(u,t,!0);c&&(l=!0,Ee(o,c))};!s&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(fe(e)&&n.set(e,null),null):(V(r)?r.forEach(a=>o[a]=null):Ee(o,r),fe(e)&&n.set(e,o),o)}function mn(e,t){return!e||!fn(t)?!1:(t=t.slice(2).replace(/Once$/,""),X(e,t[0].toLowerCase()+t.slice(1))||X(e,Gt(t))||X(e,t))}function Ui(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:p,data:d,setupState:m,ctx:_,inheritAttrs:C}=e,O=on(e);let I,k;try{if(s.shapeFlag&4){const $=i||n,oe=$;I=tt(u.call(oe,$,c,p,m,d,_)),k=l}else{const $=t;I=tt($.length>1?$(p,{attrs:l,slots:o,emit:a}):$(p,null)),k=t.props?l:Na(l)}}catch($){ws.length=0,gn($,e,1),I=rt(It)}let U=I;if(k&&C!==!1){const $=Object.keys(k),{shapeFlag:oe}=U;$.length&&oe&7&&(r&&$.some(si)&&(k=Ma(k,r)),U=os(U,k,!1,!0))}return s.dirs&&(U=os(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(s.dirs):s.dirs),s.transition&&gi(U,s.transition),I=U,on(O),I}const Na=e=>{let t;for(const s in e)(s==="class"||s==="style"||fn(s))&&((t||(t={}))[s]=e[s]);return t},Ma=(e,t)=>{const s={};for(const n in e)(!si(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Pa(e,t,s){const{props:n,children:i,component:r}=e,{props:o,children:l,patchFlag:a}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?Hi(n,o,u):!!o;if(a&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const d=c[p];if(o[d]!==n[d]&&!mn(u,d))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?Hi(n,o,u):!0:!!o;return!1}function Hi(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r]&&!mn(s,r))return!0}return!1}function $a({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const uo={},ho=()=>Object.create(uo),po=e=>Object.getPrototypeOf(e)===uo;function ka(e,t,s,n=!1){const i={},r=ho();e.propsDefaults=Object.create(null),go(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);s?e.props=n?i:Ul(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function La(e,t,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,l=z(i),[a]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let d=c[p];if(mn(e.emitsOptions,d))continue;const m=t[d];if(a)if(X(r,d))m!==r[d]&&(r[d]=m,u=!0);else{const _=Tt(d);i[_]=Qn(a,l,_,m,e,!1)}else m!==r[d]&&(r[d]=m,u=!0)}}}else{go(e,t,i,r)&&(u=!0);let c;for(const p in l)(!t||!X(t,p)&&((c=Gt(p))===p||!X(t,c)))&&(a?s&&(s[p]!==void 0||s[c]!==void 0)&&(i[p]=Qn(a,l,p,void 0,e,!0)):delete i[p]);if(r!==l)for(const p in r)(!t||!X(t,p))&&(delete r[p],u=!0)}u&&ht(e.attrs,"set","")}function go(e,t,s,n){const[i,r]=e.propsOptions;let o=!1,l;if(t)for(let a in t){if(bs(a))continue;const u=t[a];let c;i&&X(i,c=Tt(a))?!r||!r.includes(c)?s[c]=u:(l||(l={}))[c]=u:mn(e.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(r){const a=z(s),u=l||re;for(let c=0;c<r.length;c++){const p=r[c];s[p]=Qn(i,a,p,u[p],e,!X(u,p))}}return o}function Qn(e,t,s,n,i,r){const o=e[s];if(o!=null){const l=X(o,"default");if(l&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&W(a)){const{propsDefaults:u}=i;if(s in u)n=u[s];else{const c=Ls(i);n=u[s]=a.call(null,t),c()}}else n=a;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!l?n=!1:o[1]&&(n===""||n===Gt(s))&&(n=!0))}return n}const Fa=new WeakMap;function _o(e,t,s=!1){const n=s?Fa:t.propsCache,i=n.get(e);if(i)return i;const r=e.props,o={},l=[];let a=!1;if(!W(e)){const c=p=>{a=!0;const[d,m]=_o(p,t,!0);Ee(o,d),m&&l.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!a)return fe(e)&&n.set(e,es),es;if(V(r))for(let c=0;c<r.length;c++){const p=Tt(r[c]);ji(p)&&(o[p]=re)}else if(r)for(const c in r){const p=Tt(c);if(ji(p)){const d=r[c],m=o[p]=V(d)||W(d)?{type:d}:Ee({},d),_=m.type;let C=!1,O=!0;if(V(_))for(let I=0;I<_.length;++I){const k=_[I],U=W(k)&&k.name;if(U==="Boolean"){C=!0;break}else U==="String"&&(O=!1)}else C=W(_)&&_.name==="Boolean";m[0]=C,m[1]=O,(C||X(m,"default"))&&l.push(p)}}const u=[o,l];return fe(e)&&n.set(e,u),u}function ji(e){return e[0]!=="$"&&!bs(e)}const mi=e=>e==="_"||e==="_ctx"||e==="$stable",vi=e=>V(e)?e.map(tt):[tt(e)],Da=(e,t,s)=>{if(t._n)return t;const n=Zl((...i)=>vi(t(...i)),s);return n._c=!1,n},mo=(e,t,s)=>{const n=e._ctx;for(const i in e){if(mi(i))continue;const r=e[i];if(W(r))t[i]=Da(i,r,n);else if(r!=null){const o=vi(r);t[i]=()=>o}}},vo=(e,t)=>{const s=vi(t);e.slots.default=()=>s},bo=(e,t,s)=>{for(const n in t)(s||!mi(n))&&(e[n]=t[n])},Ka=(e,t,s)=>{const n=e.slots=ho();if(e.vnode.shapeFlag&32){const i=t._;i?(bo(n,t,s),s&&Nr(n,"_",i,!0)):mo(t,n)}else t&&vo(e,t)},Ua=(e,t,s)=>{const{vnode:n,slots:i}=e;let r=!0,o=re;if(n.shapeFlag&32){const l=t._;l?s&&l===1?r=!1:bo(i,t,s):(r=!t.$stable,mo(t,i)),o=t}else t&&(vo(e,t),o={default:1});if(r)for(const l in i)!mi(l)&&o[l]==null&&delete i[l]},Ue=qa;function Ha(e){return ja(e)}function ja(e,t){const s=dn();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:m=it,insertStaticContent:_}=e,C=(f,h,E,A=null,S=null,x=null,M=void 0,R=null,T=!!h.dynamicChildren)=>{if(f===h)return;f&&!ps(f,h)&&(A=ct(f),Be(f,S,x,!0),f=null),h.patchFlag===-2&&(T=!1,h.dynamicChildren=null);const{type:w,ref:K,shapeFlag:P}=h;switch(w){case vn:O(f,h,E,A);break;case It:I(f,h,E,A);break;case Nn:f==null&&k(h,E,A,M);break;case ye:Ne(f,h,E,A,S,x,M,R,T);break;default:P&1?oe(f,h,E,A,S,x,M,R,T):P&6?qt(f,h,E,A,S,x,M,R,T):(P&64||P&128)&&w.process(f,h,E,A,S,x,M,R,T,Pt)}K!=null&&S?Cs(K,f&&f.ref,x,h||f,!h):K==null&&f&&f.ref!=null&&Cs(f.ref,null,x,f,!0)},O=(f,h,E,A)=>{if(f==null)n(h.el=l(h.children),E,A);else{const S=h.el=f.el;h.children!==f.children&&u(S,h.children)}},I=(f,h,E,A)=>{f==null?n(h.el=a(h.children||""),E,A):h.el=f.el},k=(f,h,E,A)=>{[f.el,f.anchor]=_(f.children,h,E,A,f.el,f.anchor)},U=({el:f,anchor:h},E,A)=>{let S;for(;f&&f!==h;)S=d(f),n(f,E,A),f=S;n(h,E,A)},$=({el:f,anchor:h})=>{let E;for(;f&&f!==h;)E=d(f),i(f),f=E;i(h)},oe=(f,h,E,A,S,x,M,R,T)=>{if(h.type==="svg"?M="svg":h.type==="math"&&(M="mathml"),f==null)De(h,E,A,S,x,M,R,T);else{const w=f.el&&f.el._isVueCE?f.el:null;try{w&&w._beginPatch(),Re(f,h,S,x,M,R,T)}finally{w&&w._endPatch()}}},De=(f,h,E,A,S,x,M,R)=>{let T,w;const{props:K,shapeFlag:P,transition:L,dirs:B}=f;if(T=f.el=o(f.type,x,K&&K.is,K),P&8?c(T,f.children):P&16&&Ie(f.children,T,null,A,S,Rn(f,x),M,R),B&&Lt(f,null,A,"created"),Te(T,f,f.scopeId,M,A),K){for(const Z in K)Z!=="value"&&!bs(Z)&&r(T,Z,null,K[Z],x,A);"value"in K&&r(T,"value",null,K.value,x),(w=K.onVnodeBeforeMount)&&Ze(w,A,f)}B&&Lt(f,null,A,"beforeMount");const Y=Ba(S,L);Y&&L.beforeEnter(T),n(T,h,E),((w=K&&K.onVnodeMounted)||Y||B)&&Ue(()=>{w&&Ze(w,A,f),Y&&L.enter(T),B&&Lt(f,null,A,"mounted")},S)},Te=(f,h,E,A,S)=>{if(E&&m(f,E),A)for(let x=0;x<A.length;x++)m(f,A[x]);if(S){let x=S.subTree;if(h===x||So(x.type)&&(x.ssContent===h||x.ssFallback===h)){const M=S.vnode;Te(f,M,M.scopeId,M.slotScopeIds,S.parent)}}},Ie=(f,h,E,A,S,x,M,R,T=0)=>{for(let w=T;w<f.length;w++){const K=f[w]=R?Ct(f[w]):tt(f[w]);C(null,K,h,E,A,S,x,M,R)}},Re=(f,h,E,A,S,x,M)=>{const R=h.el=f.el;let{patchFlag:T,dynamicChildren:w,dirs:K}=h;T|=f.patchFlag&16;const P=f.props||re,L=h.props||re;let B;if(E&&Ft(E,!1),(B=L.onVnodeBeforeUpdate)&&Ze(B,E,h,f),K&&Lt(h,f,E,"beforeUpdate"),E&&Ft(E,!0),(P.innerHTML&&L.innerHTML==null||P.textContent&&L.textContent==null)&&c(R,""),w?Q(f.dynamicChildren,w,R,E,A,Rn(h,S),x):M||te(f,h,R,null,E,A,Rn(h,S),x,!1),T>0){if(T&16)he(R,P,L,E,S);else if(T&2&&P.class!==L.class&&r(R,"class",null,L.class,S),T&4&&r(R,"style",P.style,L.style,S),T&8){const Y=h.dynamicProps;for(let Z=0;Z<Y.length;Z++){const J=Y[Z],Ce=P[J],Se=L[J];(Se!==Ce||J==="value")&&r(R,J,Ce,Se,S,E)}}T&1&&f.children!==h.children&&c(R,h.children)}else!M&&w==null&&he(R,P,L,E,S);((B=L.onVnodeUpdated)||K)&&Ue(()=>{B&&Ze(B,E,h,f),K&&Lt(h,f,E,"updated")},A)},Q=(f,h,E,A,S,x,M)=>{for(let R=0;R<h.length;R++){const T=f[R],w=h[R],K=T.el&&(T.type===ye||!ps(T,w)||T.shapeFlag&198)?p(T.el):E;C(T,w,K,null,A,S,x,M,!0)}},he=(f,h,E,A,S)=>{if(h!==E){if(h!==re)for(const x in h)!bs(x)&&!(x in E)&&r(f,x,h[x],null,S,A);for(const x in E){if(bs(x))continue;const M=E[x],R=h[x];M!==R&&x!=="value"&&r(f,x,R,M,S,A)}"value"in E&&r(f,"value",h.value,E.value,S)}},Ne=(f,h,E,A,S,x,M,R,T)=>{const w=h.el=f?f.el:l(""),K=h.anchor=f?f.anchor:l("");let{patchFlag:P,dynamicChildren:L,slotScopeIds:B}=h;B&&(R=R?R.concat(B):B),f==null?(n(w,E,A),n(K,E,A),Ie(h.children||[],E,K,S,x,M,R,T)):P>0&&P&64&&L&&f.dynamicChildren&&f.dynamicChildren.length===L.length?(Q(f.dynamicChildren,L,E,S,x,M,R),(h.key!=null||S&&h===S.subTree)&&yo(f,h,!0)):te(f,h,E,K,S,x,M,R,T)},qt=(f,h,E,A,S,x,M,R,T)=>{h.slotScopeIds=R,f==null?h.shapeFlag&512?S.ctx.activate(h,E,A,M,T):Vt(h,E,A,S,x,M,T):as(f,h,T)},Vt=(f,h,E,A,S,x,M)=>{const R=f.component=Xa(f,A,S);if(io(f)&&(R.ctx.renderer=Pt),ec(R,!1,M),R.asyncDep){if(S&&S.registerDep(R,_e,M),!f.el){const T=R.subTree=rt(It);I(null,T,h,E),f.placeholder=T.el}}else _e(R,f,h,E,S,x,M)},as=(f,h,E)=>{const A=h.component=f.component;if(Pa(f,h,E))if(A.asyncDep&&!A.asyncResolved){ne(A,h,E);return}else A.next=h,A.update();else h.el=f.el,A.vnode=h},_e=(f,h,E,A,S,x,M)=>{const R=()=>{if(f.isMounted){let{next:P,bu:L,u:B,parent:Y,vnode:Z}=f;{const qe=Eo(f);if(qe){P&&(P.el=Z.el,ne(f,P,M)),qe.asyncDep.then(()=>{f.isUnmounted||R()});return}}let J=P,Ce;Ft(f,!1),P?(P.el=Z.el,ne(f,P,M)):P=Z,L&&Sn(L),(Ce=P.props&&P.props.onVnodeBeforeUpdate)&&Ze(Ce,Y,P,Z),Ft(f,!0);const Se=Ui(f),Ge=f.subTree;f.subTree=Se,C(Ge,Se,p(Ge.el),ct(Ge),f,S,x),P.el=Se.el,J===null&&$a(f,Se.el),B&&Ue(B,S),(Ce=P.props&&P.props.onVnodeUpdated)&&Ue(()=>Ze(Ce,Y,P,Z),S)}else{let P;const{el:L,props:B}=h,{bm:Y,m:Z,parent:J,root:Ce,type:Se}=f,Ge=Ss(h);Ft(f,!1),Y&&Sn(Y),!Ge&&(P=B&&B.onVnodeBeforeMount)&&Ze(P,J,h),Ft(f,!0);{Ce.ce&&Ce.ce._def.shadowRoot!==!1&&Ce.ce._injectChildStyle(Se);const qe=f.subTree=Ui(f);C(null,qe,E,A,f,S,x),h.el=qe.el}if(Z&&Ue(Z,S),!Ge&&(P=B&&B.onVnodeMounted)){const qe=h;Ue(()=>Ze(P,J,qe),S)}(h.shapeFlag&256||J&&Ss(J.vnode)&&J.vnode.shapeFlag&256)&&f.a&&Ue(f.a,S),f.isMounted=!0,h=E=A=null}};f.scope.on();const T=f.effect=new kr(R);f.scope.off();const w=f.update=T.run.bind(T),K=f.job=T.runIfDirty.bind(T);K.i=f,K.id=f.uid,T.scheduler=()=>pi(K),Ft(f,!0),w()},ne=(f,h,E)=>{h.component=f;const A=f.vnode.props;f.vnode=h,f.next=null,La(f,h.props,A,E),Ua(f,h.children,E),pt(),$i(f),gt()},te=(f,h,E,A,S,x,M,R,T=!1)=>{const w=f&&f.children,K=f?f.shapeFlag:0,P=h.children,{patchFlag:L,shapeFlag:B}=h;if(L>0){if(L&128){Nt(w,P,E,A,S,x,M,R,T);return}else if(L&256){lt(w,P,E,A,S,x,M,R,T);return}}B&8?(K&16&&Mt(w,S,x),P!==w&&c(E,P)):K&16?B&16?Nt(w,P,E,A,S,x,M,R,T):Mt(w,S,x,!0):(K&8&&c(E,""),B&16&&Ie(P,E,A,S,x,M,R,T))},lt=(f,h,E,A,S,x,M,R,T)=>{f=f||es,h=h||es;const w=f.length,K=h.length,P=Math.min(w,K);let L;for(L=0;L<P;L++){const B=h[L]=T?Ct(h[L]):tt(h[L]);C(f[L],B,E,null,S,x,M,R,T)}w>K?Mt(f,S,x,!0,!1,P):Ie(h,E,A,S,x,M,R,T,P)},Nt=(f,h,E,A,S,x,M,R,T)=>{let w=0;const K=h.length;let P=f.length-1,L=K-1;for(;w<=P&&w<=L;){const B=f[w],Y=h[w]=T?Ct(h[w]):tt(h[w]);if(ps(B,Y))C(B,Y,E,null,S,x,M,R,T);else break;w++}for(;w<=P&&w<=L;){const B=f[P],Y=h[L]=T?Ct(h[L]):tt(h[L]);if(ps(B,Y))C(B,Y,E,null,S,x,M,R,T);else break;P--,L--}if(w>P){if(w<=L){const B=L+1,Y=B<K?h[B].el:A;for(;w<=L;)C(null,h[w]=T?Ct(h[w]):tt(h[w]),E,Y,S,x,M,R,T),w++}}else if(w>L)for(;w<=P;)Be(f[w],S,x,!0),w++;else{const B=w,Y=w,Z=new Map;for(w=Y;w<=L;w++){const Me=h[w]=T?Ct(h[w]):tt(h[w]);Me.key!=null&&Z.set(Me.key,w)}let J,Ce=0;const Se=L-Y+1;let Ge=!1,qe=0;const $t=new Array(Se);for(w=0;w<Se;w++)$t[w]=0;for(w=B;w<=P;w++){const Me=f[w];if(Ce>=Se){Be(Me,S,x,!0);continue}let Ve;if(Me.key!=null)Ve=Z.get(Me.key);else for(J=Y;J<=L;J++)if($t[J-Y]===0&&ps(Me,h[J])){Ve=J;break}Ve===void 0?Be(Me,S,x,!0):($t[Ve-Y]=w+1,Ve>=qe?qe=Ve:Ge=!0,C(Me,h[Ve],E,null,S,x,M,R,T),Ce++)}const Ks=Ge?Ga($t):es;for(J=Ks.length-1,w=Se-1;w>=0;w--){const Me=Y+w,Ve=h[Me],us=h[Me+1],Us=Me+1<K?us.el||Co(us):A;$t[w]===0?C(null,Ve,E,Us,S,x,M,R,T):Ge&&(J<0||w!==Ks[J]?at(Ve,E,Us,2):J--)}}},at=(f,h,E,A,S=null)=>{const{el:x,type:M,transition:R,children:T,shapeFlag:w}=f;if(w&6){at(f.component.subTree,h,E,A);return}if(w&128){f.suspense.move(h,E,A);return}if(w&64){M.move(f,h,E,Pt);return}if(M===ye){n(x,h,E);for(let P=0;P<T.length;P++)at(T[P],h,E,A);n(f.anchor,h,E);return}if(M===Nn){U(f,h,E);return}if(A!==2&&w&1&&R)if(A===0)R.beforeEnter(x),n(x,h,E),Ue(()=>R.enter(x),S);else{const{leave:P,delayLeave:L,afterLeave:B}=R,Y=()=>{f.ctx.isUnmounted?i(x):n(x,h,E)},Z=()=>{x._isLeaving&&x[oa](!0),P(x,()=>{Y(),B&&B()})};L?L(x,Y,Z):Z()}else n(x,h,E)},Be=(f,h,E,A=!1,S=!1)=>{const{type:x,props:M,ref:R,children:T,dynamicChildren:w,shapeFlag:K,patchFlag:P,dirs:L,cacheIndex:B}=f;if(P===-2&&(S=!1),R!=null&&(pt(),Cs(R,null,E,f,!0),gt()),B!=null&&(h.renderCache[B]=void 0),K&256){h.ctx.deactivate(f);return}const Y=K&1&&L,Z=!Ss(f);let J;if(Z&&(J=M&&M.onVnodeBeforeUnmount)&&Ze(J,h,f),K&6)Ds(f.component,E,A);else{if(K&128){f.suspense.unmount(E,A);return}Y&&Lt(f,null,h,"beforeUnmount"),K&64?f.type.remove(f,h,E,Pt,A):w&&!w.hasOnce&&(x!==ye||P>0&&P&64)?Mt(w,h,E,!1,!0):(x===ye&&P&384||!S&&K&16)&&Mt(T,h,E),A&&Wt(f)}(Z&&(J=M&&M.onVnodeUnmounted)||Y)&&Ue(()=>{J&&Ze(J,h,f),Y&&Lt(f,null,h,"unmounted")},E)},Wt=f=>{const{type:h,el:E,anchor:A,transition:S}=f;if(h===ye){yn(E,A);return}if(h===Nn){$(f);return}const x=()=>{i(E),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(f.shapeFlag&1&&S&&!S.persisted){const{leave:M,delayLeave:R}=S,T=()=>M(E,x);R?R(f.el,x,T):T()}else x()},yn=(f,h)=>{let E;for(;f!==h;)E=d(f),i(f),f=E;i(h)},Ds=(f,h,E)=>{const{bum:A,scope:S,job:x,subTree:M,um:R,m:T,a:w}=f;Bi(T),Bi(w),A&&Sn(A),S.stop(),x&&(x.flags|=8,Be(M,f,h,E)),R&&Ue(R,h),Ue(()=>{f.isUnmounted=!0},h)},Mt=(f,h,E,A=!1,S=!1,x=0)=>{for(let M=x;M<f.length;M++)Be(f[M],h,E,A,S)},ct=f=>{if(f.shapeFlag&6)return ct(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const h=d(f.anchor||f.el),E=h&&h[ia];return E?d(E):h};let cs=!1;const fs=(f,h,E)=>{let A;f==null?h._vnode&&(Be(h._vnode,null,null,!0),A=h._vnode.component):C(h._vnode||null,f,h,null,null,null,E),h._vnode=f,cs||(cs=!0,$i(A),Xr(),cs=!1)},Pt={p:C,um:Be,m:at,r:Wt,mt:Vt,mc:Ie,pc:te,pbc:Q,n:ct,o:e};return{render:fs,hydrate:void 0,createApp:Oa(fs)}}function Rn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ft({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ba(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yo(e,t,s=!1){const n=e.children,i=t.children;if(V(n)&&V(i))for(let r=0;r<n.length;r++){const o=n[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=Ct(i[r]),l.el=o.el),!s&&l.patchFlag!==-2&&yo(o,l)),l.type===vn&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(e.type===ye?1:0)),l.type===It&&!l.el&&(l.el=o.el)}}function Ga(e){const t=e.slice(),s=[0];let n,i,r,o,l;const a=e.length;for(n=0;n<a;n++){const u=e[n];if(u!==0){if(i=s[s.length-1],e[i]<u){t[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,e[s[l]]<u?r=l+1:o=l;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=t[o];return s}function Eo(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Eo(t)}function Bi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Co(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Co(t.subTree):null}const So=e=>e.__isSuspense;function qa(e,t){t&&t.pendingBranch?V(e)?t.effects.push(...e):t.effects.push(e):Xl(e)}const ye=Symbol.for("v-fgt"),vn=Symbol.for("v-txt"),It=Symbol.for("v-cmt"),Nn=Symbol.for("v-stc"),ws=[];let je=null;function se(e=!1){ws.push(je=e?null:[])}function Va(){ws.pop(),je=ws[ws.length-1]||null}let Rs=1;function Gi(e,t=!1){Rs+=e,e<0&&je&&t&&(je.hasOnce=!0)}function xo(e){return e.dynamicChildren=Rs>0?je||es:null,Va(),Rs>0&&je&&je.push(e),e}function le(e,t,s,n,i,r){return xo(G(e,t,s,n,i,r,!0))}function wo(e,t,s,n,i){return xo(rt(e,t,s,n,i,!0))}function Ao(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const Oo=({key:e})=>e??null,zs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?pe(e)||Oe(e)||W(e)?{i:nt,r:e,k:t,f:!!s}:e:null);function G(e,t=null,s=null,n=0,i=null,r=e===ye?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Oo(t),ref:t&&zs(t),scopeId:eo,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:nt};return l?(bi(a,s),r&128&&e.normalize(a)):s&&(a.shapeFlag|=pe(s)?8:16),Rs>0&&!o&&je&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&je.push(a),a}const rt=Wa;function Wa(e,t=null,s=null,n=0,i=null,r=!1){if((!e||e===ba)&&(e=It),Ao(e)){const l=os(e,t,!0);return s&&bi(l,s),Rs>0&&!r&&je&&(l.shapeFlag&6?je[je.indexOf(e)]=l:je.push(l)),l.patchFlag=-2,l}if(ic(e)&&(e=e.__vccOpts),t){t=Ya(t);let{class:l,style:a}=t;l&&!pe(l)&&(t.class=st(l)),fe(a)&&(di(a)&&!V(a)&&(a=Ee({},a)),t.style=ri(a))}const o=pe(e)?1:So(e)?128:ra(e)?64:fe(e)?4:W(e)?2:0;return G(e,t,s,n,i,o,r,!0)}function Ya(e){return e?di(e)||po(e)?Ee({},e):e:null}function os(e,t,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=e,u=t?Qa(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Oo(u),ref:t&&t.ref?s&&r?V(r)?r.concat(zs(t)):[r,zs(t)]:zs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ye?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&os(e.ssContent),ssFallback:e.ssFallback&&os(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&n&&gi(c,a.clone(c)),c}function To(e=" ",t=0){return rt(vn,null,e,t)}function dt(e="",t=!1){return t?(se(),wo(It,null,e)):rt(It,null,e)}function tt(e){return e==null||typeof e=="boolean"?rt(It):V(e)?rt(ye,null,e.slice()):Ao(e)?Ct(e):rt(vn,null,String(e))}function Ct(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:os(e)}function bi(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(V(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),bi(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!po(t)?t._ctx=nt:i===3&&nt&&(nt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else W(t)?(t={default:t,_ctx:nt},s=32):(t=String(t),n&64?(s=16,t=[To(t)]):s=8);e.children=t,e.shapeFlag|=s}function Qa(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=st([t.class,n.class]));else if(i==="style")t.style=ri([t.style,n.style]);else if(fn(i)){const r=t[i],o=n[i];o&&r!==o&&!(V(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=n[i])}return t}function Ze(e,t,s,n=null){ot(e,t,7,[s,n])}const Ja=co();let za=0;function Xa(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Ja,r={uid:za++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_o(n,i),emitsOptions:fo(n,i),emit:null,emitted:null,propsDefaults:re,inheritAttrs:n.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ia.bind(null,r),e.ce&&e.ce(r),r}let Le=null;const Za=()=>Le||nt;let cn,Jn;{const e=dn(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};cn=t("__VUE_INSTANCE_SETTERS__",s=>Le=s),Jn=t("__VUE_SSR_SETTERS__",s=>Ns=s)}const Ls=e=>{const t=Le;return cn(e),e.scope.on(),()=>{e.scope.off(),cn(t)}},qi=()=>{Le&&Le.scope.off(),cn(null)};function Io(e){return e.vnode.shapeFlag&4}let Ns=!1;function ec(e,t=!1,s=!1){t&&Jn(t);const{props:n,children:i}=e.vnode,r=Io(e);ka(e,n,r,t),Ka(e,i,s||t);const o=r?tc(e,t):void 0;return t&&Jn(!1),o}function tc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ya);const{setup:n}=s;if(n){pt();const i=e.setupContext=n.length>1?nc(e):null,r=Ls(e),o=ks(n,e,0,[e.props,i]),l=Or(o);if(gt(),r(),(l||e.sp)&&!Ss(e)&&no(e),l){if(o.then(qi,qi),t)return o.then(a=>{Vi(e,a)}).catch(a=>{gn(a,e,0)});e.asyncDep=o}else Vi(e,o)}else Ro(e)}function Vi(e,t,s){W(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=Qr(t)),Ro(e)}function Ro(e,t,s){const n=e.type;e.render||(e.render=n.render||it);{const i=Ls(e);pt();try{Ea(e)}finally{gt(),i()}}}const sc={get(e,t){return we(e,"get",""),e[t]}};function nc(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,sc),slots:e.slots,emit:e.emit,expose:t}}function yi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Qr(Hl(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in xs)return xs[s](e)},has(t,s){return s in t||s in xs}})):e.proxy}function ic(e){return W(e)&&"__vccOpts"in e}const zn=(e,t)=>Vl(e,t,Ns),rc="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xn;const Wi=typeof window<"u"&&window.trustedTypes;if(Wi)try{Xn=Wi.createPolicy("vue",{createHTML:e=>e})}catch{}const No=Xn?e=>Xn.createHTML(e):e=>e,oc="http://www.w3.org/2000/svg",lc="http://www.w3.org/1998/Math/MathML",ut=typeof document<"u"?document:null,Yi=ut&&ut.createElement("template"),ac={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ut.createElementNS(oc,e):t==="mathml"?ut.createElementNS(lc,e):s?ut.createElement(e,{is:s}):ut.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ut.createTextNode(e),createComment:e=>ut.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ut.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,r){const o=s?s.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{Yi.innerHTML=No(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=Yi.content;if(n==="svg"||n==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},cc=Symbol("_vtc");function fc(e,t,s){const n=e[cc];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Qi=Symbol("_vod"),uc=Symbol("_vsh"),hc=Symbol(""),dc=/(?:^|;)\s*display\s*:/;function pc(e,t,s){const n=e.style,i=pe(s);let r=!1;if(s&&!i){if(t)if(pe(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&Xs(n,l,"")}else for(const o in t)s[o]==null&&Xs(n,o,"");for(const o in s)o==="display"&&(r=!0),Xs(n,o,s[o])}else if(i){if(t!==s){const o=n[hc];o&&(s+=";"+o),n.cssText=s,r=dc.test(s)}}else t&&e.removeAttribute("style");Qi in e&&(e[Qi]=r?n.display:"",e[uc]&&(n.display="none"))}const Ji=/\s*!important$/;function Xs(e,t,s){if(V(s))s.forEach(n=>Xs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=gc(e,t);Ji.test(s)?e.setProperty(Gt(n),s.replace(Ji,""),"important"):e[n]=s}}const zi=["Webkit","Moz","ms"],Mn={};function gc(e,t){const s=Mn[t];if(s)return s;let n=Tt(t);if(n!=="filter"&&n in e)return Mn[t]=n;n=Rr(n);for(let i=0;i<zi.length;i++){const r=zi[i]+n;if(r in e)return Mn[t]=r}return t}const Xi="http://www.w3.org/1999/xlink";function Zi(e,t,s,n,i,r=bl(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Xi,t.slice(6,t.length)):e.setAttributeNS(Xi,t,s):s==null||r&&!Mr(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Rt(s)?String(s):s)}function er(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?No(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=s==null?e.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in e))&&(e.value=a),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Mr(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(i||t)}function _c(e,t,s,n){e.addEventListener(t,s,n)}function mc(e,t,s,n){e.removeEventListener(t,s,n)}const tr=Symbol("_vei");function vc(e,t,s,n,i=null){const r=e[tr]||(e[tr]={}),o=r[t];if(n&&o)o.value=n;else{const[l,a]=bc(t);if(n){const u=r[t]=Cc(n,i);_c(e,l,u,a)}else o&&(mc(e,l,o,a),r[t]=void 0)}}const sr=/(?:Once|Passive|Capture)$/;function bc(e){let t;if(sr.test(e)){t={};let n;for(;n=e.match(sr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gt(e.slice(2)),t]}let Pn=0;const yc=Promise.resolve(),Ec=()=>Pn||(yc.then(()=>Pn=0),Pn=Date.now());function Cc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ot(Sc(n,s.value),t,5,[n])};return s.value=e,s.attached=Ec(),s}function Sc(e,t){if(V(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const nr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xc=(e,t,s,n,i,r)=>{const o=i==="svg";t==="class"?fc(e,n,o):t==="style"?pc(e,s,n):fn(t)?si(t)||vc(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wc(e,t,n,o))?(er(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Zi(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!pe(n))?er(e,Tt(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Zi(e,t,n,o))};function wc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&nr(t)&&W(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return nr(t)&&pe(s)?!1:t in e}const Ac=Ee({patchProp:xc},ac);let ir;function Oc(){return ir||(ir=Ha(Ac))}const Tc=(...e)=>{const t=Oc().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=Rc(n);if(!i)return;const r=t._component;!W(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,Ic(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Ic(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rc(e){return pe(e)?document.querySelector(e):e}const Nc={class:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-sm"},Mc={class:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-2xl text-center transform scale-110"},Pc={class:"flex gap-4"},$c=["onClick"],kc=["src","alt"],Lc=_i({__name:"PromotionModal",props:{color:{}},emits:["select"],setup(e,{emit:t}){const s=t,n=[{type:"q",name:"Queen"},{type:"r",name:"Rook"},{type:"b",name:"Bishop"},{type:"n",name:"Knight"}],i=(r,o)=>`/${o}${r.toUpperCase()}.svg`;return(r,o)=>(se(),le("div",Nc,[G("div",Mc,[o[0]||(o[0]=G("h3",{class:"text-xl font-bold text-white mb-4"},"Choose Promotion",-1)),G("div",Pc,[(se(),le(ye,null,ns(n,l=>G("button",{key:l.type,onClick:a=>s("select",l.type),class:"w-16 h-16 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-all border border-gray-600 hover:border-emerald-500"},[G("img",{src:i(l.type,e.color),alt:l.name,class:"w-full h-full drop-shadow-md"},null,8,kc)],8,$c)),64))])])]))}}),Fc={class:"relative w-full max-w-[600px] aspect-square"},Dc={class:"grid grid-cols-8 grid-rows-8 w-full h-full border-4 border-[#333] shadow-2xl rounded-sm overflow-hidden select-none"},Kc=["onClick"],Uc={key:2,class:"absolute w-1/3 h-1/3 rounded-full bg-black/20 z-10 pointer-events-none"},Hc={key:3,class:"w-full h-full z-20 p-1 md:p-1.5 transition-transform duration-200 hover:scale-110"},jc=["src"],Bc=_i({__name:"ChessBoard",props:{board:{},turn:{},lastMove:{},legalMoves:{},getLegalMoves:{type:Function}},emits:["move"],setup(e,{emit:t}){const s=e,n=t,i=ue(null),r=ue([]),o=ue(!1),l=ue(null),a=(m,_)=>`/${_}${m.toUpperCase()}.svg`,u=m=>{if(!o.value){if(!i.value){const _=s.board.flat().find(C=>(C==null?void 0:C.square)===m);if(_&&_.color===s.turn){i.value=m;const C=s.getLegalMoves(m);r.value=C.map(O=>O.to)}return}if(i.value===m){i.value=null,r.value=[];return}if(r.value.includes(m)){const _=i.value,C=m,O=s.board.flat().find(U=>(U==null?void 0:U.square)===_),I=(O==null?void 0:O.type)==="p",k=(O==null?void 0:O.color)==="w"&&C[1]==="8"||(O==null?void 0:O.color)==="b"&&C[1]==="1";if(I&&k){l.value={from:_,to:C},o.value=!0;return}n("move",{from:_,to:C}),i.value=null,r.value=[]}else{const _=s.board.flat().find(C=>(C==null?void 0:C.square)===m);if(_&&_.color===s.turn){i.value=m;const C=s.getLegalMoves(m);r.value=C.map(O=>O.to)}else i.value=null,r.value=[]}}},c=m=>{l.value&&(n("move",{from:l.value.from,to:l.value.to,promotion:m}),l.value=null,o.value=!1,i.value=null,r.value=[])},p=["a","b","c","d","e","f","g","h"],d=["8","7","6","5","4","3","2","1"];return(m,_)=>(se(),le("div",Fc,[G("div",Dc,[(se(),le(ye,null,ns(d,(C,O)=>(se(),le(ye,{key:C},[(se(),le(ye,null,ns(p,(I,k)=>{var U,$;return G("div",{key:I+C,class:st(["relative flex items-center justify-center w-full h-full text-4xl",[(O+k)%2===0?"bg-board-light":"bg-board-dark",i.value===I+C?"!bg-yellow-400/80":"",r.value.includes(I+C)?"cursor-pointer":"",((U=e.lastMove)==null?void 0:U.from)===I+C||(($=e.lastMove)==null?void 0:$.to)===I+C?"bg-yellow-200/50":""]]),onClick:oe=>u(I+C)},[k===0?(se(),le("span",{key:0,class:st(["absolute top-0.5 left-1 text-[10px] sm:text-xs font-bold",(O+k)%2===0?"text-board-dark":"text-board-light"])},He(C),3)):dt("",!0),O===7?(se(),le("span",{key:1,class:st(["absolute bottom-0.5 right-1 text-[10px] sm:text-xs font-bold",(O+k)%2===0?"text-board-dark":"text-board-light"])},He(I),3)):dt("",!0),r.value.includes(I+C)?(se(),le("div",Uc)):dt("",!0),e.board[O][k]?(se(),le("div",Hc,[G("img",{src:a(e.board[O][k].type,e.board[O][k].color),class:"w-full h-full drop-shadow-md select-none",draggable:"false"},null,8,jc)])):dt("",!0)],10,Kc)}),64))],64))),64))]),o.value?(se(),wo(Lc,{key:0,color:e.turn,onSelect:c},null,8,["color"])):dt("",!0)]))}}),Gc=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},qc=Gc(Bc,[["__scopeId","data-v-12d55322"]]);function Vc(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function Wc(e,t,s,n,i){const r={move:e,variations:i};return t&&(r.suffix=t),s&&(r.nag=s),n!==null&&(r.comment=n),r}function Yc(...e){const[t,...s]=e;let n=t;for(const i of s)i!==null&&(n.variations=[i,...i.variations],i.variations=[],n=i);return t}function Qc(e,t){if(t.marker&&t.marker.comment){let s=t.root;for(;;){const n=s.variations[0];if(!n){s.comment=t.marker.comment;break}s=n}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function Jc(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}function ls(e,t,s,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,ls.prototype),i.expected=t,i.found=s,i.location=n,i.name="SyntaxError",i}Jc(ls,Error);function $n(e,t,s){return s=s||" ",e.length>t?e:(t-=e.length,s+=s.repeat(t),e+s.slice(0,t))}ls.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var s=null,n;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){s=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+r.line+":"+r.column;if(s){var l=this.location.end,a=$n("",r.line.toString().length," "),u=s[i.line-1],c=i.line===l.line?l.column:u.length+1,p=c-i.column||1;t+=`
 --> `+o+`
`+a+` |
`+r.line+" | "+u+`
`+a+" | "+$n("",i.column-1," ")+$n("",p,"^")}else t+=`
 at `+o}return t};ls.buildMessage=function(e,t){var s={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var c=u.parts.map(function(p){return Array.isArray(p)?r(p[0])+"-"+r(p[1]):r(p)});return"["+(u.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function r(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function o(u){return s[u.type](u)}function l(u){var c=u.map(o),p,d;if(c.sort(),c.length>0){for(p=1,d=1;p<c.length;p++)c[p-1]!==c[p]&&(c[d]=c[p],d++);c.length=d}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}function a(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+l(e)+" but "+a(t)+" found."};function zc(e,t){t=t!==void 0?t:{};var s={},n=t.grammarSource,i={pgn:wi},r=wi,o="[",l='"',a="]",u=".",c="O-O-O",p="O-O",d="0-0-0",m="0-0",_="$",C="{",O="}",I=";",k="(",U=")",$="1-0",oe="0-1",De="1/2-1/2",Te="*",Ie=/^[a-zA-Z]/,Re=/^[^"]/,Q=/^[0-9]/,he=/^[.]/,Ne=/^[a-zA-Z1-8\-=]/,qt=/^[+#]/,Vt=/^[!?]/,as=/^[^}]/,_e=/^[^\r\n]/,ne=/^[ \t\r\n]/,te=We("tag pair"),lt=me("[",!1),Nt=me('"',!1),at=me("]",!1),Be=We("tag name"),Wt=Xe([["a","z"],["A","Z"]],!1,!1),yn=We("tag value"),Ds=Xe(['"'],!0,!1),Mt=We("move number"),ct=Xe([["0","9"]],!1,!1),cs=me(".",!1),fs=Xe(["."],!1,!1),Pt=We("standard algebraic notation"),Ci=me("O-O-O",!1),f=me("O-O",!1),h=me("0-0-0",!1),E=me("0-0",!1),A=Xe([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),S=Xe(["+","#"],!1,!1),x=We("suffix annotation"),M=Xe(["!","?"],!1,!1),R=We("NAG"),T=me("$",!1),w=We("brace comment"),K=me("{",!1),P=Xe(["}"],!0,!1),L=me("}",!1),B=We("rest of line comment"),Y=me(";",!1),Z=Xe(["\r",`
`],!0,!1),J=We("variation"),Ce=me("(",!1),Se=me(")",!1),Ge=We("game termination marker"),qe=me("1-0",!1),$t=me("0-1",!1),Ks=me("1/2-1/2",!1),Me=me("*",!1),Ve=We("whitespace"),us=Xe([" ","	","\r",`
`],!1,!1),Us=function(g,b){return Qc(g,b)},Ko=function(g){return Object.fromEntries(g)},Uo=function(g,b){return[g,b]},Ho=function(g,b){return{root:g,marker:b}},jo=function(g,b){return Yc(Vc(g),...b.flat())},Bo=function(g,b,y,D,H){return Wc(g,b,y,D,H)},Go=function(g){return g},qo=function(g){return g.replace(/[\r\n]+/g," ")},Vo=function(g){return g.trim()},Wo=function(g){return g},Yo=function(g,b){return{result:g,comment:b}},v=t.peg$currPos|0,Yt=[{line:1,column:1}],Qe=v,Hs=t.peg$maxFailExpected||[],N=t.peg$silentFails|0,hs;if(t.startRule){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');r=i[t.startRule]}function me(g,b){return{type:"literal",text:g,ignoreCase:b}}function Xe(g,b,y){return{type:"class",parts:g,inverted:b,ignoreCase:y}}function Qo(){return{type:"end"}}function We(g){return{type:"other",description:g}}function Si(g){var b=Yt[g],y;if(b)return b;if(g>=Yt.length)y=Yt.length-1;else for(y=g;!Yt[--y];);for(b=Yt[y],b={line:b.line,column:b.column};y<g;)e.charCodeAt(y)===10?(b.line++,b.column=1):b.column++,y++;return Yt[g]=b,b}function xi(g,b,y){var D=Si(g),H=Si(b),ee={source:n,start:{offset:g,line:D.line,column:D.column},end:{offset:b,line:H.line,column:H.column}};return ee}function F(g){v<Qe||(v>Qe&&(Qe=v,Hs=[]),Hs.push(g))}function Jo(g,b,y){return new ls(ls.buildMessage(g,b),g,b,y)}function wi(){var g,b,y;return g=v,b=zo(),y=el(),g=Us(b,y),g}function zo(){var g,b,y;for(g=v,b=[],y=Ai();y!==s;)b.push(y),y=Ai();return y=Pe(),g=Ko(b),g}function Ai(){var g,b,y,D,H,ee,kt;return N++,g=v,Pe(),e.charCodeAt(v)===91?(b=o,v++):(b=s,N===0&&F(lt)),b!==s?(Pe(),y=Xo(),y!==s?(Pe(),e.charCodeAt(v)===34?(D=l,v++):(D=s,N===0&&F(Nt)),D!==s?(H=Zo(),e.charCodeAt(v)===34?(ee=l,v++):(ee=s,N===0&&F(Nt)),ee!==s?(Pe(),e.charCodeAt(v)===93?(kt=a,v++):(kt=s,N===0&&F(at)),kt!==s?g=Uo(y,H):(v=g,g=s)):(v=g,g=s)):(v=g,g=s)):(v=g,g=s)):(v=g,g=s),N--,g===s&&N===0&&F(te),g}function Xo(){var g,b,y;if(N++,g=v,b=[],y=e.charAt(v),Ie.test(y)?v++:(y=s,N===0&&F(Wt)),y!==s)for(;y!==s;)b.push(y),y=e.charAt(v),Ie.test(y)?v++:(y=s,N===0&&F(Wt));else b=s;return b!==s?g=e.substring(g,v):g=b,N--,g===s&&(b=s,N===0&&F(Be)),g}function Zo(){var g,b,y;for(N++,g=v,b=[],y=e.charAt(v),Re.test(y)?v++:(y=s,N===0&&F(Ds));y!==s;)b.push(y),y=e.charAt(v),Re.test(y)?v++:(y=s,N===0&&F(Ds));return g=e.substring(g,v),N--,b=s,N===0&&F(yn),g}function el(){var g,b,y;return g=v,b=Oi(),Pe(),y=ol(),y===s&&(y=null),Pe(),g=Ho(b,y),g}function Oi(){var g,b,y,D;for(g=v,b=En(),b===s&&(b=null),y=[],D=Ti();D!==s;)y.push(D),D=Ti();return g=jo(b,y),g}function Ti(){var g,b,y,D,H,ee,kt,js;if(g=v,Pe(),tl(),Pe(),b=sl(),b!==s){for(y=nl(),y===s&&(y=null),D=[],H=Ii();H!==s;)D.push(H),H=Ii();for(H=Pe(),ee=En(),ee===s&&(ee=null),kt=[],js=Ri();js!==s;)kt.push(js),js=Ri();g=Bo(b,y,D,ee,kt)}else v=g,g=s;return g}function tl(){var g,b,y,D,H,ee;for(N++,g=v,b=[],y=e.charAt(v),Q.test(y)?v++:(y=s,N===0&&F(ct));y!==s;)b.push(y),y=e.charAt(v),Q.test(y)?v++:(y=s,N===0&&F(ct));if(e.charCodeAt(v)===46?(y=u,v++):(y=s,N===0&&F(cs)),y!==s){for(D=Pe(),H=[],ee=e.charAt(v),he.test(ee)?v++:(ee=s,N===0&&F(fs));ee!==s;)H.push(ee),ee=e.charAt(v),he.test(ee)?v++:(ee=s,N===0&&F(fs));b=[b,y,D,H],g=b}else v=g,g=s;return N--,g===s&&(b=s,N===0&&F(Mt)),g}function sl(){var g,b,y,D,H,ee;if(N++,g=v,b=v,e.substr(v,5)===c?(y=c,v+=5):(y=s,N===0&&F(Ci)),y===s&&(e.substr(v,3)===p?(y=p,v+=3):(y=s,N===0&&F(f)),y===s&&(e.substr(v,5)===d?(y=d,v+=5):(y=s,N===0&&F(h)),y===s&&(e.substr(v,3)===m?(y=m,v+=3):(y=s,N===0&&F(E)),y===s))))if(y=v,D=e.charAt(v),Ie.test(D)?v++:(D=s,N===0&&F(Wt)),D!==s){if(H=[],ee=e.charAt(v),Ne.test(ee)?v++:(ee=s,N===0&&F(A)),ee!==s)for(;ee!==s;)H.push(ee),ee=e.charAt(v),Ne.test(ee)?v++:(ee=s,N===0&&F(A));else H=s;H!==s?(D=[D,H],y=D):(v=y,y=s)}else v=y,y=s;return y!==s?(D=e.charAt(v),qt.test(D)?v++:(D=s,N===0&&F(S)),D===s&&(D=null),y=[y,D],b=y):(v=b,b=s),b!==s?g=e.substring(g,v):g=b,N--,g===s&&(b=s,N===0&&F(Pt)),g}function nl(){var g,b,y;for(N++,g=v,b=[],y=e.charAt(v),Vt.test(y)?v++:(y=s,N===0&&F(M));y!==s;)b.push(y),b.length>=2?y=s:(y=e.charAt(v),Vt.test(y)?v++:(y=s,N===0&&F(M)));return b.length<1?(v=g,g=s):g=b,N--,g===s&&(b=s,N===0&&F(x)),g}function Ii(){var g,b,y,D,H;if(N++,g=v,Pe(),e.charCodeAt(v)===36?(b=_,v++):(b=s,N===0&&F(T)),b!==s){if(y=v,D=[],H=e.charAt(v),Q.test(H)?v++:(H=s,N===0&&F(ct)),H!==s)for(;H!==s;)D.push(H),H=e.charAt(v),Q.test(H)?v++:(H=s,N===0&&F(ct));else D=s;D!==s?y=e.substring(y,v):y=D,y!==s?g=Go(y):(v=g,g=s)}else v=g,g=s;return N--,g===s&&N===0&&F(R),g}function En(){var g;return g=il(),g===s&&(g=rl()),g}function il(){var g,b,y,D,H;if(N++,g=v,e.charCodeAt(v)===123?(b=C,v++):(b=s,N===0&&F(K)),b!==s){for(y=v,D=[],H=e.charAt(v),as.test(H)?v++:(H=s,N===0&&F(P));H!==s;)D.push(H),H=e.charAt(v),as.test(H)?v++:(H=s,N===0&&F(P));y=e.substring(y,v),e.charCodeAt(v)===125?(D=O,v++):(D=s,N===0&&F(L)),D!==s?g=qo(y):(v=g,g=s)}else v=g,g=s;return N--,g===s&&(b=s,N===0&&F(w)),g}function rl(){var g,b,y,D,H;if(N++,g=v,e.charCodeAt(v)===59?(b=I,v++):(b=s,N===0&&F(Y)),b!==s){for(y=v,D=[],H=e.charAt(v),_e.test(H)?v++:(H=s,N===0&&F(Z));H!==s;)D.push(H),H=e.charAt(v),_e.test(H)?v++:(H=s,N===0&&F(Z));y=e.substring(y,v),g=Vo(y)}else v=g,g=s;return N--,g===s&&(b=s,N===0&&F(B)),g}function Ri(){var g,b,y,D;return N++,g=v,Pe(),e.charCodeAt(v)===40?(b=k,v++):(b=s,N===0&&F(Ce)),b!==s?(y=Oi(),y!==s?(Pe(),e.charCodeAt(v)===41?(D=U,v++):(D=s,N===0&&F(Se)),D!==s?g=Wo(y):(v=g,g=s)):(v=g,g=s)):(v=g,g=s),N--,g===s&&N===0&&F(J),g}function ol(){var g,b,y;return N++,g=v,e.substr(v,3)===$?(b=$,v+=3):(b=s,N===0&&F(qe)),b===s&&(e.substr(v,3)===oe?(b=oe,v+=3):(b=s,N===0&&F($t)),b===s&&(e.substr(v,7)===De?(b=De,v+=7):(b=s,N===0&&F(Ks)),b===s&&(e.charCodeAt(v)===42?(b=Te,v++):(b=s,N===0&&F(Me))))),b!==s?(Pe(),y=En(),y===s&&(y=null),g=Yo(b,y)):(v=g,g=s),N--,g===s&&(b=s,N===0&&F(Ge)),g}function Pe(){var g,b;for(N++,g=[],b=e.charAt(v),ne.test(b)?v++:(b=s,N===0&&F(us));b!==s;)g.push(b),b=e.charAt(v),ne.test(b)?v++:(b=s,N===0&&F(us));return N--,b=s,N===0&&F(Ve),g}if(hs=r(),t.peg$library)return{peg$result:hs,peg$currPos:v,peg$FAILED:s,peg$maxFailExpected:Hs,peg$maxFailPos:Qe};if(hs!==s&&v===e.length)return hs;throw hs!==s&&v<e.length&&F(Qo()),Jo(Hs,Qe<e.length?e.charAt(Qe):null,Qe<e.length?xi(Qe,Qe+1):xi(Qe,Qe))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Zs=0xffffffffffffffffn;function kn(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function rr(e,t){return e*t&Zs}function Xc(e){return function(){let t=BigInt(e&Zs),s=BigInt(e>>64n&Zs);const n=rr(kn(rr(t,5n),7n),9n);return s^=t,t=(kn(t,24n)^s^s<<16n)&Zs,s=kn(s,37n),e=s<<64n|t,n}}const bn=Xc(0xa187eb39cdcaed8f31c4b365b102e01en),Zc=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>bn()))),ef=Array.from({length:8},()=>bn()),tf=Array.from({length:16},()=>bn()),Ln=bn(),xe="w",Ke="b",de="p",Zn="n",en="b",vs="r",St="q",ge="k",Fn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Vs{constructor(t,s){ae(this,"color");ae(this,"from");ae(this,"to");ae(this,"piece");ae(this,"captured");ae(this,"promotion");ae(this,"flags");ae(this,"san");ae(this,"lan");ae(this,"before");ae(this,"after");const{color:n,piece:i,from:r,to:o,flags:l,captured:a,promotion:u}=s,c=ve(r),p=ve(o);this.color=n,this.piece=i,this.from=c,this.to=p,this.san=t._moveToSan(s,t._moves({legal:!0})),this.lan=c+p,this.before=t.fen(),t._makeMove(s),this.after=t.fen(),t._undoMove(),this.flags="";for(const d in q)q[d]&l&&(this.flags+=Dt[d]);a&&(this.captured=a),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(Dt.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Dt.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Dt.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Dt.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Dt.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Dt.BIG_PAWN)>-1}}const be=-1,Dt={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},q={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},ei={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},sf={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},nf={...ei,...sf},j={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Dn={b:[16,32,17,15],w:[-16,-32,-17,-15]},or={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},rf=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],of=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],lf={p:1,n:2,b:4,r:8,q:16,k:32},af="pnbrqkPNBRQK",lr=[Zn,en,vs,St],cf=7,ff=6,uf=1,hf=0,Ws={[ge]:q.KSIDE_CASTLE,[St]:q.QSIDE_CASTLE},vt={w:[{square:j.a1,flag:q.QSIDE_CASTLE},{square:j.h1,flag:q.KSIDE_CASTLE}],b:[{square:j.a8,flag:q.QSIDE_CASTLE},{square:j.h8,flag:q.KSIDE_CASTLE}]},df={b:uf,w:ff},Kn="--";function jt(e){return e>>4}function Ms(e){return e&15}function Mo(e){return"0123456789".indexOf(e)!==-1}function ve(e){const t=Ms(e),s=jt(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(s,s+1)}function gs(e){return e===xe?Ke:xe}function pf(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(t[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=t[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let l=0,a=!1;for(let u=0;u<i[o].length;u++)if(Mo(i[o][u])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(i[o][u],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:l}of r){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function gf(e,t){const s=e.from,n=e.to,i=e.piece;let r=0,o=0,l=0;for(let a=0,u=t.length;a<u;a++){const c=t[a].from,p=t[a].to,d=t[a].piece;i===d&&s!==c&&n===p&&(r++,jt(s)===jt(c)&&o++,Ms(s)===Ms(c)&&l++)}return r>0?o>0&&l>0?ve(s):l>0?ve(s).charAt(1):ve(s).charAt(0):""}function bt(e,t,s,n,i,r=void 0,o=q.NORMAL){const l=jt(n);if(i===de&&(l===cf||l===hf))for(let a=0;a<lr.length;a++){const u=lr[a];e.push({color:t,from:s,to:n,piece:i,captured:r,promotion:u,flags:o|q.PROMOTION})}else e.push({color:t,from:s,to:n,piece:i,captured:r,flags:o})}function ar(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:de:(t=t.toLowerCase(),t==="o"?ge:t)}function Un(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Po{constructor(t=Fn,{skipValidation:s=!1}={}){ae(this,"_board",new Array(128));ae(this,"_turn",xe);ae(this,"_header",{});ae(this,"_kings",{w:be,b:be});ae(this,"_epSquare",-1);ae(this,"_halfMoves",0);ae(this,"_moveNumber",0);ae(this,"_history",[]);ae(this,"_comments",{});ae(this,"_castling",{w:0,b:0});ae(this,"_hash",0n);ae(this,"_positionCount",new Map);this.load(t,{skipValidation:s})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:be,b:be},this._turn=xe,this._castling={w:0,b:0},this._epSquare=be,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...nf},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:s=!1,preserveHeaders:n=!1}={}){let i=t.split(/\s+/);if(i.length>=2&&i.length<6){const l=["-","-","0","1"];t=i.concat(l.slice(-(6-i.length))).join(" ")}if(i=t.split(/\s+/),!s){const{ok:l,error:a}=pf(t);if(!l)throw new Error(a)}const r=i[0];let o=0;this.clear({preserveHeaders:n});for(let l=0;l<r.length;l++){const a=r.charAt(l);if(a==="/")o+=8;else if(Mo(a))o+=parseInt(a,10);else{const u=a<"a"?xe:Ke;this._put({type:a.toLowerCase(),color:u},ve(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=q.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=q.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=q.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=q.QSIDE_CASTLE),this._epSquare=i[3]==="-"?be:j[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var o,l;let s=0,n="";for(let a=j.a8;a<=j.h1;a++){if(this._board[a]){s>0&&(n+=s,s=0);const{color:u,type:c}=this._board[a];n+=u===xe?c.toUpperCase():c.toLowerCase()}else s++;a+1&136&&(s>0&&(n+=s),a!==j.h1&&(n+="/"),s=0,a+=8)}let i="";this._castling[xe]&q.KSIDE_CASTLE&&(i+="K"),this._castling[xe]&q.QSIDE_CASTLE&&(i+="Q"),this._castling[Ke]&q.KSIDE_CASTLE&&(i+="k"),this._castling[Ke]&q.QSIDE_CASTLE&&(i+="q"),i=i||"-";let r="-";if(this._epSquare!==be)if(t)r=ve(this._epSquare);else{const a=this._epSquare+(this._turn===xe?16:-16),u=[a+1,a-1];for(const c of u){if(c&136)continue;const p=this._turn;if(((o=this._board[c])==null?void 0:o.color)===p&&((l=this._board[c])==null?void 0:l.type)===de){this._makeMove({color:p,from:c,to:this._epSquare,piece:de,captured:de,flags:q.EP_CAPTURE});const d=!this._isKingAttacked(p);if(this._undoMove(),d){r=ve(this._epSquare);break}}}}return[n,this._turn,i,r,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:s,type:n}=this._board[t],i={w:0,b:1}[s],r={p:0,n:1,b:2,r:3,q:4,k:5}[n];return Zc[i][r][t]}_epKey(){return this._epSquare===be?0n:ef[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return tf[t]}_computeHash(){let t=0n;for(let s=j.a8;s<=j.h1;s++){if(s&136){s+=7;continue}this._board[s]&&(t^=this._pieceKey(s))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Ln),t}_updateSetup(t){this._history.length>0||(t!==Fn?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Fn)}get(t){return this._board[j[t]]}findPiece(t){var n;const s=[];for(let i=j.a8;i<=j.h1;i++){if(i&136){i+=7;continue}!this._board[i]||((n=this._board[i])==null?void 0:n.color)!==t.color||this._board[i].color===t.color&&this._board[i].type===t.type&&s.push(ve(i))}return s}put({type:t,color:s},n){return this._put({type:t,color:s},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,s){this._hash^=this._pieceKey(t),this._board[t]=s,this._hash^=this._pieceKey(t)}_put({type:t,color:s},n){if(af.indexOf(t.toLowerCase())===-1||!(n in j))return!1;const i=j[n];if(t==ge&&!(this._kings[s]==be||this._kings[s]==i))return!1;const r=this._board[i];return r&&r.type===ge&&(this._kings[r.color]=be),this._set(i,{type:t,color:s}),t===ge&&(this._kings[s]=i),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const s=this.get(t);return this._clear(j[t]),s&&s.type===ge&&(this._kings[s.color]=be),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),s}_updateCastlingRights(){var n,i,r,o,l,a,u,c,p,d,m,_;this._hash^=this._castlingKey();const t=((n=this._board[j.e1])==null?void 0:n.type)===ge&&((i=this._board[j.e1])==null?void 0:i.color)===xe,s=((r=this._board[j.e8])==null?void 0:r.type)===ge&&((o=this._board[j.e8])==null?void 0:o.color)===Ke;(!t||((l=this._board[j.a1])==null?void 0:l.type)!==vs||((a=this._board[j.a1])==null?void 0:a.color)!==xe)&&(this._castling.w&=-65),(!t||((u=this._board[j.h1])==null?void 0:u.type)!==vs||((c=this._board[j.h1])==null?void 0:c.color)!==xe)&&(this._castling.w&=-33),(!s||((p=this._board[j.a8])==null?void 0:p.type)!==vs||((d=this._board[j.a8])==null?void 0:d.color)!==Ke)&&(this._castling.b&=-65),(!s||((m=this._board[j.h8])==null?void 0:m.type)!==vs||((_=this._board[j.h8])==null?void 0:_.color)!==Ke)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var r,o;if(this._epSquare===be)return;const t=this._epSquare+(this._turn===xe?-16:16),s=this._epSquare+(this._turn===xe?16:-16),n=[s+1,s-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((r=this._board[s])==null?void 0:r.color)!==gs(this._turn)||((o=this._board[s])==null?void 0:o.type)!==de){this._hash^=this._epKey(),this._epSquare=be;return}const i=l=>{var a,u;return!(l&136)&&((a=this._board[l])==null?void 0:a.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===de};n.some(i)||(this._hash^=this._epKey(),this._epSquare=be)}_attacked(t,s,n){const i=[];for(let r=j.a8;r<=j.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==t)continue;const o=this._board[r],l=r-s;if(l===0)continue;const a=l+119;if(rf[a]&lf[o.type]){if(o.type===de){if(l>0&&o.color===xe||l<=0&&o.color===Ke)if(n)i.push(ve(r));else return!0;continue}if(o.type==="n"||o.type==="k")if(n){i.push(ve(r));continue}else return!0;const u=of[a];let c=r+u,p=!1;for(;c!==s;){if(this._board[c]!=null){p=!0;break}c+=u}if(!p)if(n){i.push(ve(r));continue}else return!0}}return n?i:!1}attackers(t,s){return s?this._attacked(s,j[t],!0):this._attacked(this._turn,j[t],!0)}_isKingAttacked(t){const s=this._kings[t];return s===-1?!1:this._attacked(gs(t),s)}hash(){return this._hash.toString(16)}isAttacked(t,s){return this._attacked(s,j[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},s=[];let n=0,i=0;for(let r=j.a8;r<=j.h1;r++){if(i=(i+1)%2,r&136){r+=7;continue}const o=this._board[r];o&&(t[o.type]=o.type in t?t[o.type]+1:1,o.type===en&&s.push(i),n++)}if(n===2)return!0;if(n===3&&(t[en]===1||t[Zn]===1))return!0;if(n===t[en]+2){let r=0;const o=s.length;for(let l=0;l<o;l++)r+=s[l];if(r===0||r===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:s=void 0,piece:n=void 0}={}){const i=this._moves({square:s,piece:n});return t?i.map(r=>new Vs(this,r)):i.map(r=>this._moveToSan(r,i))}_moves({legal:t=!0,piece:s=void 0,square:n=void 0}={}){var m;const i=n?n.toLowerCase():void 0,r=s==null?void 0:s.toLowerCase(),o=[],l=this._turn,a=gs(l);let u=j.a8,c=j.h1,p=!1;if(i)if(i in j)u=c=j[i],p=!0;else return[];for(let _=u;_<=c;_++){if(_&136){_+=7;continue}if(!this._board[_]||this._board[_].color===a)continue;const{type:C}=this._board[_];let O;if(C===de){if(r&&r!==C)continue;O=_+Dn[l][0],this._board[O]||(bt(o,l,_,O,de),O=_+Dn[l][1],df[l]===jt(_)&&!this._board[O]&&bt(o,l,_,O,de,void 0,q.BIG_PAWN));for(let I=2;I<4;I++)O=_+Dn[l][I],!(O&136)&&(((m=this._board[O])==null?void 0:m.color)===a?bt(o,l,_,O,de,this._board[O].type,q.CAPTURE):O===this._epSquare&&bt(o,l,_,O,de,de,q.EP_CAPTURE))}else{if(r&&r!==C)continue;for(let I=0,k=or[C].length;I<k;I++){const U=or[C][I];for(O=_;O+=U,!(O&136);){if(!this._board[O])bt(o,l,_,O,C);else{if(this._board[O].color===l)break;bt(o,l,_,O,C,this._board[O].type,q.CAPTURE);break}if(C===Zn||C===ge)break}}}}if((r===void 0||r===ge)&&(!p||c===this._kings[l])){if(this._castling[l]&q.KSIDE_CASTLE){const _=this._kings[l],C=_+2;!this._board[_+1]&&!this._board[C]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,_+1)&&!this._attacked(a,C)&&bt(o,l,this._kings[l],C,ge,void 0,q.KSIDE_CASTLE)}if(this._castling[l]&q.QSIDE_CASTLE){const _=this._kings[l],C=_-2;!this._board[_-1]&&!this._board[_-2]&&!this._board[_-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,_-1)&&!this._attacked(a,C)&&bt(o,l,this._kings[l],C,ge,void 0,q.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return o;const d=[];for(let _=0,C=o.length;_<C;_++)this._makeMove(o[_]),this._isKingAttacked(l)||d.push(o[_]),this._undoMove();return d}move(t,{strict:s=!1}={}){let n=null;if(typeof t=="string")n=this._moveFromSan(t,s);else if(t===null)n=this._moveFromSan(Kn,s);else if(typeof t=="object"){const r=this._moves();for(let o=0,l=r.length;o<l;o++)if(t.from===ve(r[o].from)&&t.to===ve(r[o].to)&&(!("promotion"in r[o])||t.promotion===r[o].promotion)){n=r[o];break}}if(!n)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&n.flags&q.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new Vs(this,n);return this._makeMove(n),this._incPositionCount(),i}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,s){this._hash^=this._pieceKey(t),this._board[s]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(s)}_makeMove(t){var i,r,o,l;const s=this._turn,n=gs(s);if(this._push(t),t.flags&q.NULL_MOVE){s===Ke&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=be;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&q.EP_CAPTURE&&(this._turn===Ke?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:s})),this._board[t.to].type===ge){if(this._kings[s]=t.to,t.flags&q.KSIDE_CASTLE){const a=t.to-1,u=t.to+1;this._movePiece(u,a)}else if(t.flags&q.QSIDE_CASTLE){const a=t.to+1,u=t.to-2;this._movePiece(u,a)}this._castling[s]=0}if(this._castling[s]){for(let a=0,u=vt[s].length;a<u;a++)if(t.from===vt[s][a].square&&this._castling[s]&vt[s][a].flag){this._castling[s]^=vt[s][a].flag;break}}if(this._castling[n]){for(let a=0,u=vt[n].length;a<u;a++)if(t.to===vt[n][a].square&&this._castling[n]&vt[n][a].flag){this._castling[n]^=vt[n][a].flag;break}}if(this._hash^=this._castlingKey(),t.flags&q.BIG_PAWN){let a;s===Ke?a=t.to-16:a=t.to+16,!(t.to-1&136)&&((i=this._board[t.to-1])==null?void 0:i.type)===de&&((r=this._board[t.to-1])==null?void 0:r.color)===n||!(t.to+1&136)&&((o=this._board[t.to+1])==null?void 0:o.type)===de&&((l=this._board[t.to+1])==null?void 0:l.color)===n?(this._epSquare=a,this._hash^=this._epKey()):this._epSquare=be}else this._epSquare=be;t.piece===de?this._halfMoves=0:t.flags&(q.CAPTURE|q.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,s===Ke&&this._moveNumber++,this._turn=n,this._hash^=Ln}undo(){const t=this._hash,s=this._undoMove();if(s){const n=new Vs(this,s);return this._decPositionCount(t),n}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const s=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Ln;const n=this._turn,i=gs(n);if(s.flags&q.NULL_MOVE)return s;if(this._movePiece(s.to,s.from),s.piece&&(this._clear(s.from),this._set(s.from,{type:s.piece,color:n})),s.captured)if(s.flags&q.EP_CAPTURE){let r;n===Ke?r=s.to-16:r=s.to+16,this._set(r,{type:de,color:i})}else this._set(s.to,{type:s.captured,color:i});if(s.flags&(q.KSIDE_CASTLE|q.QSIDE_CASTLE)){let r,o;s.flags&q.KSIDE_CASTLE?(r=s.to+1,o=s.to-1):(r=s.to-2,o=s.to+1),this._movePiece(o,r)}return s}pgn({newline:t=`
`,maxWidth:s=0}={}){const n=[];let i=!1;for(const d in this._header)this._header[d]&&n.push(`[${d} "${this._header[d]}"]`+t),i=!0;i&&this._history.length&&n.push(t);const r=d=>{const m=this._comments[this.fen()];if(typeof m<"u"){const _=d.length>0?" ":"";d=`${d}${_}{${m}}`}return d},o=[];for(;this._history.length>0;)o.push(this._undoMove());const l=[];let a="";for(o.length===0&&l.push(r(""));o.length>0;){a=r(a);const d=o.pop();if(!d)break;if(!this._history.length&&d.color==="b"){const m=`${this._moveNumber}. ...`;a=a?`${a} ${m}`:m}else d.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(d,this._moves({legal:!0})),this._makeMove(d)}if(a.length&&l.push(r(a)),l.push(this._header.Result||"*"),s===0)return n.join("")+l.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},c=function(d,m){for(const _ of m.split(" "))if(_){if(d+_.length>s){for(;u();)d--;n.push(t),d=0}n.push(_),d+=_.length,n.push(" "),d++}return u()&&d--,d};let p=0;for(let d=0;d<l.length;d++){if(p+l[d].length>s&&l[d].includes("{")){p=c(p,l[d]);continue}p+l[d].length>s&&d!==0?(n[n.length-1]===" "&&n.pop(),n.push(t),p=0):d!==0&&(n.push(" "),p++),n.push(l[d]),p+=l[d].length}return n.join("")}header(...t){for(let s=0;s<t.length;s+=2)typeof t[s]=="string"&&typeof t[s+1]=="string"&&(this._header[t[s]]=t[s+1]);return this._header}setHeader(t,s){return this._header[t]=s??ei[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=ei[t]||null,!0):!1}getHeaders(){const t={};for(const[s,n]of Object.entries(this._header))n!==null&&(t[s]=n);return t}loadPgn(t,{strict:s=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(t=t.replace(new RegExp(n,"g"),`
`));const i=zc(t);this.reset();const r=i.headers;let o="";for(const u in r)u.toLowerCase()==="fen"&&(o=r[u]),this.header(u,r[u]);if(!s)o&&this.load(o,{preserveHeaders:!0});else if(r.SetUp==="1"){if(!("FEN"in r))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(r.FEN,{preserveHeaders:!0})}let l=i.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,s);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const a=i.result;a&&Object.keys(this._header).length&&this._header.Result!==a&&this.setHeader("Result",a)}_moveToSan(t,s){let n="";if(t.flags&q.KSIDE_CASTLE)n="O-O";else if(t.flags&q.QSIDE_CASTLE)n="O-O-O";else{if(t.flags&q.NULL_MOVE)return Kn;if(t.piece!==de){const i=gf(t,s);n+=t.piece.toUpperCase()+i}t.flags&(q.CAPTURE|q.EP_CAPTURE)&&(t.piece===de&&(n+=ve(t.from)[0]),n+="x"),n+=ve(t.to),t.promotion&&(n+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(t,s=!1){let n=Un(t);if(s||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Kn)return{color:this._turn,from:0,to:0,piece:"k",flags:q.NULL_MOVE};let i=ar(n),r=this._moves({legal:!0,piece:i});for(let d=0,m=r.length;d<m;d++)if(n===Un(this._moveToSan(r[d],r)))return r[d];if(s)return null;let o,l,a,u,c,p=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(o=l[1],a=l[2],u=l[3],c=l[4],a.length==1&&(p=!0)):(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(o=l[1],a=l[2],u=l[3],c=l[4],a.length==1&&(p=!0))),i=ar(n),r=this._moves({legal:!0,piece:o||i}),!u)return null;for(let d=0,m=r.length;d<m;d++)if(a){if((!o||o.toLowerCase()==r[d].piece)&&j[a]==r[d].from&&j[u]==r[d].to&&(!c||c.toLowerCase()==r[d].promotion))return r[d];if(p){const _=ve(r[d].from);if((!o||o.toLowerCase()==r[d].piece)&&j[u]==r[d].to&&(a==_[0]||a==_[1])&&(!c||c.toLowerCase()==r[d].promotion))return r[d]}}else if(n===Un(this._moveToSan(r[d],r)).replace("x",""))return r[d];return null}ascii(){let t=`   +------------------------+
`;for(let s=j.a8;s<=j.h1;s++){if(Ms(s)===0&&(t+=" "+"87654321"[jt(s)]+" |"),this._board[s]){const n=this._board[s].type,r=this._board[s].color===xe?n.toUpperCase():n.toLowerCase();t+=" "+r+" "}else t+=" . ";s+1&136&&(t+=`|
`,s+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const s=this._moves({legal:!1});let n=0;const i=this._turn;for(let r=0,o=s.length;r<o;r++)this._makeMove(s[r]),this._isKingAttacked(i)||(t-1>0?n+=this.perft(t-1):n++),this._undoMove();return n}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let s=[];for(let n=j.a8;n<=j.h1;n++)this._board[n]==null?s.push(null):s.push({square:ve(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(t.push(s),s=[],n+=8);return t}squareColor(t){if(t in j){const s=j[t];return(jt(s)+Ms(s))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const s=[],n=[];for(;this._history.length>0;)s.push(this._undoMove());for(;;){const i=s.pop();if(!i)break;t?n.push(new Vs(this,i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const s=this._positionCount.get(t)??0;s===1?this._positionCount.delete(t):this._positionCount.set(t,s-1)}_pruneComments(){const t=[],s={},n=i=>{i in this._comments&&(s[i]=this._comments[i])};for(;this._history.length>0;)t.push(this._undoMove());for(n(this.fen());;){const i=t.pop();if(!i)break;this._makeMove(i),n(this.fen())}this._comments=s}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const s=this._comments[t];return delete this._comments[t],{fen:t,comment:s}})}setCastlingRights(t,s){for(const i of[ge,St])s[i]!==void 0&&(s[i]?this._castling[t]|=Ws[i]:this._castling[t]&=~Ws[i]);this._updateCastlingRights();const n=this.getCastlingRights(t);return(s[ge]===void 0||s[ge]===n[ge])&&(s[St]===void 0||s[St]===n[St])}getCastlingRights(t){return{[ge]:(this._castling[t]&Ws[ge])!==0,[St]:(this._castling[t]&Ws[St])!==0}}moveNumber(){return this._moveNumber}}function _f(){const e=new Po,t=ue(e.fen()),s=ue(e.turn()),n=ue(e.isGameOver()),i=ue(e.isCheckmate()),r=ue(e.isDraw()),o=ue(e.history()),l=zn(()=>(t.value,e.board())),a=ue({w:[],b:[]}),u=ue(!1),c=()=>{t.value=e.fen(),s.value=e.turn(),n.value=e.isGameOver(),i.value=e.isCheckmate(),r.value=e.isDraw(),o.value=e.history();const I=e.history({verbose:!0}),k={w:[],b:[]};for(const U of I)U.captured&&(U.color==="w"?k.w.push(U.captured):k.b.push(U.captured));a.value=k},p=()=>{e.reset(),c()},d=()=>{u.value=!u.value},m=I=>{if(u.value)return;const k=new Audio;switch(I){case"move":k.src="/move-self.mp3";break;case"capture":k.src="/capture.mp3";break;case"notify":k.src="/notify.mp3";break}k.play().catch(U=>console.error("Audio play failed:",U))},_=I=>{try{if(typeof I=="string"&&/^[a-h][1-8][a-h][1-8][qrbn]?$/.test(I)){const U={from:I.substring(0,2),to:I.substring(2,4),promotion:I.substring(4)||void 0},$=e.move(U);if($)return c(),e.inCheck()||e.isGameOver()?m("notify"):$.captured?m("capture"):m("move"),$}const k=e.move(I);if(k)return c(),e.inCheck()||e.isGameOver()?m("notify"):k.captured?m("capture"):m("move"),k}catch{return null}return null},C=I=>e.moves({square:I,verbose:!0}),O=()=>e.moves();return{chess:e,fen:t,turn:s,isGameOver:n,isCheckmate:i,isDraw:r,history:o,board:l,boardState:zn(()=>(t.value,e.board())),makeMove:_,resetGame:p,getLegalMoves:C,getLegalMovesSAN:O,capturedPieces:a,isMuted:u,toggleMute:d}}const mf={"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1":"e2e4","rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1":"e7e5","rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1":"g1f3","rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 1":"b8c6","r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 2":"f1b5","rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1":"g1f3"},vf=e=>mf[e]||null;var cr;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(cr||(cr={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(fr||(fr={}));var ur;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ur||(ur={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=["user","model","function","system"];var Xt;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Xt||(Xt={}));var Zt;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Zt||(Zt={}));var dr;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(dr||(dr={}));var pr;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(pr||(pr={}));var As;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(As||(As={}));var gr;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(gr||(gr={}));var _r;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(_r||(_r={}));var mr;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(mr||(mr={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Jt extends Ae{constructor(t,s){super(t),this.response=s}}class $o extends Ae{constructor(t,s,n,i){super(t),this.status=s,this.statusText=n,this.errorDetails=i}}class Ot extends Ae{}class ko extends Ae{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="https://generativelanguage.googleapis.com",yf="v1beta",Ef="0.24.1",Cf="genai-js";var Bt;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Bt||(Bt={}));class Sf{constructor(t,s,n,i,r){this.model=t,this.task=s,this.apiKey=n,this.stream=i,this.requestOptions=r}toString(){var t,s;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||yf;let r=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||bf}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function xf(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Cf}/${Ef}`),t.join(" ")}async function wf(e){var t;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",xf(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new Ot(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,r]of n.entries()){if(i==="x-goog-api-key")throw new Ot(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Ot(`Header name ${i} can only be set using the apiClient field`);s.append(i,r)}}return s}async function Af(e,t,s,n,i,r){const o=new Sf(e,t,s,n,r);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},Rf(r)),{method:"POST",headers:await wf(o),body:i})}}async function Fs(e,t,s,n,i,r={},o=fetch){const{url:l,fetchOptions:a}=await Af(e,t,s,n,i,r);return Of(l,a,o)}async function Of(e,t,s=fetch){let n;try{n=await s(e,t)}catch(i){Tf(i,e)}return n.ok||await If(n,e),n}function Tf(e,t){let s=e;throw s.name==="AbortError"?(s=new ko(`Request aborted when fetching ${t.toString()}: ${e.message}`),s.stack=e.stack):e instanceof $o||e instanceof Ot||(s=new Ae(`Error fetching from ${t.toString()}: ${e.message}`),s.stack=e.stack),s}async function If(e,t){let s="",n;try{const i=await e.json();s=i.error.message,i.error.details&&(s+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new $o(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,n)}function Rf(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const s=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),tn(e.candidates[0]))throw new Jt(`${xt(e)}`,e);return Nf(e)}else if(e.promptFeedback)throw new Jt(`Text not available. ${xt(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),tn(e.candidates[0]))throw new Jt(`${xt(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vr(e)[0]}else if(e.promptFeedback)throw new Jt(`Function call not available. ${xt(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),tn(e.candidates[0]))throw new Jt(`${xt(e)}`,e);return vr(e)}else if(e.promptFeedback)throw new Jt(`Function call not available. ${xt(e)}`,e)},e}function Nf(e){var t,s,n,i;const r=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.text&&r.push(o.text),o.executableCode&&r.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&r.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function vr(e){var t,s,n,i;const r=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&r.push(o.functionCall);if(r.length>0)return r}const Mf=[As.RECITATION,As.SAFETY,As.LANGUAGE];function tn(e){return!!e.finishReason&&Mf.includes(e.finishReason)}function xt(e){var t,s,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const r=e.candidates[0];tn(r)&&(i+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(i+=`: ${r.finishMessage}`))}return i}function Ps(e){return this instanceof Ps?(this.v=e,this):new Ps(e)}function Pf(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s.apply(e,t||[]),i,r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(m){return new Promise(function(_,C){r.push([d,m,_,C])>1||l(d,m)})})}function l(d,m){try{a(n[d](m))}catch(_){p(r[0][3],_)}}function a(d){d.value instanceof Ps?Promise.resolve(d.value.v).then(u,c):p(r[0][2],d)}function u(d){l("next",d)}function c(d){l("throw",d)}function p(d,m){d(m),r.shift(),r.length&&l(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function $f(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=Ff(t),[n,i]=s.tee();return{stream:Lf(n),response:kf(i)}}async function kf(e){const t=[],s=e.getReader();for(;;){const{done:n,value:i}=await s.read();if(n)return Ei(Df(t));t.push(i)}}function Lf(e){return Pf(this,arguments,function*(){const s=e.getReader();for(;;){const{value:n,done:i}=yield Ps(s.read());if(i)break;yield yield Ps(Ei(n))}})}function Ff(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return r();function r(){return t.read().then(({value:o,done:l})=>{if(l){if(i.trim()){n.error(new Ae("Failed to parse stream"));return}n.close();return}i+=o;let a=i.match(br),u;for(;a;){try{u=JSON.parse(a[1])}catch{n.error(new Ae(`Error parsing JSON response: "${a[1]}"`));return}n.enqueue(u),i=i.substring(a[0].length),a=i.match(br)}return r()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new ko("Request aborted when reading from the stream"):l=new Ae("Error reading from the stream"),l})}}})}function Df(e){const t=e[e.length-1],s={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const r of n.candidates)if(s.candidates||(s.candidates=[]),s.candidates[i]||(s.candidates[i]={index:i}),s.candidates[i].citationMetadata=r.citationMetadata,s.candidates[i].groundingMetadata=r.groundingMetadata,s.candidates[i].finishReason=r.finishReason,s.candidates[i].finishMessage=r.finishMessage,s.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){s.candidates[i].content||(s.candidates[i].content={role:r.content.role||"user",parts:[]});const o={};for(const l of r.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),s.candidates[i].content.parts.push(o)}i++}n.usageMetadata&&(s.usageMetadata=n.usageMetadata)}return s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(e,t,s,n){const i=await Fs(t,Bt.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),n);return $f(i)}async function Fo(e,t,s,n){const r=await(await Fs(t,Bt.GENERATE_CONTENT,e,!1,JSON.stringify(s),n)).json();return{response:Ei(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function $s(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const s of e)typeof s=="string"?t.push({text:s}):t.push(s);return Kf(t)}function Kf(e){const t={role:"user",parts:[]},s={role:"function",parts:[]};let n=!1,i=!1;for(const r of e)"functionResponse"in r?(s.parts.push(r),i=!0):(t.parts.push(r),n=!0);if(n&&i)throw new Ae("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new Ae("No content is provided for sending chat message.");return n?t:s}function Uf(e,t){var s;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(s=t==null?void 0:t.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new Ot("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const r=$s(e);n.contents=[r]}return{generateContentRequest:n}}function yr(e){let t;return e.contents?t=e:t={contents:[$s(e)]},e.systemInstruction&&(t.systemInstruction=Do(e.systemInstruction)),t}function Hf(e){return typeof e=="string"||Array.isArray(e)?{content:$s(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],jf={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Bf(e){let t=!1;for(const s of e){const{role:n,parts:i}=s;if(!t&&n!=="user")throw new Ae(`First content should be with role 'user', got ${n}`);if(!hr.includes(n))throw new Ae(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(hr)}`);if(!Array.isArray(i))throw new Ae("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Ae("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of i)for(const a of Er)a in l&&(r[a]+=1);const o=jf[n];for(const l of Er)if(!o.includes(l)&&r[l]>0)throw new Ae(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function Cr(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const s=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(s===void 0||s.parts===void 0||s.parts.length===0)return!1;for(const n of s.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SILENT_ERROR";class Gf{constructor(t,s,n,i={}){this.model=s,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Bf(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,s={}){var n,i,r,o,l,a;await this._sendPromise;const u=$s(t),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(a=this.params)===null||a===void 0?void 0:a.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),s);let d;return this._sendPromise=this._sendPromise.then(()=>Fo(this._apiKey,this.model,c,p)).then(m=>{var _;if(Cr(m.response)){this._history.push(u);const C=Object.assign({parts:[],role:"model"},(_=m.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(C)}else{const C=xt(m.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}d=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,d}async sendMessageStream(t,s={}){var n,i,r,o,l,a;await this._sendPromise;const u=$s(t),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(a=this.params)===null||a===void 0?void 0:a.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),s),d=Lo(this._apiKey,this.model,c,p);return this._sendPromise=this._sendPromise.then(()=>d).catch(m=>{throw new Error(Sr)}).then(m=>m.response).then(m=>{if(Cr(m)){this._history.push(u);const _=Object.assign({},m.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=xt(m);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(m=>{m.message!==Sr&&console.error(m)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(e,t,s,n){return(await Fs(t,Bt.COUNT_TOKENS,e,!1,JSON.stringify(s),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(e,t,s,n){return(await Fs(t,Bt.EMBED_CONTENT,e,!1,JSON.stringify(s),n)).json()}async function Wf(e,t,s,n){const i=s.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await Fs(t,Bt.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t,s,n={}){this.apiKey=t,this._requestOptions=n,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=Do(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(t,s={}){var n;const i=yr(t),r=Object.assign(Object.assign({},this._requestOptions),s);return Fo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),r)}async generateContentStream(t,s={}){var n;const i=yr(t),r=Object.assign(Object.assign({},this._requestOptions),s);return Lo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),r)}startChat(t){var s;return new Gf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},t),this._requestOptions)}async countTokens(t,s={}){const n=Uf(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),s);return qf(this.apiKey,this.model,n,i)}async embedContent(t,s={}){const n=Hf(t),i=Object.assign(Object.assign({},this._requestOptions),s);return Vf(this.apiKey,this.model,n,i)}async batchEmbedContents(t,s={}){const n=Object.assign(Object.assign({},this._requestOptions),s);return Wf(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(t){this.apiKey=t}getGenerativeModel(t,s){if(!t.model)throw new Ae("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new xr(this.apiKey,t,s)}getGenerativeModelFromCachedContent(t,s,n){if(!t.name)throw new Ot("Cached content must contain a `name` field.");if(!t.model)throw new Ot("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(s!=null&&s[o]&&t[o]&&(s==null?void 0:s[o])!==t[o]){if(o==="model"){const l=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===a)continue}throw new Ot(`Different value for "${o}" specified in modelParams (${s[o]}) and cachedContent (${t[o]})`)}const r=Object.assign(Object.assign({},s),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new xr(this.apiKey,r,n)}}const Qf={VITE_GEMINI_API_KEY:"AIzaSyC7t1vBQCrRqMsXRyp35cFg9fyQO5Ump-c"},_s=Qf,sn=[_s.VITE_GEMINI_API_KEY,_s.VITE_GEMINI_API_KEY_2,_s.VITE_GEMINI_API_KEY_3,_s.VITE_GEMINI_API_KEY_4,_s.VITE_GEMINI_API_KEY_5].filter(e=>!!e),Jf=sn.map(e=>new Yf(e)),zf=Jf.map(e=>e.getGenerativeModel({model:"gemini-3-flash-preview",safetySettings:[{category:Xt.HARM_CATEGORY_HARASSMENT,threshold:Zt.BLOCK_NONE},{category:Xt.HARM_CATEGORY_HATE_SPEECH,threshold:Zt.BLOCK_NONE},{category:Xt.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Zt.BLOCK_NONE},{category:Xt.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Zt.BLOCK_NONE}]}));let Ys=0;function Xf(){const e=ue(!1),t=ue(""),s=ue(""),n=ue(null),i=ue(0),r=4e3,o=()=>sn.length<=1?!1:(Ys=(Ys+1)%sn.length,console.warn(`Switching to API Key #${Ys+1}`),!0);return{isThinking:e,aiThought:t,aiTaunt:s,error:n,getBestMove:async(a,u=[])=>{if(sn.length===0)return n.value="Missing Gemini API Keys",null;e.value=!0,n.value=null,t.value="";const p=Date.now()-i.value;if(p<r){const _=r-p;await new Promise(C=>setTimeout(C,_))}i.value=Date.now();const d=`
You are a Grandmaster chess engine playing Black.
Current board state (FEN): "${a}"
Valid moves: ${JSON.stringify(u)}

Analyze the position deeply. Identify threats, hanging pieces, and tactical opportunities.
Return ONLY a strictly valid JSON object. Do NOT use markdown code blocks.
Format:
{
  "move": "e2e4", 
  "thought": "Brief strategic reasoning in Vietnamese",
  "taunt": "A short, witty taunt in Vietnamese"
}
Key requirement: The 'move' MUST be in UCI format (e.g., e7e5, g8f6) and MUST be one of the valid moves provided.
`.trim(),m=async(_,C=3,O=1e3)=>{try{return(await(await zf[Ys].generateContent(_)).response).text()}catch(I){if(I.message.includes("503")||I.message.includes("429")){if(console.warn(`Gemini API Error (${I.message}).`),o())return console.warn("Retrying with new key immediately..."),m(_,C,O);if(C>0)return console.warn(`Retrying in ${O}ms... (${C} retries left)`),await new Promise(k=>setTimeout(k,O)),m(_,C-1,O*2)}throw I}};try{const _=await m(d);if(console.log("Gemini Raw Response:",_),!_||!_.trim())throw console.warn("Gemini returned empty text."),new Error("Empty response from AI (likely safety block or 503)");const C=_.match(/\{[\s\S]*\}/);let O=_;C?O=C[0]:O=_.replace(/```json/g,"").replace(/```/g,"").trim();const I=JSON.parse(O);return t.value=I.thought,s.value=I.taunt,{move:I.move,thought:I.thought,taunt:I.taunt}}catch(_){throw console.error("Gemini AI Error:",_),new Error(_.message||"Gemini API Failed")}finally{e.value=!1}}}}const Qs={check:["Chiu n cng! Chy i u?","Vua ca bn ang gp nguy, lo m  i!","ng hng thot, chiu tng!","Cn thn ci u ca Vua nh!"],capture:["n n! Qun ny ngon qu.","Cm n v mn qu nh!","i qun li ri!","Sai lm t gi y, mnh xin con ny."],normal:["Nc ny bn tnh bao lu ri?"," xem bn  nc ny th no.","C b d tt ?","Bn nh cng c y, nhng cha  trnh u.","Nc i th v, nhng mnh  tnh trc ri.","Cn thn y, mnh ang gi by ."],switch_mode:['Mng lag qu, ti bt "God Mode" (Stockfish) y!',"Gemini i ngh mt ri, gi bn s u vi trm cui Stockfish!",'Ht quota API ri,  mnh dng thut ton "bn hnh" cho bn.']};function Zf(e){const t=ue(!1),s=ue(""),n=ue("idle"),{getBestMove:i}=Xf(),r=new Worker("/stockfish/stockfish.js"),o=c=>c[Math.floor(Math.random()*c.length)],l=(c,p)=>{const d=new Po(c.fen());try{const m=p.substring(0,2),_=p.substring(2,4),C=p.substring(4)||void 0,O=d.move({from:m,to:_,promotion:C||"q"});return O?d.isCheckmate()?"Chiu ht! Game over!":d.isCheck()?o(Qs.check):O.captured?o(Qs.capture):o(Qs.normal):"Nc i li ri!"}catch{return"Thinking..."}},a=c=>new Promise(p=>{r.postMessage(`position fen ${c}`),r.postMessage("go depth 10"),r.onmessage=d=>{const m=d.data;if(m&&m.startsWith("bestmove")){const _=m.split(" ")[1];p(_)}}});return{getBestMove:async(c,p)=>{n.value="thinking";try{const d=vf(c);if(d)return await new Promise(C=>setTimeout(C,800)),{move:d,thought:"Opening Book Move",taunt:"Khai cuc bi bn y!",source:"book"};if(!t.value)try{const C=await i(c,p);if(C)return{move:C.move,thought:C.thought||"Analyzing...",taunt:C.taunt||"...",source:"gemini"}}catch(C){console.warn("Gemini Failed, switching to Stockfish...",C),t.value=!0,s.value=o(Qs.switch_mode)}const m=await a(c),_=l(e,m);return{move:m,thought:"Stockfish Engine Calculation (Depth 10)",taunt:t.value?_+" (Fallback Mode)":_,source:"stockfish"}}finally{n.value="idle"}},isGeminiDead:t,aiStatus:n}}const eu={class:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 md:p-8 font-sans"},tu={class:"w-full max-w-6xl flex flex-col md:flex-row items-center justify-between mb-8 gap-4"},su={class:"flex items-center gap-4"},nu={class:"px-3 py-1 rounded-full text-xs font-mono bg-gray-800 text-gray-400 border border-gray-700 flex items-center gap-2"},iu={key:0,class:"w-2 h-2 rounded-full bg-red-500 animate-pulse"},ru={key:1,class:"w-2 h-2 rounded-full bg-emerald-500"},ou={class:"flex items-center gap-3"},lu=["title"],au={class:"material-symbols-outlined text-xl"},cu={class:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-3 gap-8"},fu={class:"lg:col-span-2 flex flex-col items-center"},uu={class:"w-full max-w-[600px] flex items-center gap-1 h-8 mb-2 px-2"},hu=["src"],du={class:"relative w-full max-w-[600px]"},pu={key:0,class:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-sm"},gu={class:"bg-gray-800 p-8 rounded-xl border border-gray-700 shadow-2xl text-center transform scale-110"},_u={class:"text-3xl font-bold text-white mb-2"},mu={class:"text-gray-400 mb-6"},vu={class:"w-full max-w-[600px] flex items-center gap-1 h-8 mt-2 px-2"},bu=["src"],yu={class:"flex flex-col gap-6 h-auto lg:h-[600px]"},Eu={class:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50 backdrop-blur-sm shadow-xl"},Cu={class:"flex items-center justify-between mb-4"},Su={class:"flex items-center gap-2"},xu={class:"text-sm font-medium text-white"},wu={key:0,class:"flex flex-col items-center justify-center py-8 space-y-3"},Au={class:"text-gray-300 text-sm animate-pulse"},Ou={key:1,class:"space-y-4"},Tu={key:1,class:"bg-gray-900/50 p-4 rounded-xl border-l-4 border-blue-500"},Iu={class:"text-gray-300 text-sm leading-relaxed"},Ru={key:2,class:"text-center py-8 text-gray-500 text-sm"},Nu={class:"flex-1 bg-gray-800/30 rounded-2xl p-6 border border-gray-700/30 overflow-hidden flex flex-col min-h-[200px]"},Mu={class:"overflow-y-auto flex-1 pr-2 space-y-1 scrollbar-thin scrollbar-thumb-gray-700"},Pu={class:"w-8 text-gray-500"},$u=_i({__name:"App",setup(e){const{chess:t,board:s,turn:n,isGameOver:i,isCheckmate:r,fen:o,history:l,makeMove:a,resetGame:u,getLegalMoves:c,getLegalMovesSAN:p,capturedPieces:d,isMuted:m,toggleMute:_}=_f(),{getBestMove:C,isGeminiDead:O,aiStatus:I}=Zf(t),k=ue(null),U=ue(""),$=ue(""),oe=async Re=>{if(i.value||n.value!=="w")return;a(Re)&&(k.value=Re,i.value||await De())},De=async()=>{if(i.value)return;const Re=p();O.value?($.value="Stockfish is calculating...",U.value=""):($.value="",U.value="Gemini is thinking...");const Q=await C(o.value,Re);if(Q){U.value=Q.thought,$.value=Q.taunt;const he=a(Q.move);he&&(k.value={from:he.from,to:he.to})}},Te=()=>{u(),k.value=null,U.value="",$.value=""},Ie=(Re,Q)=>`/${Q}${Re.toUpperCase()}.svg`;return(Re,Q)=>(se(),le("div",eu,[G("header",tu,[G("div",su,[Q[1]||(Q[1]=G("h1",{class:"text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-500"}," Chess w/ Gemini ",-1)),G("span",nu,[To(" Model: "+He(ce(O)?"Stockfish (Fallback)":"Gemini 3 Flash")+" ",1),ce(O)?(se(),le("span",iu)):(se(),le("span",ru))])]),G("div",ou,[G("button",{onClick:Q[0]||(Q[0]=(...he)=>ce(_)&&ce(_)(...he)),class:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors border border-gray-700",title:ce(m)?"Unmute":"Mute"},[G("span",au,He(ce(m)?"volume_off":"volume_up"),1)],8,lu),G("button",{onClick:Te,class:"px-6 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-white font-medium transition-colors border border-gray-700 flex items-center gap-2"},[...Q[2]||(Q[2]=[G("span",null,"Reset Game",-1)])])])]),G("main",cu,[G("div",fu,[G("div",uu,[(se(!0),le(ye,null,ns(ce(d).b,(he,Ne)=>(se(),le("div",{key:Ne,class:"w-6 opacity-80"},[G("img",{src:Ie(he,"w"),class:"w-full"},null,8,hu)]))),128))]),G("div",du,[rt(qc,{board:ce(s),turn:ce(n),"last-move":k.value,"legal-moves":ce(p)(),"get-legal-moves":ce(c),onMove:oe},null,8,["board","turn","last-move","legal-moves","get-legal-moves"]),ce(i)?(se(),le("div",pu,[G("div",gu,[G("h2",_u,He(ce(r)?ce(n)==="w"?"Black Wins!":"White Wins!":"Draw!"),1),G("p",mu,He(ce(r)?"Checkmate":"Stalemate / Draw"),1),G("button",{onClick:Te,class:"px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-bold transition-all"}," Play Again ")])])):dt("",!0)]),G("div",vu,[(se(!0),le(ye,null,ns(ce(d).w,(he,Ne)=>(se(),le("div",{key:Ne,class:"w-6 opacity-80"},[G("img",{src:Ie(he,"b"),class:"w-full"},null,8,bu)]))),128))])]),G("div",yu,[G("div",Eu,[G("div",Cu,[Q[3]||(Q[3]=G("h3",{class:"text-gray-400 uppercase text-xs font-bold tracking-wider"},"Opponent",-1)),G("span",Su,[G("div",{class:st(["w-2 h-2 rounded-full",ce(I)==="thinking"?"bg-yellow-400 animate-pulse":"bg-emerald-400"])},null,2),G("span",xu,He(ce(O)?"Stockfish Engine":"Gemini AI"),1)])]),ce(I)==="thinking"?(se(),le("div",wu,[Q[4]||(Q[4]=G("span",{class:"material-symbols-outlined text-5xl animate-gemini bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-red-400 pb-2 selection:bg-none select-none"}," magic_button ",-1)),G("p",Au,He(ce(O)?"Stockfish is calculating...":"Gemini is thinking..."),1)])):(se(),le("div",Ou,[$.value?(se(),le("div",{key:0,class:st(["bg-gray-900/50 p-4 rounded-xl border-l-4",ce(O)?"border-orange-500":"border-purple-500"])},[G("p",{class:st(["text-sm italic",ce(O)?"text-orange-200":"text-purple-200"])},' "'+He($.value)+'" ',3)],2)):dt("",!0),U.value?(se(),le("div",Tu,[Q[5]||(Q[5]=G("h4",{class:"text-blue-400 text-xs font-bold mb-1 uppercase"},"Analysis",-1)),G("p",Iu,He(U.value),1)])):dt("",!0),!$.value&&!U.value?(se(),le("div",Ru," Make your move to start the game. ")):dt("",!0)]))]),G("div",Nu,[Q[6]||(Q[6]=G("h3",{class:"text-gray-400 uppercase text-xs font-bold tracking-wider mb-4"},"Move History",-1)),G("div",Mu,[(se(!0),le(ye,null,ns(ce(l),(he,Ne)=>(se(),le("div",{key:Ne,class:"flex text-sm border-b border-gray-800 py-1"},[G("span",Pu,He(Math.floor(Ne/2)+1)+".",1),G("span",{class:st(Ne%2===0?"text-white":"text-gray-400")},He(he),3)]))),128))])])])])]))}});Tc($u).mount("#app");
