var el=Object.defineProperty;var tl=(e,t,s)=>t in e?el(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var re=(e,t,s)=>tl(e,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ie={},Xt=[],et=()=>{},yr=()=>!1,sn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jn=e=>e.startsWith("onUpdate:"),ve=Object.assign,zn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},sl=Object.prototype.hasOwnProperty,z=(e,t)=>sl.call(e,t),B=Array.isArray,Zt=e=>nn(e)==="[object Map]",Er=e=>nn(e)==="[object Set]",q=e=>typeof e=="function",ce=e=>typeof e=="string",Tt=e=>typeof e=="symbol",oe=e=>e!==null&&typeof e=="object",Cr=e=>(oe(e)||q(e))&&q(e.then)&&q(e.catch),Sr=Object.prototype.toString,nn=e=>Sr.call(e),nl=e=>nn(e).slice(8,-1),xr=e=>nn(e)==="[object Object]",Xn=e=>ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=Qn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},il=/-\w/g,wt=rn(e=>e.replace(il,t=>t.slice(1).toUpperCase())),rl=/\B([A-Z])/g,Gt=rn(e=>e.replace(rl,"-$1").toLowerCase()),Ar=rn(e=>e.charAt(0).toUpperCase()+e.slice(1)),gn=rn(e=>e?`on${Ar(e)}`:""),St=(e,t)=>!Object.is(e,t),_n=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},wr=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},ol=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let xi;const on=()=>xi||(xi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zn(e){if(B(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=ce(n)?fl(n):Zn(n);if(i)for(const r in i)t[r]=i[r]}return t}else if(ce(e)||oe(e))return e}const ll=/;(?![^(]*\))/g,al=/:([^]+)/,cl=/\/\*[^]*?\*\//g;function fl(e){const t={};return e.replace(cl,"").split(ll).forEach(s=>{if(s){const n=s.split(al);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function xt(e){let t="";if(ce(e))t=e;else if(B(e))for(let s=0;s<e.length;s++){const n=xt(e[s]);n&&(t+=n+" ")}else if(oe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ul="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hl=Qn(ul);function Or(e){return!!e||e===""}const Tr=e=>!!(e&&e.__v_isRef===!0),ze=e=>ce(e)?e:e==null?"":B(e)||oe(e)&&(e.toString===Sr||!q(e.toString))?Tr(e)?ze(e.value):JSON.stringify(e,Ir,2):String(e),Ir=(e,t)=>Tr(t)?Ir(e,t.value):Zt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],r)=>(s[mn(n,r)+" =>"]=i,s),{})}:Er(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>mn(s))}:Tt(t)?mn(t):oe(t)&&!B(t)&&!xr(t)?String(t):t,mn=(e,t="")=>{var s;return Tt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ne;class dl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ne,!t&&Ne&&(this.index=(Ne.scopes||(Ne.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Ne;try{return Ne=this,t()}finally{Ne=s}}}on(){++this._on===1&&(this.prevScope=Ne,Ne=this)}off(){this._on>0&&--this._on===0&&(Ne=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function pl(){return Ne}let ne;const vn=new WeakSet;class Rr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ne&&Ne.active&&Ne.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vn.has(this)&&(vn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ai(this),$r(this);const t=ne,s=Ve;ne=this,Ve=!0;try{return this.fn()}finally{Pr(this),ne=t,Ve=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)si(t);this.deps=this.depsTail=void 0,Ai(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pn(this)&&this.run()}get dirty(){return Pn(this)}}let Nr=0,_s,ms;function Mr(e,t=!1){if(e.flags|=8,t){e.next=ms,ms=e;return}e.next=_s,_s=e}function ei(){Nr++}function ti(){if(--Nr>0)return;if(ms){let t=ms;for(ms=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function $r(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pr(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),si(n),gl(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function Pn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Lr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Lr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ss)||(e.globalVersion=Ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Pn(e))))return;e.flags|=2;const t=e.dep,s=ne,n=Ve;ne=e,Ve=!0;try{$r(e);const i=e.fn(e._value);(t.version===0||St(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ne=s,Ve=n,Pr(e),e.flags&=-3}}function si(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)si(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function gl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ve=!0;const Fr=[];function ft(){Fr.push(Ve),Ve=!1}function ut(){const e=Fr.pop();Ve=e===void 0?!0:e}function Ai(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ne;ne=void 0;try{t()}finally{ne=s}}}let Ss=0;class _l{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ni{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ne||!Ve||ne===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ne)s=this.activeLink=new _l(ne,this),ne.deps?(s.prevDep=ne.depsTail,ne.depsTail.nextDep=s,ne.depsTail=s):ne.deps=ne.depsTail=s,Dr(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ne.depsTail,s.nextDep=void 0,ne.depsTail.nextDep=s,ne.depsTail=s,ne.deps===s&&(ne.deps=n)}return s}trigger(t){this.version++,Ss++,this.notify(t)}notify(t){ei();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ti()}}}function Dr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Dr(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ln=new WeakMap,Ut=Symbol(""),Fn=Symbol(""),xs=Symbol("");function Se(e,t,s){if(Ve&&ne){let n=Ln.get(e);n||Ln.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new ni),i.map=n,i.key=s),i.track()}}function at(e,t,s,n,i,r){const o=Ln.get(e);if(!o){Ss++;return}const l=a=>{a&&a.trigger()};if(ei(),t==="clear")o.forEach(l);else{const a=B(e),u=a&&Xn(s);if(a&&s==="length"){const c=Number(n);o.forEach((p,h)=>{(h==="length"||h===xs||!Tt(h)&&h>=c)&&l(p)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),u&&l(o.get(xs)),t){case"add":a?u&&l(o.get("length")):(l(o.get(Ut)),Zt(e)&&l(o.get(Fn)));break;case"delete":a||(l(o.get(Ut)),Zt(e)&&l(o.get(Fn)));break;case"set":Zt(e)&&l(o.get(Ut));break}}ti()}function Qt(e){const t=J(e);return t===e?t:(Se(t,"iterate",xs),Ge(e)?t:t.map(We))}function ln(e){return Se(e=J(e),"iterate",xs),e}function mt(e,t){return ht(e)?ss(jt(e)?We(t):t):We(t)}const ml={__proto__:null,[Symbol.iterator](){return bn(this,Symbol.iterator,e=>mt(this,e))},concat(...e){return Qt(this).concat(...e.map(t=>B(t)?Qt(t):t))},entries(){return bn(this,"entries",e=>(e[1]=mt(this,e[1]),e))},every(e,t){return ot(this,"every",e,t,void 0,arguments)},filter(e,t){return ot(this,"filter",e,t,s=>s.map(n=>mt(this,n)),arguments)},find(e,t){return ot(this,"find",e,t,s=>mt(this,s),arguments)},findIndex(e,t){return ot(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ot(this,"findLast",e,t,s=>mt(this,s),arguments)},findLastIndex(e,t){return ot(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ot(this,"forEach",e,t,void 0,arguments)},includes(...e){return yn(this,"includes",e)},indexOf(...e){return yn(this,"indexOf",e)},join(e){return Qt(this).join(e)},lastIndexOf(...e){return yn(this,"lastIndexOf",e)},map(e,t){return ot(this,"map",e,t,void 0,arguments)},pop(){return fs(this,"pop")},push(...e){return fs(this,"push",e)},reduce(e,...t){return wi(this,"reduce",e,t)},reduceRight(e,...t){return wi(this,"reduceRight",e,t)},shift(){return fs(this,"shift")},some(e,t){return ot(this,"some",e,t,void 0,arguments)},splice(...e){return fs(this,"splice",e)},toReversed(){return Qt(this).toReversed()},toSorted(e){return Qt(this).toSorted(e)},toSpliced(...e){return Qt(this).toSpliced(...e)},unshift(...e){return fs(this,"unshift",e)},values(){return bn(this,"values",e=>mt(this,e))}};function bn(e,t,s){const n=ln(e),i=n[t]();return n!==e&&!Ge(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const vl=Array.prototype;function ot(e,t,s,n,i,r){const o=ln(e),l=o!==e&&!Ge(e),a=o[t];if(a!==vl[t]){const p=a.apply(e,r);return l?We(p):p}let u=s;o!==e&&(l?u=function(p,h){return s.call(this,mt(e,p),h,e)}:s.length>2&&(u=function(p,h){return s.call(this,p,h,e)}));const c=a.call(o,u,n);return l&&i?i(c):c}function wi(e,t,s,n){const i=ln(e);let r=s;return i!==e&&(Ge(e)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,e)}):r=function(o,l,a){return s.call(this,o,mt(e,l),a,e)}),i[t](r,...n)}function yn(e,t,s){const n=J(e);Se(n,"iterate",xs);const i=n[t](...s);return(i===-1||i===!1)&&li(s[0])?(s[0]=J(s[0]),n[t](...s)):i}function fs(e,t,s=[]){ft(),ei();const n=J(e)[t].apply(e,s);return ti(),ut(),n}const bl=Qn("__proto__,__v_isRef,__isVue"),kr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tt));function yl(e){Tt(e)||(e=String(e));const t=J(this);return Se(t,"has",e),t.hasOwnProperty(e)}class Kr{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?Rl:Br:r?Hr:jr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=B(t);if(!i){let a;if(o&&(a=ml[s]))return a;if(s==="hasOwnProperty")return yl}const l=Reflect.get(t,s,Ae(t)?t:n);if((Tt(s)?kr.has(s):bl(s))||(i||Se(t,"get",s),r))return l;if(Ae(l)){const a=o&&Xn(s)?l:l.value;return i&&oe(a)?kn(a):a}return oe(l)?i?kn(l):ri(l):l}}class Ur extends Kr{constructor(t=!1){super(!1,t)}set(t,s,n,i){let r=t[s];const o=B(t)&&Xn(s);if(!this._isShallow){const u=ht(r);if(!Ge(n)&&!ht(n)&&(r=J(r),n=J(n)),!o&&Ae(r)&&!Ae(n))return u||(r.value=n),!0}const l=o?Number(s)<t.length:z(t,s),a=Reflect.set(t,s,n,Ae(t)?t:i);return t===J(i)&&(l?St(n,r)&&at(t,"set",s,n):at(t,"add",s,n)),a}deleteProperty(t,s){const n=z(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&at(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Tt(s)||!kr.has(s))&&Se(t,"has",s),n}ownKeys(t){return Se(t,"iterate",B(t)?"length":Ut),Reflect.ownKeys(t)}}class El extends Kr{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Cl=new Ur,Sl=new El,xl=new Ur(!0);const Dn=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function Al(e,t,s){return function(...n){const i=this.__v_raw,r=J(i),o=Zt(r),l=e==="entries"||e===Symbol.iterator&&o,a=e==="keys"&&o,u=i[e](...n),c=s?Dn:t?ss:We;return!t&&Se(r,"iterate",a?Fn:Ut),ve(Object.create(u),{next(){const{value:p,done:h}=u.next();return h?{value:p,done:h}:{value:l?[c(p[0]),c(p[1])]:c(p),done:h}}})}}function Us(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wl(e,t){const s={get(i){const r=this.__v_raw,o=J(r),l=J(i);e||(St(i,l)&&Se(o,"get",i),Se(o,"get",l));const{has:a}=Ks(o),u=t?Dn:e?ss:We;if(a.call(o,i))return u(r.get(i));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Se(J(i),"iterate",Ut),i.size},has(i){const r=this.__v_raw,o=J(r),l=J(i);return e||(St(i,l)&&Se(o,"has",i),Se(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=J(l),u=t?Dn:e?ss:We;return!e&&Se(a,"iterate",Ut),l.forEach((c,p)=>i.call(r,u(c),u(p),o))}};return ve(s,e?{add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear")}:{add(i){!t&&!Ge(i)&&!ht(i)&&(i=J(i));const r=J(this);return Ks(r).has.call(r,i)||(r.add(i),at(r,"add",i,i)),this},set(i,r){!t&&!Ge(r)&&!ht(r)&&(r=J(r));const o=J(this),{has:l,get:a}=Ks(o);let u=l.call(o,i);u||(i=J(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,r),u?St(r,c)&&at(o,"set",i,r):at(o,"add",i,r),this},delete(i){const r=J(this),{has:o,get:l}=Ks(r);let a=o.call(r,i);a||(i=J(i),a=o.call(r,i)),l&&l.call(r,i);const u=r.delete(i);return a&&at(r,"delete",i,void 0),u},clear(){const i=J(this),r=i.size!==0,o=i.clear();return r&&at(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Al(i,e,t)}),s}function ii(e,t){const s=wl(e,t);return(n,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(z(s,i)&&i in n?s:n,i,r)}const Ol={get:ii(!1,!1)},Tl={get:ii(!1,!0)},Il={get:ii(!0,!1)};const jr=new WeakMap,Hr=new WeakMap,Br=new WeakMap,Rl=new WeakMap;function Nl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ml(e){return e.__v_skip||!Object.isExtensible(e)?0:Nl(nl(e))}function ri(e){return ht(e)?e:oi(e,!1,Cl,Ol,jr)}function $l(e){return oi(e,!1,xl,Tl,Hr)}function kn(e){return oi(e,!0,Sl,Il,Br)}function oi(e,t,s,n,i){if(!oe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ml(e);if(r===0)return e;const o=i.get(e);if(o)return o;const l=new Proxy(e,r===2?n:s);return i.set(e,l),l}function jt(e){return ht(e)?jt(e.__v_raw):!!(e&&e.__v_isReactive)}function ht(e){return!!(e&&e.__v_isReadonly)}function Ge(e){return!!(e&&e.__v_isShallow)}function li(e){return e?!!e.__v_raw:!1}function J(e){const t=e&&e.__v_raw;return t?J(t):e}function Pl(e){return!z(e,"__v_skip")&&Object.isExtensible(e)&&wr(e,"__v_skip",!0),e}const We=e=>oe(e)?ri(e):e,ss=e=>oe(e)?kn(e):e;function Ae(e){return e?e.__v_isRef===!0:!1}function Le(e){return Ll(e,!1)}function Ll(e,t){return Ae(e)?e:new Fl(e,t)}class Fl{constructor(t,s){this.dep=new ni,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:J(t),this._value=s?t:We(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Ge(t)||ht(t);t=n?t:J(t),St(t,s)&&(this._rawValue=t,this._value=n?t:We(t),this.dep.trigger())}}function le(e){return Ae(e)?e.value:e}const Dl={get:(e,t,s)=>t==="__v_raw"?e:le(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return Ae(i)&&!Ae(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Gr(e){return jt(e)?e:new Proxy(e,Dl)}class kl{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new ni(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ne!==this)return Mr(this,!0),!0}get value(){const t=this.dep.track();return Lr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Kl(e,t,s=!1){let n,i;return q(e)?n=e:(n=e.get,i=e.set),new kl(n,i,s)}const js={},Js=new WeakMap;let Kt;function Ul(e,t=!1,s=Kt){if(s){let n=Js.get(s);n||Js.set(s,n=[]),n.push(e)}}function jl(e,t,s=ie){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=s,u=$=>i?$:Ge($)||i===!1||i===0?Ct($,1):Ct($);let c,p,h,y,E=!1,R=!1;if(Ae(e)?(p=()=>e.value,E=Ge(e)):jt(e)?(p=()=>u(e),E=!0):B(e)?(R=!0,E=e.some($=>jt($)||Ge($)),p=()=>e.map($=>{if(Ae($))return $.value;if(jt($))return u($);if(q($))return a?a($,2):$()})):q(e)?t?p=a?()=>a(e,2):e:p=()=>{if(h){ft();try{h()}finally{ut()}}const $=Kt;Kt=c;try{return a?a(e,3,[y]):e(y)}finally{Kt=$}}:p=et,t&&i){const $=p,G=i===!0?1/0:i;p=()=>Ct($(),G)}const K=pl(),j=()=>{c.stop(),K&&K.active&&zn(K.effects,c)};if(r&&t){const $=t;t=(...G)=>{$(...G),j()}}let Y=R?new Array(e.length).fill(js):js;const X=$=>{if(!(!(c.flags&1)||!c.dirty&&!$))if(t){const G=c.run();if(i||E||(R?G.some((_e,be)=>St(_e,Y[be])):St(G,Y))){h&&h();const _e=Kt;Kt=c;try{const be=[G,Y===js?void 0:R&&Y[0]===js?[]:Y,y];Y=G,a?a(t,3,be):t(...be)}finally{Kt=_e}}}else c.run()};return l&&l(X),c=new Rr(p),c.scheduler=o?()=>o(X,!1):X,y=$=>Ul($,!1,c),h=c.onStop=()=>{const $=Js.get(c);if($){if(a)a($,4);else for(const G of $)G();Js.delete(c)}},t?n?X(!0):Y=c.run():o?o(X.bind(null,!0),!0):c.run(),j.pause=c.pause.bind(c),j.resume=c.resume.bind(c),j.stop=j,j}function Ct(e,t=1/0,s){if(t<=0||!oe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Ae(e))Ct(e.value,t,s);else if(B(e))for(let n=0;n<e.length;n++)Ct(e[n],t,s);else if(Er(e)||Zt(e))e.forEach(n=>{Ct(n,t,s)});else if(xr(e)){for(const n in e)Ct(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ct(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ns(e,t,s,n){try{return n?e(...n):e()}catch(i){an(i,t,s)}}function st(e,t,s,n){if(q(e)){const i=Ns(e,t,s,n);return i&&Cr(i)&&i.catch(r=>{an(r,t,s)}),i}if(B(e)){const i=[];for(let r=0;r<e.length;r++)i.push(st(e[r],t,s,n));return i}}function an(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ie;if(t){let l=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const c=l.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,a,u)===!1)return}l=l.parent}if(r){ft(),Ns(r,null,10,[e,a,u]),ut();return}}Hl(e,s,i,n,o)}function Hl(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const Ie=[];let Je=-1;const es=[];let vt=null,zt=0;const qr=Promise.resolve();let zs=null;function Bl(e){const t=zs||qr;return e?t.then(this?e.bind(this):e):t}function Gl(e){let t=Je+1,s=Ie.length;for(;t<s;){const n=t+s>>>1,i=Ie[n],r=As(i);r<e||r===e&&i.flags&2?t=n+1:s=n}return t}function ai(e){if(!(e.flags&1)){const t=As(e),s=Ie[Ie.length-1];!s||!(e.flags&2)&&t>=As(s)?Ie.push(e):Ie.splice(Gl(t),0,e),e.flags|=1,Vr()}}function Vr(){zs||(zs=qr.then(Yr))}function ql(e){B(e)?es.push(...e):vt&&e.id===-1?vt.splice(zt+1,0,e):e.flags&1||(es.push(e),e.flags|=1),Vr()}function Oi(e,t,s=Je+1){for(;s<Ie.length;s++){const n=Ie[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ie.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Wr(e){if(es.length){const t=[...new Set(es)].sort((s,n)=>As(s)-As(n));if(es.length=0,vt){vt.push(...t);return}for(vt=t,zt=0;zt<vt.length;zt++){const s=vt[zt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}vt=null,zt=0}}const As=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Yr(e){try{for(Je=0;Je<Ie.length;Je++){const t=Ie[Je];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ns(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Je<Ie.length;Je++){const t=Ie[Je];t&&(t.flags&=-2)}Je=-1,Ie.length=0,Wr(),zs=null,(Ie.length||es.length)&&Yr()}}let Ze=null,Qr=null;function Xs(e){const t=Ze;return Ze=e,Qr=e&&e.type.__scopeId||null,t}function Vl(e,t=Ze,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Di(-1);const r=Xs(t);let o;try{o=e(...i)}finally{Xs(r),n._d&&Di(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Ft(e,t,s,n){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[n];a&&(ft(),st(a,s,8,[e.el,l,e,t]),ut())}}function Wl(e,t){if(Re){let s=Re.provides;const n=Re.parent&&Re.parent.provides;n===s&&(s=Re.provides=Object.create(n)),s[e]=t}}function Gs(e,t,s=!1){const n=Ya();if(n||ts){let i=ts?ts._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&q(t)?t.call(n&&n.proxy):t}}const Yl=Symbol.for("v-scx"),Ql=()=>Gs(Yl);function En(e,t,s){return Jr(e,t,s)}function Jr(e,t,s=ie){const{immediate:n,deep:i,flush:r,once:o}=s,l=ve({},s),a=t&&n||!t&&r!=="post";let u;if(Os){if(r==="sync"){const y=Ql();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!a){const y=()=>{};return y.stop=et,y.resume=et,y.pause=et,y}}const c=Re;l.call=(y,E,R)=>st(y,c,E,R);let p=!1;r==="post"?l.scheduler=y=>{Pe(y,c&&c.suspense)}:r!=="sync"&&(p=!0,l.scheduler=(y,E)=>{E?y():ai(y)}),l.augmentJob=y=>{t&&(y.flags|=4),p&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const h=jl(e,t,l);return Os&&(u?u.push(h):a&&h()),h}function Jl(e,t,s){const n=this.proxy,i=ce(e)?e.includes(".")?zr(n,e):()=>n[e]:e.bind(n,n);let r;q(t)?r=t:(r=t.handler,s=t);const o=Ms(this),l=Jr(i,r.bind(n),s);return o(),l}function zr(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const zl=Symbol("_vte"),Xl=e=>e.__isTeleport,Zl=Symbol("_leaveCb");function ci(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ci(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Xr(e,t){return q(e)?ve({name:e.name},t,{setup:e}):e}function Zr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Zs=new WeakMap;function vs(e,t,s,n,i=!1){if(B(e)){e.forEach((E,R)=>vs(E,t&&(B(t)?t[R]:t),s,n,i));return}if(bs(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&vs(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?di(n.component):n.el,o=i?null:r,{i:l,r:a}=e,u=t&&t.r,c=l.refs===ie?l.refs={}:l.refs,p=l.setupState,h=J(p),y=p===ie?yr:E=>z(h,E);if(u!=null&&u!==a){if(Ti(t),ce(u))c[u]=null,y(u)&&(p[u]=null);else if(Ae(u)){u.value=null;const E=t;E.k&&(c[E.k]=null)}}if(q(a))Ns(a,l,12,[o,c]);else{const E=ce(a),R=Ae(a);if(E||R){const K=()=>{if(e.f){const j=E?y(a)?p[a]:c[a]:a.value;if(i)B(j)&&zn(j,r);else if(B(j))j.includes(r)||j.push(r);else if(E)c[a]=[r],y(a)&&(p[a]=c[a]);else{const Y=[r];a.value=Y,e.k&&(c[e.k]=Y)}}else E?(c[a]=o,y(a)&&(p[a]=o)):R&&(a.value=o,e.k&&(c[e.k]=o))};if(o){const j=()=>{K(),Zs.delete(e)};j.id=-1,Zs.set(e,j),Pe(j,s)}else Ti(e),K()}}}function Ti(e){const t=Zs.get(e);t&&(t.flags|=8,Zs.delete(e))}on().requestIdleCallback;on().cancelIdleCallback;const bs=e=>!!e.type.__asyncLoader,eo=e=>e.type.__isKeepAlive;function ea(e,t){to(e,"a",t)}function ta(e,t){to(e,"da",t)}function to(e,t,s=Re){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(cn(t,n,s),s){let i=s.parent;for(;i&&i.parent;)eo(i.parent.vnode)&&sa(n,t,s,i),i=i.parent}}function sa(e,t,s,n){const i=cn(t,e,n,!0);so(()=>{zn(n[t],i)},s)}function cn(e,t,s=Re,n=!1){if(s){const i=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...o)=>{ft();const l=Ms(s),a=st(t,s,e,o);return l(),ut(),a});return n?i.unshift(r):i.push(r),r}}const dt=e=>(t,s=Re)=>{(!Os||e==="sp")&&cn(e,(...n)=>t(...n),s)},na=dt("bm"),ia=dt("m"),ra=dt("bu"),oa=dt("u"),la=dt("bum"),so=dt("um"),aa=dt("sp"),ca=dt("rtg"),fa=dt("rtc");function ua(e,t=Re){cn("ec",e,t)}const ha=Symbol.for("v-ndc");function Kn(e,t,s,n){let i;const r=s,o=B(e);if(o||ce(e)){const l=o&&jt(e);let a=!1,u=!1;l&&(a=!Ge(e),u=ht(e),e=ln(e)),i=new Array(e.length);for(let c=0,p=e.length;c<p;c++)i[c]=t(a?u?ss(We(e[c])):We(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let l=0;l<e;l++)i[l]=t(l+1,l,void 0,r)}else if(oe(e))if(e[Symbol.iterator])i=Array.from(e,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(e);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=t(e[c],c,a,r)}}else i=[];return i}const Un=e=>e?So(e)?di(e):Un(e.parent):null,ys=ve(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Un(e.parent),$root:e=>Un(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>io(e),$forceUpdate:e=>e.f||(e.f=()=>{ai(e.update)}),$nextTick:e=>e.n||(e.n=Bl.bind(e.proxy)),$watch:e=>Jl.bind(e)}),Cn=(e,t)=>e!==ie&&!e.__isScriptSetup&&z(e,t),da={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:l,appContext:a}=e;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return r[t]}else{if(Cn(n,t))return o[t]=1,n[t];if(i!==ie&&z(i,t))return o[t]=2,i[t];if(z(r,t))return o[t]=3,r[t];if(s!==ie&&z(s,t))return o[t]=4,s[t];jn&&(o[t]=0)}}const u=ys[t];let c,p;if(u)return t==="$attrs"&&Se(e.attrs,"get",""),u(e);if((c=l.__cssModules)&&(c=c[t]))return c;if(s!==ie&&z(s,t))return o[t]=4,s[t];if(p=a.config.globalProperties,z(p,t))return p[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:r}=e;return Cn(i,t)?(i[t]=s,!0):n!==ie&&z(n,t)?(n[t]=s,!0):z(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,props:r,type:o}},l){let a;return!!(s[l]||e!==ie&&l[0]!=="$"&&z(e,l)||Cn(t,l)||z(r,l)||z(n,l)||z(ys,l)||z(i.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:z(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ii(e){return B(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let jn=!0;function pa(e){const t=io(e),s=e.proxy,n=e.ctx;jn=!1,t.beforeCreate&&Ri(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:p,mounted:h,beforeUpdate:y,updated:E,activated:R,deactivated:K,beforeDestroy:j,beforeUnmount:Y,destroyed:X,unmounted:$,render:G,renderTracked:_e,renderTriggered:be,errorCaptured:De,serverPrefetch:It,expose:ke,inheritAttrs:pt,components:Rt,directives:qt,filters:Vt}=t;if(u&&ga(u,n,null),o)for(const se in o){const te=o[se];q(te)&&(n[se]=te.bind(s))}if(i){const se=i.call(s,s);oe(se)&&(e.data=ri(se))}if(jn=!0,r)for(const se in r){const te=r[se],nt=q(te)?te.bind(s,s):q(te.get)?te.get.bind(s,s):et,Nt=!q(te)&&q(te.set)?te.set.bind(s):et,it=qn({get:nt,set:Nt});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>it.value,set:Ke=>it.value=Ke})}if(l)for(const se in l)no(l[se],n,s,se);if(a){const se=q(a)?a.call(s):a;Reflect.ownKeys(se).forEach(te=>{Wl(te,se[te])})}c&&Ri(c,e,"c");function he(se,te){B(te)?te.forEach(nt=>se(nt.bind(s))):te&&se(te.bind(s))}if(he(na,p),he(ia,h),he(ra,y),he(oa,E),he(ea,R),he(ta,K),he(ua,De),he(fa,_e),he(ca,be),he(la,Y),he(so,$),he(aa,It),B(ke))if(ke.length){const se=e.exposed||(e.exposed={});ke.forEach(te=>{Object.defineProperty(se,te,{get:()=>s[te],set:nt=>s[te]=nt,enumerable:!0})})}else e.exposed||(e.exposed={});G&&e.render===et&&(e.render=G),pt!=null&&(e.inheritAttrs=pt),Rt&&(e.components=Rt),qt&&(e.directives=qt),It&&Zr(e)}function ga(e,t,s=et){B(e)&&(e=Hn(e));for(const n in e){const i=e[n];let r;oe(i)?"default"in i?r=Gs(i.from||n,i.default,!0):r=Gs(i.from||n):r=Gs(i),Ae(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function Ri(e,t,s){st(B(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function no(e,t,s,n){let i=n.includes(".")?zr(s,n):()=>s[n];if(ce(e)){const r=t[e];q(r)&&En(i,r)}else if(q(e))En(i,e.bind(s));else if(oe(e))if(B(e))e.forEach(r=>no(r,t,s,n));else{const r=q(e.handler)?e.handler.bind(s):t[e.handler];q(r)&&En(i,r,e)}}function io(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,l=r.get(t);let a;return l?a=l:!i.length&&!s&&!n?a=t:(a={},i.length&&i.forEach(u=>en(a,u,o,!0)),en(a,t,o)),oe(t)&&r.set(t,a),a}function en(e,t,s,n=!1){const{mixins:i,extends:r}=t;r&&en(e,r,s,!0),i&&i.forEach(o=>en(e,o,s,!0));for(const o in t)if(!(n&&o==="expose")){const l=_a[o]||s&&s[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const _a={data:Ni,props:Mi,emits:Mi,methods:ds,computed:ds,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:ds,directives:ds,watch:va,provide:Ni,inject:ma};function Ni(e,t){return t?e?function(){return ve(q(e)?e.call(this,this):e,q(t)?t.call(this,this):t)}:t:e}function ma(e,t){return ds(Hn(e),Hn(t))}function Hn(e){if(B(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Te(e,t){return e?[...new Set([].concat(e,t))]:t}function ds(e,t){return e?ve(Object.create(null),e,t):t}function Mi(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:ve(Object.create(null),Ii(e),Ii(t??{})):t}function va(e,t){if(!e)return t;if(!t)return e;const s=ve(Object.create(null),e);for(const n in t)s[n]=Te(e[n],t[n]);return s}function ro(){return{app:null,config:{isNativeTag:yr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ba=0;function ya(e,t){return function(n,i=null){q(n)||(n=ve({},n)),i!=null&&!oe(i)&&(i=null);const r=ro(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:ba++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:ec,get config(){return r.config},set config(c){},use(c,...p){return o.has(c)||(c&&q(c.install)?(o.add(c),c.install(u,...p)):q(c)&&(o.add(c),c(u,...p))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,p){return p?(r.components[c]=p,u):r.components[c]},directive(c,p){return p?(r.directives[c]=p,u):r.directives[c]},mount(c,p,h){if(!a){const y=u._ceVNode||tt(n,i);return y.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(y,c,h),a=!0,u._container=c,c.__vue_app__=u,di(y.component)}},onUnmount(c){l.push(c)},unmount(){a&&(st(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return r.provides[c]=p,u},runWithContext(c){const p=ts;ts=u;try{return c()}finally{ts=p}}};return u}}let ts=null;const Ea=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${wt(t)}Modifiers`]||e[`${Gt(t)}Modifiers`];function Ca(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ie;let i=s;const r=t.startsWith("update:"),o=r&&Ea(n,t.slice(7));o&&(o.trim&&(i=s.map(c=>ce(c)?c.trim():c)),o.number&&(i=s.map(ol)));let l,a=n[l=gn(t)]||n[l=gn(wt(t))];!a&&r&&(a=n[l=gn(Gt(t))]),a&&st(a,e,6,i);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,st(u,e,6,i)}}const Sa=new WeakMap;function oo(e,t,s=!1){const n=s?Sa:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const r=e.emits;let o={},l=!1;if(!q(e)){const a=u=>{const c=oo(u,t,!0);c&&(l=!0,ve(o,c))};!s&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(oe(e)&&n.set(e,null),null):(B(r)?r.forEach(a=>o[a]=null):ve(o,r),oe(e)&&n.set(e,o),o)}function fn(e,t){return!e||!sn(t)?!1:(t=t.slice(2).replace(/Once$/,""),z(e,t[0].toLowerCase()+t.slice(1))||z(e,Gt(t))||z(e,t))}function $i(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:p,data:h,setupState:y,ctx:E,inheritAttrs:R}=e,K=Xs(e);let j,Y;try{if(s.shapeFlag&4){const $=i||n,G=$;j=Xe(u.call(G,$,c,p,y,h,E)),Y=l}else{const $=t;j=Xe($.length>1?$(p,{attrs:l,slots:o,emit:a}):$(p,null)),Y=t.props?l:xa(l)}}catch($){Es.length=0,an($,e,1),j=tt(Ot)}let X=j;if(Y&&R!==!1){const $=Object.keys(Y),{shapeFlag:G}=X;$.length&&G&7&&(r&&$.some(Jn)&&(Y=Aa(Y,r)),X=ns(X,Y,!1,!0))}return s.dirs&&(X=ns(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(s.dirs):s.dirs),s.transition&&ci(X,s.transition),j=X,Xs(K),j}const xa=e=>{let t;for(const s in e)(s==="class"||s==="style"||sn(s))&&((t||(t={}))[s]=e[s]);return t},Aa=(e,t)=>{const s={};for(const n in e)(!Jn(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function wa(e,t,s){const{props:n,children:i,component:r}=e,{props:o,children:l,patchFlag:a}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?Pi(n,o,u):!!o;if(a&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const h=c[p];if(o[h]!==n[h]&&!fn(u,h))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?Pi(n,o,u):!0:!!o;return!1}function Pi(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r]&&!fn(s,r))return!0}return!1}function Oa({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const lo={},ao=()=>Object.create(lo),co=e=>Object.getPrototypeOf(e)===lo;function Ta(e,t,s,n=!1){const i={},r=ao();e.propsDefaults=Object.create(null),fo(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);s?e.props=n?i:$l(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Ia(e,t,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,l=J(i),[a]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let h=c[p];if(fn(e.emitsOptions,h))continue;const y=t[h];if(a)if(z(r,h))y!==r[h]&&(r[h]=y,u=!0);else{const E=wt(h);i[E]=Bn(a,l,E,y,e,!1)}else y!==r[h]&&(r[h]=y,u=!0)}}}else{fo(e,t,i,r)&&(u=!0);let c;for(const p in l)(!t||!z(t,p)&&((c=Gt(p))===p||!z(t,c)))&&(a?s&&(s[p]!==void 0||s[c]!==void 0)&&(i[p]=Bn(a,l,p,void 0,e,!0)):delete i[p]);if(r!==l)for(const p in r)(!t||!z(t,p))&&(delete r[p],u=!0)}u&&at(e.attrs,"set","")}function fo(e,t,s,n){const[i,r]=e.propsOptions;let o=!1,l;if(t)for(let a in t){if(gs(a))continue;const u=t[a];let c;i&&z(i,c=wt(a))?!r||!r.includes(c)?s[c]=u:(l||(l={}))[c]=u:fn(e.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(r){const a=J(s),u=l||ie;for(let c=0;c<r.length;c++){const p=r[c];s[p]=Bn(i,a,p,u[p],e,!z(u,p))}}return o}function Bn(e,t,s,n,i,r){const o=e[s];if(o!=null){const l=z(o,"default");if(l&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&q(a)){const{propsDefaults:u}=i;if(s in u)n=u[s];else{const c=Ms(i);n=u[s]=a.call(null,t),c()}}else n=a;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!l?n=!1:o[1]&&(n===""||n===Gt(s))&&(n=!0))}return n}const Ra=new WeakMap;function uo(e,t,s=!1){const n=s?Ra:t.propsCache,i=n.get(e);if(i)return i;const r=e.props,o={},l=[];let a=!1;if(!q(e)){const c=p=>{a=!0;const[h,y]=uo(p,t,!0);ve(o,h),y&&l.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!a)return oe(e)&&n.set(e,Xt),Xt;if(B(r))for(let c=0;c<r.length;c++){const p=wt(r[c]);Li(p)&&(o[p]=ie)}else if(r)for(const c in r){const p=wt(c);if(Li(p)){const h=r[c],y=o[p]=B(h)||q(h)?{type:h}:ve({},h),E=y.type;let R=!1,K=!0;if(B(E))for(let j=0;j<E.length;++j){const Y=E[j],X=q(Y)&&Y.name;if(X==="Boolean"){R=!0;break}else X==="String"&&(K=!1)}else R=q(E)&&E.name==="Boolean";y[0]=R,y[1]=K,(R||z(y,"default"))&&l.push(p)}}const u=[o,l];return oe(e)&&n.set(e,u),u}function Li(e){return e[0]!=="$"&&!gs(e)}const fi=e=>e==="_"||e==="_ctx"||e==="$stable",ui=e=>B(e)?e.map(Xe):[Xe(e)],Na=(e,t,s)=>{if(t._n)return t;const n=Vl((...i)=>ui(t(...i)),s);return n._c=!1,n},ho=(e,t,s)=>{const n=e._ctx;for(const i in e){if(fi(i))continue;const r=e[i];if(q(r))t[i]=Na(i,r,n);else if(r!=null){const o=ui(r);t[i]=()=>o}}},po=(e,t)=>{const s=ui(t);e.slots.default=()=>s},go=(e,t,s)=>{for(const n in t)(s||!fi(n))&&(e[n]=t[n])},Ma=(e,t,s)=>{const n=e.slots=ao();if(e.vnode.shapeFlag&32){const i=t._;i?(go(n,t,s),s&&wr(n,"_",i,!0)):ho(t,n)}else t&&po(e,t)},$a=(e,t,s)=>{const{vnode:n,slots:i}=e;let r=!0,o=ie;if(n.shapeFlag&32){const l=t._;l?s&&l===1?r=!1:go(i,t,s):(r=!t.$stable,ho(t,i)),o=t}else t&&(po(e,t),o={default:1});if(r)for(const l in i)!fi(l)&&o[l]==null&&delete i[l]},Pe=ka;function Pa(e){return La(e)}function La(e,t){const s=on();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:p,nextSibling:h,setScopeId:y=et,insertStaticContent:E}=e,R=(f,d,b,A=null,C=null,S=null,I=void 0,O=null,w=!!d.dynamicChildren)=>{if(f===d)return;f&&!us(f,d)&&(A=rt(f),Ke(f,C,S,!0),f=null),d.patchFlag===-2&&(w=!1,d.dynamicChildren=null);const{type:x,ref:F,shapeFlag:N}=d;switch(x){case un:K(f,d,b,A);break;case Ot:j(f,d,b,A);break;case xn:f==null&&Y(d,b,A,I);break;case Me:Rt(f,d,b,A,C,S,I,O,w);break;default:N&1?G(f,d,b,A,C,S,I,O,w):N&6?qt(f,d,b,A,C,S,I,O,w):(N&64||N&128)&&x.process(f,d,b,A,C,S,I,O,w,$t)}F!=null&&C?vs(F,f&&f.ref,S,d||f,!d):F==null&&f&&f.ref!=null&&vs(f.ref,null,S,f,!0)},K=(f,d,b,A)=>{if(f==null)n(d.el=l(d.children),b,A);else{const C=d.el=f.el;d.children!==f.children&&u(C,d.children)}},j=(f,d,b,A)=>{f==null?n(d.el=a(d.children||""),b,A):d.el=f.el},Y=(f,d,b,A)=>{[f.el,f.anchor]=E(f.children,d,b,A,f.el,f.anchor)},X=({el:f,anchor:d},b,A)=>{let C;for(;f&&f!==d;)C=h(f),n(f,b,A),f=C;n(d,b,A)},$=({el:f,anchor:d})=>{let b;for(;f&&f!==d;)b=h(f),i(f),f=b;i(d)},G=(f,d,b,A,C,S,I,O,w)=>{if(d.type==="svg"?I="svg":d.type==="math"&&(I="mathml"),f==null)_e(d,b,A,C,S,I,O,w);else{const x=f.el&&f.el._isVueCE?f.el:null;try{x&&x._beginPatch(),It(f,d,C,S,I,O,w)}finally{x&&x._endPatch()}}},_e=(f,d,b,A,C,S,I,O)=>{let w,x;const{props:F,shapeFlag:N,transition:M,dirs:U}=f;if(w=f.el=o(f.type,S,F&&F.is,F),N&8?c(w,f.children):N&16&&De(f.children,w,null,A,C,Sn(f,S),I,O),U&&Ft(f,null,A,"created"),be(w,f,f.scopeId,I,A),F){for(const Z in F)Z!=="value"&&!gs(Z)&&r(w,Z,null,F[Z],S,A);"value"in F&&r(w,"value",null,F.value,S),(x=F.onVnodeBeforeMount)&&Qe(x,A,f)}U&&Ft(f,null,A,"beforeMount");const V=Fa(C,M);V&&M.beforeEnter(w),n(w,d,b),((x=F&&F.onVnodeMounted)||V||U)&&Pe(()=>{x&&Qe(x,A,f),V&&M.enter(w),U&&Ft(f,null,A,"mounted")},C)},be=(f,d,b,A,C)=>{if(b&&y(f,b),A)for(let S=0;S<A.length;S++)y(f,A[S]);if(C){let S=C.subTree;if(d===S||bo(S.type)&&(S.ssContent===d||S.ssFallback===d)){const I=C.vnode;be(f,I,I.scopeId,I.slotScopeIds,C.parent)}}},De=(f,d,b,A,C,S,I,O,w=0)=>{for(let x=w;x<f.length;x++){const F=f[x]=O?bt(f[x]):Xe(f[x]);R(null,F,d,b,A,C,S,I,O)}},It=(f,d,b,A,C,S,I)=>{const O=d.el=f.el;let{patchFlag:w,dynamicChildren:x,dirs:F}=d;w|=f.patchFlag&16;const N=f.props||ie,M=d.props||ie;let U;if(b&&Dt(b,!1),(U=M.onVnodeBeforeUpdate)&&Qe(U,b,d,f),F&&Ft(d,f,b,"beforeUpdate"),b&&Dt(b,!0),(N.innerHTML&&M.innerHTML==null||N.textContent&&M.textContent==null)&&c(O,""),x?ke(f.dynamicChildren,x,O,b,A,Sn(d,C),S):I||te(f,d,O,null,b,A,Sn(d,C),S,!1),w>0){if(w&16)pt(O,N,M,b,C);else if(w&2&&N.class!==M.class&&r(O,"class",null,M.class,C),w&4&&r(O,"style",N.style,M.style,C),w&8){const V=d.dynamicProps;for(let Z=0;Z<V.length;Z++){const Q=V[Z],ye=N[Q],Ee=M[Q];(Ee!==ye||Q==="value")&&r(O,Q,ye,Ee,C,b)}}w&1&&f.children!==d.children&&c(O,d.children)}else!I&&x==null&&pt(O,N,M,b,C);((U=M.onVnodeUpdated)||F)&&Pe(()=>{U&&Qe(U,b,d,f),F&&Ft(d,f,b,"updated")},A)},ke=(f,d,b,A,C,S,I)=>{for(let O=0;O<d.length;O++){const w=f[O],x=d[O],F=w.el&&(w.type===Me||!us(w,x)||w.shapeFlag&198)?p(w.el):b;R(w,x,F,null,A,C,S,I,!0)}},pt=(f,d,b,A,C)=>{if(d!==b){if(d!==ie)for(const S in d)!gs(S)&&!(S in b)&&r(f,S,d[S],null,C,A);for(const S in b){if(gs(S))continue;const I=b[S],O=d[S];I!==O&&S!=="value"&&r(f,S,O,I,C,A)}"value"in b&&r(f,"value",d.value,b.value,C)}},Rt=(f,d,b,A,C,S,I,O,w)=>{const x=d.el=f?f.el:l(""),F=d.anchor=f?f.anchor:l("");let{patchFlag:N,dynamicChildren:M,slotScopeIds:U}=d;U&&(O=O?O.concat(U):U),f==null?(n(x,b,A),n(F,b,A),De(d.children||[],b,F,C,S,I,O,w)):N>0&&N&64&&M&&f.dynamicChildren&&f.dynamicChildren.length===M.length?(ke(f.dynamicChildren,M,b,C,S,I,O),(d.key!=null||C&&d===C.subTree)&&_o(f,d,!0)):te(f,d,b,F,C,S,I,O,w)},qt=(f,d,b,A,C,S,I,O,w)=>{d.slotScopeIds=O,f==null?d.shapeFlag&512?C.ctx.activate(d,b,A,I,w):Vt(d,b,A,C,S,I,w):rs(f,d,w)},Vt=(f,d,b,A,C,S,I)=>{const O=f.component=Wa(f,A,C);if(eo(f)&&(O.ctx.renderer=$t),Qa(O,!1,I),O.asyncDep){if(C&&C.registerDep(O,he,I),!f.el){const w=O.subTree=tt(Ot);j(null,w,d,b),f.placeholder=w.el}}else he(O,f,d,b,C,S,I)},rs=(f,d,b)=>{const A=d.component=f.component;if(wa(f,d,b))if(A.asyncDep&&!A.asyncResolved){se(A,d,b);return}else A.next=d,A.update();else d.el=f.el,A.vnode=d},he=(f,d,b,A,C,S,I)=>{const O=()=>{if(f.isMounted){let{next:N,bu:M,u:U,parent:V,vnode:Z}=f;{const je=mo(f);if(je){N&&(N.el=Z.el,se(f,N,I)),je.asyncDep.then(()=>{f.isUnmounted||O()});return}}let Q=N,ye;Dt(f,!1),N?(N.el=Z.el,se(f,N,I)):N=Z,M&&_n(M),(ye=N.props&&N.props.onVnodeBeforeUpdate)&&Qe(ye,V,N,Z),Dt(f,!0);const Ee=$i(f),Ue=f.subTree;f.subTree=Ee,R(Ue,Ee,p(Ue.el),rt(Ue),f,C,S),N.el=Ee.el,Q===null&&Oa(f,Ee.el),U&&Pe(U,C),(ye=N.props&&N.props.onVnodeUpdated)&&Pe(()=>Qe(ye,V,N,Z),C)}else{let N;const{el:M,props:U}=d,{bm:V,m:Z,parent:Q,root:ye,type:Ee}=f,Ue=bs(d);Dt(f,!1),V&&_n(V),!Ue&&(N=U&&U.onVnodeBeforeMount)&&Qe(N,Q,d),Dt(f,!0);{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(Ee);const je=f.subTree=$i(f);R(null,je,b,A,f,C,S),d.el=je.el}if(Z&&Pe(Z,C),!Ue&&(N=U&&U.onVnodeMounted)){const je=d;Pe(()=>Qe(N,Q,je),C)}(d.shapeFlag&256||Q&&bs(Q.vnode)&&Q.vnode.shapeFlag&256)&&f.a&&Pe(f.a,C),f.isMounted=!0,d=b=A=null}};f.scope.on();const w=f.effect=new Rr(O);f.scope.off();const x=f.update=w.run.bind(w),F=f.job=w.runIfDirty.bind(w);F.i=f,F.id=f.uid,w.scheduler=()=>ai(F),Dt(f,!0),x()},se=(f,d,b)=>{d.component=f;const A=f.vnode.props;f.vnode=d,f.next=null,Ia(f,d.props,A,b),$a(f,d.children,b),ft(),Oi(f),ut()},te=(f,d,b,A,C,S,I,O,w=!1)=>{const x=f&&f.children,F=f?f.shapeFlag:0,N=d.children,{patchFlag:M,shapeFlag:U}=d;if(M>0){if(M&128){Nt(x,N,b,A,C,S,I,O,w);return}else if(M&256){nt(x,N,b,A,C,S,I,O,w);return}}U&8?(F&16&&Mt(x,C,S),N!==x&&c(b,N)):F&16?U&16?Nt(x,N,b,A,C,S,I,O,w):Mt(x,C,S,!0):(F&8&&c(b,""),U&16&&De(N,b,A,C,S,I,O,w))},nt=(f,d,b,A,C,S,I,O,w)=>{f=f||Xt,d=d||Xt;const x=f.length,F=d.length,N=Math.min(x,F);let M;for(M=0;M<N;M++){const U=d[M]=w?bt(d[M]):Xe(d[M]);R(f[M],U,b,null,C,S,I,O,w)}x>F?Mt(f,C,S,!0,!1,N):De(d,b,A,C,S,I,O,w,N)},Nt=(f,d,b,A,C,S,I,O,w)=>{let x=0;const F=d.length;let N=f.length-1,M=F-1;for(;x<=N&&x<=M;){const U=f[x],V=d[x]=w?bt(d[x]):Xe(d[x]);if(us(U,V))R(U,V,b,null,C,S,I,O,w);else break;x++}for(;x<=N&&x<=M;){const U=f[N],V=d[M]=w?bt(d[M]):Xe(d[M]);if(us(U,V))R(U,V,b,null,C,S,I,O,w);else break;N--,M--}if(x>N){if(x<=M){const U=M+1,V=U<F?d[U].el:A;for(;x<=M;)R(null,d[x]=w?bt(d[x]):Xe(d[x]),b,V,C,S,I,O,w),x++}}else if(x>M)for(;x<=N;)Ke(f[x],C,S,!0),x++;else{const U=x,V=x,Z=new Map;for(x=V;x<=M;x++){const we=d[x]=w?bt(d[x]):Xe(d[x]);we.key!=null&&Z.set(we.key,x)}let Q,ye=0;const Ee=M-V+1;let Ue=!1,je=0;const Pt=new Array(Ee);for(x=0;x<Ee;x++)Pt[x]=0;for(x=U;x<=N;x++){const we=f[x];if(ye>=Ee){Ke(we,C,S,!0);continue}let He;if(we.key!=null)He=Z.get(we.key);else for(Q=V;Q<=M;Q++)if(Pt[Q-V]===0&&us(we,d[Q])){He=Q;break}He===void 0?Ke(we,C,S,!0):(Pt[He-V]=x+1,He>=je?je=He:Ue=!0,R(we,d[He],b,null,C,S,I,O,w),ye++)}const Ls=Ue?Da(Pt):Xt;for(Q=Ls.length-1,x=Ee-1;x>=0;x--){const we=V+x,He=d[we],as=d[we+1],Fs=we+1<F?as.el||vo(as):A;Pt[x]===0?R(null,He,b,Fs,C,S,I,O,w):Ue&&(Q<0||x!==Ls[Q]?it(He,b,Fs,2):Q--)}}},it=(f,d,b,A,C=null)=>{const{el:S,type:I,transition:O,children:w,shapeFlag:x}=f;if(x&6){it(f.component.subTree,d,b,A);return}if(x&128){f.suspense.move(d,b,A);return}if(x&64){I.move(f,d,b,$t);return}if(I===Me){n(S,d,b);for(let N=0;N<w.length;N++)it(w[N],d,b,A);n(f.anchor,d,b);return}if(I===xn){X(f,d,b);return}if(A!==2&&x&1&&O)if(A===0)O.beforeEnter(S),n(S,d,b),Pe(()=>O.enter(S),C);else{const{leave:N,delayLeave:M,afterLeave:U}=O,V=()=>{f.ctx.isUnmounted?i(S):n(S,d,b)},Z=()=>{S._isLeaving&&S[Zl](!0),N(S,()=>{V(),U&&U()})};M?M(S,V,Z):Z()}else n(S,d,b)},Ke=(f,d,b,A=!1,C=!1)=>{const{type:S,props:I,ref:O,children:w,dynamicChildren:x,shapeFlag:F,patchFlag:N,dirs:M,cacheIndex:U}=f;if(N===-2&&(C=!1),O!=null&&(ft(),vs(O,null,b,f,!0),ut()),U!=null&&(d.renderCache[U]=void 0),F&256){d.ctx.deactivate(f);return}const V=F&1&&M,Z=!bs(f);let Q;if(Z&&(Q=I&&I.onVnodeBeforeUnmount)&&Qe(Q,d,f),F&6)Ps(f.component,b,A);else{if(F&128){f.suspense.unmount(b,A);return}V&&Ft(f,null,d,"beforeUnmount"),F&64?f.type.remove(f,d,b,$t,A):x&&!x.hasOnce&&(S!==Me||N>0&&N&64)?Mt(x,d,b,!1,!0):(S===Me&&N&384||!C&&F&16)&&Mt(w,d,b),A&&Wt(f)}(Z&&(Q=I&&I.onVnodeUnmounted)||V)&&Pe(()=>{Q&&Qe(Q,d,f),V&&Ft(f,null,d,"unmounted")},b)},Wt=f=>{const{type:d,el:b,anchor:A,transition:C}=f;if(d===Me){dn(b,A);return}if(d===xn){$(f);return}const S=()=>{i(b),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(f.shapeFlag&1&&C&&!C.persisted){const{leave:I,delayLeave:O}=C,w=()=>I(b,S);O?O(f.el,S,w):w()}else S()},dn=(f,d)=>{let b;for(;f!==d;)b=h(f),i(f),f=b;i(d)},Ps=(f,d,b)=>{const{bum:A,scope:C,job:S,subTree:I,um:O,m:w,a:x}=f;Fi(w),Fi(x),A&&_n(A),C.stop(),S&&(S.flags|=8,Ke(I,f,d,b)),O&&Pe(O,d),Pe(()=>{f.isUnmounted=!0},d)},Mt=(f,d,b,A=!1,C=!1,S=0)=>{for(let I=S;I<f.length;I++)Ke(f[I],d,b,A,C)},rt=f=>{if(f.shapeFlag&6)return rt(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const d=h(f.anchor||f.el),b=d&&d[zl];return b?h(b):d};let os=!1;const ls=(f,d,b)=>{let A;f==null?d._vnode&&(Ke(d._vnode,null,null,!0),A=d._vnode.component):R(d._vnode||null,f,d,null,null,null,b),d._vnode=f,os||(os=!0,Oi(A),Wr(),os=!1)},$t={p:R,um:Ke,m:it,r:Wt,mt:Vt,mc:De,pc:te,pbc:ke,n:rt,o:e};return{render:ls,hydrate:void 0,createApp:ya(ls)}}function Sn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Dt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Fa(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function _o(e,t,s=!1){const n=e.children,i=t.children;if(B(n)&&B(i))for(let r=0;r<n.length;r++){const o=n[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=bt(i[r]),l.el=o.el),!s&&l.patchFlag!==-2&&_o(o,l)),l.type===un&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(e.type===Me?1:0)),l.type===Ot&&!l.el&&(l.el=o.el)}}function Da(e){const t=e.slice(),s=[0];let n,i,r,o,l;const a=e.length;for(n=0;n<a;n++){const u=e[n];if(u!==0){if(i=s[s.length-1],e[i]<u){t[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,e[s[l]]<u?r=l+1:o=l;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=t[o];return s}function mo(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:mo(t)}function Fi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function vo(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?vo(t.subTree):null}const bo=e=>e.__isSuspense;function ka(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):ql(e)}const Me=Symbol.for("v-fgt"),un=Symbol.for("v-txt"),Ot=Symbol.for("v-cmt"),xn=Symbol.for("v-stc"),Es=[];let Fe=null;function ue(e=!1){Es.push(Fe=e?null:[])}function Ka(){Es.pop(),Fe=Es[Es.length-1]||null}let ws=1;function Di(e,t=!1){ws+=e,e<0&&Fe&&t&&(Fe.hasOnce=!0)}function yo(e){return e.dynamicChildren=ws>0?Fe||Xt:null,Ka(),ws>0&&Fe&&Fe.push(e),e}function ge(e,t,s,n,i,r){return yo(W(e,t,s,n,i,r,!0))}function Ua(e,t,s,n,i){return yo(tt(e,t,s,n,i,!0))}function Eo(e){return e?e.__v_isVNode===!0:!1}function us(e,t){return e.type===t.type&&e.key===t.key}const Co=({key:e})=>e??null,qs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ce(e)||Ae(e)||q(e)?{i:Ze,r:e,k:t,f:!!s}:e:null);function W(e,t=null,s=null,n=0,i=null,r=e===Me?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Co(t),ref:t&&qs(t),scopeId:Qr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ze};return l?(hi(a,s),r&128&&e.normalize(a)):s&&(a.shapeFlag|=ce(s)?8:16),ws>0&&!o&&Fe&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Fe.push(a),a}const tt=ja;function ja(e,t=null,s=null,n=0,i=null,r=!1){if((!e||e===ha)&&(e=Ot),Eo(e)){const l=ns(e,t,!0);return s&&hi(l,s),ws>0&&!r&&Fe&&(l.shapeFlag&6?Fe[Fe.indexOf(e)]=l:Fe.push(l)),l.patchFlag=-2,l}if(Za(e)&&(e=e.__vccOpts),t){t=Ha(t);let{class:l,style:a}=t;l&&!ce(l)&&(t.class=xt(l)),oe(a)&&(li(a)&&!B(a)&&(a=ve({},a)),t.style=Zn(a))}const o=ce(e)?1:bo(e)?128:Xl(e)?64:oe(e)?4:q(e)?2:0;return W(e,t,s,n,i,o,r,!0)}function Ha(e){return e?li(e)||co(e)?ve({},e):e:null}function ns(e,t,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=e,u=t?Ga(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Co(u),ref:t&&t.ref?s&&r?B(r)?r.concat(qs(t)):[r,qs(t)]:qs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ns(e.ssContent),ssFallback:e.ssFallback&&ns(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&n&&ci(c,a.clone(c)),c}function Ba(e=" ",t=0){return tt(un,null,e,t)}function ct(e="",t=!1){return t?(ue(),Ua(Ot,null,e)):tt(Ot,null,e)}function Xe(e){return e==null||typeof e=="boolean"?tt(Ot):B(e)?tt(Me,null,e.slice()):Eo(e)?bt(e):tt(un,null,String(e))}function bt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ns(e)}function hi(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(B(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),hi(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!co(t)?t._ctx=Ze:i===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else q(t)?(t={default:t,_ctx:Ze},s=32):(t=String(t),n&64?(s=16,t=[Ba(t)]):s=8);e.children=t,e.shapeFlag|=s}function Ga(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=xt([t.class,n.class]));else if(i==="style")t.style=Zn([t.style,n.style]);else if(sn(i)){const r=t[i],o=n[i];o&&r!==o&&!(B(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=n[i])}return t}function Qe(e,t,s,n=null){st(e,t,7,[s,n])}const qa=ro();let Va=0;function Wa(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||qa,r={uid:Va++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new dl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uo(n,i),emitsOptions:oo(n,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:n.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ca.bind(null,r),e.ce&&e.ce(r),r}let Re=null;const Ya=()=>Re||Ze;let tn,Gn;{const e=on(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};tn=t("__VUE_INSTANCE_SETTERS__",s=>Re=s),Gn=t("__VUE_SSR_SETTERS__",s=>Os=s)}const Ms=e=>{const t=Re;return tn(e),e.scope.on(),()=>{e.scope.off(),tn(t)}},ki=()=>{Re&&Re.scope.off(),tn(null)};function So(e){return e.vnode.shapeFlag&4}let Os=!1;function Qa(e,t=!1,s=!1){t&&Gn(t);const{props:n,children:i}=e.vnode,r=So(e);Ta(e,n,r,t),Ma(e,i,s||t);const o=r?Ja(e,t):void 0;return t&&Gn(!1),o}function Ja(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,da);const{setup:n}=s;if(n){ft();const i=e.setupContext=n.length>1?Xa(e):null,r=Ms(e),o=Ns(n,e,0,[e.props,i]),l=Cr(o);if(ut(),r(),(l||e.sp)&&!bs(e)&&Zr(e),l){if(o.then(ki,ki),t)return o.then(a=>{Ki(e,a)}).catch(a=>{an(a,e,0)});e.asyncDep=o}else Ki(e,o)}else xo(e)}function Ki(e,t,s){q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:oe(t)&&(e.setupState=Gr(t)),xo(e)}function xo(e,t,s){const n=e.type;e.render||(e.render=n.render||et);{const i=Ms(e);ft();try{pa(e)}finally{ut(),i()}}}const za={get(e,t){return Se(e,"get",""),e[t]}};function Xa(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,za),slots:e.slots,emit:e.emit,expose:t}}function di(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gr(Pl(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ys)return ys[s](e)},has(t,s){return s in t||s in ys}})):e.proxy}function Za(e){return q(e)&&"__vccOpts"in e}const qn=(e,t)=>Kl(e,t,Os),ec="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;const Ui=typeof window<"u"&&window.trustedTypes;if(Ui)try{Vn=Ui.createPolicy("vue",{createHTML:e=>e})}catch{}const Ao=Vn?e=>Vn.createHTML(e):e=>e,tc="http://www.w3.org/2000/svg",sc="http://www.w3.org/1998/Math/MathML",lt=typeof document<"u"?document:null,ji=lt&&lt.createElement("template"),nc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?lt.createElementNS(tc,e):t==="mathml"?lt.createElementNS(sc,e):s?lt.createElement(e,{is:s}):lt.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>lt.createTextNode(e),createComment:e=>lt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>lt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,r){const o=s?s.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{ji.innerHTML=Ao(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=ji.content;if(n==="svg"||n==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ic=Symbol("_vtc");function rc(e,t,s){const n=e[ic];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Hi=Symbol("_vod"),oc=Symbol("_vsh"),lc=Symbol(""),ac=/(?:^|;)\s*display\s*:/;function cc(e,t,s){const n=e.style,i=ce(s);let r=!1;if(s&&!i){if(t)if(ce(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&Vs(n,l,"")}else for(const o in t)s[o]==null&&Vs(n,o,"");for(const o in s)o==="display"&&(r=!0),Vs(n,o,s[o])}else if(i){if(t!==s){const o=n[lc];o&&(s+=";"+o),n.cssText=s,r=ac.test(s)}}else t&&e.removeAttribute("style");Hi in e&&(e[Hi]=r?n.display:"",e[oc]&&(n.display="none"))}const Bi=/\s*!important$/;function Vs(e,t,s){if(B(s))s.forEach(n=>Vs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=fc(e,t);Bi.test(s)?e.setProperty(Gt(n),s.replace(Bi,""),"important"):e[n]=s}}const Gi=["Webkit","Moz","ms"],An={};function fc(e,t){const s=An[t];if(s)return s;let n=wt(t);if(n!=="filter"&&n in e)return An[t]=n;n=Ar(n);for(let i=0;i<Gi.length;i++){const r=Gi[i]+n;if(r in e)return An[t]=r}return t}const qi="http://www.w3.org/1999/xlink";function Vi(e,t,s,n,i,r=hl(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(qi,t.slice(6,t.length)):e.setAttributeNS(qi,t,s):s==null||r&&!Or(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Tt(s)?String(s):s)}function Wi(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Ao(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=s==null?e.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in e))&&(e.value=a),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Or(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(i||t)}function uc(e,t,s,n){e.addEventListener(t,s,n)}function hc(e,t,s,n){e.removeEventListener(t,s,n)}const Yi=Symbol("_vei");function dc(e,t,s,n,i=null){const r=e[Yi]||(e[Yi]={}),o=r[t];if(n&&o)o.value=n;else{const[l,a]=pc(t);if(n){const u=r[t]=mc(n,i);uc(e,l,u,a)}else o&&(hc(e,l,o,a),r[t]=void 0)}}const Qi=/(?:Once|Passive|Capture)$/;function pc(e){let t;if(Qi.test(e)){t={};let n;for(;n=e.match(Qi);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gt(e.slice(2)),t]}let wn=0;const gc=Promise.resolve(),_c=()=>wn||(gc.then(()=>wn=0),wn=Date.now());function mc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;st(vc(n,s.value),t,5,[n])};return s.value=e,s.attached=_c(),s}function vc(e,t){if(B(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,bc=(e,t,s,n,i,r)=>{const o=i==="svg";t==="class"?rc(e,n,o):t==="style"?cc(e,s,n):sn(t)?Jn(t)||dc(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yc(e,t,n,o))?(Wi(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Vi(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ce(n))?Wi(e,wt(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Vi(e,t,n,o))};function yc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ji(t)&&q(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ji(t)&&ce(s)?!1:t in e}const Ec=ve({patchProp:bc},nc);let zi;function Cc(){return zi||(zi=Pa(Ec))}const Sc=(...e)=>{const t=Cc().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=Ac(n);if(!i)return;const r=t._component;!q(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,xc(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function xc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ac(e){return ce(e)?document.querySelector(e):e}const wc={class:"grid grid-cols-8 grid-rows-8 w-full max-w-[600px] aspect-square border-4 border-[#333] shadow-2xl rounded-sm overflow-hidden select-none"},Oc=["onClick"],Tc={key:2,class:"absolute w-1/3 h-1/3 rounded-full bg-black/20 z-10 pointer-events-none"},Ic={key:3,class:"w-full h-full z-20 p-1 md:p-1.5 transition-transform duration-200 hover:scale-110"},Rc=["src"],Nc=Xr({__name:"ChessBoard",props:{board:{},turn:{},lastMove:{},legalMoves:{},getLegalMoves:{type:Function}},emits:["move"],setup(e,{emit:t}){const s=e,n=t,i=Le(null),r=Le([]),o=(c,p)=>`/${p}${c.toUpperCase()}.svg`,l=c=>{if(!i.value){const p=s.board.flat().find(h=>(h==null?void 0:h.square)===c);if(p&&p.color===s.turn){i.value=c;const h=s.getLegalMoves(c);r.value=h.map(y=>y.to)}return}if(i.value===c){i.value=null,r.value=[];return}if(r.value.includes(c))n("move",{from:i.value,to:c}),i.value=null,r.value=[];else{const p=s.board.flat().find(h=>(h==null?void 0:h.square)===c);if(p&&p.color===s.turn){i.value=c;const h=s.getLegalMoves(c);r.value=h.map(y=>y.to)}else i.value=null,r.value=[]}},a=["a","b","c","d","e","f","g","h"],u=["8","7","6","5","4","3","2","1"];return(c,p)=>(ue(),ge("div",wc,[(ue(),ge(Me,null,Kn(u,(h,y)=>(ue(),ge(Me,{key:h},[(ue(),ge(Me,null,Kn(a,(E,R)=>{var K,j;return W("div",{key:E+h,class:xt(["relative flex items-center justify-center w-full h-full text-4xl",[(y+R)%2===0?"bg-board-light":"bg-board-dark",i.value===E+h?"!bg-yellow-400/80":"",r.value.includes(E+h)?"cursor-pointer":"",((K=e.lastMove)==null?void 0:K.from)===E+h||((j=e.lastMove)==null?void 0:j.to)===E+h?"bg-yellow-200/50":""]]),onClick:Y=>l(E+h)},[R===0?(ue(),ge("span",{key:0,class:xt(["absolute top-0.5 left-1 text-[10px] sm:text-xs font-bold",(y+R)%2===0?"text-board-dark":"text-board-light"])},ze(h),3)):ct("",!0),y===7?(ue(),ge("span",{key:1,class:xt(["absolute bottom-0.5 right-1 text-[10px] sm:text-xs font-bold",(y+R)%2===0?"text-board-dark":"text-board-light"])},ze(E),3)):ct("",!0),r.value.includes(E+h)?(ue(),ge("div",Tc)):ct("",!0),e.board[y][R]?(ue(),ge("div",Ic,[W("img",{src:o(e.board[y][R].type,e.board[y][R].color),class:"w-full h-full drop-shadow-md select-none",draggable:"false"},null,8,Rc)])):ct("",!0)],10,Oc)}),64))],64))),64))]))}}),Mc=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},$c=Mc(Nc,[["__scopeId","data-v-932953dd"]]);function Pc(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function Lc(e,t,s,n,i){const r={move:e,variations:i};return t&&(r.suffix=t),s&&(r.nag=s),n!==null&&(r.comment=n),r}function Fc(...e){const[t,...s]=e;let n=t;for(const i of s)i!==null&&(n.variations=[i,...i.variations],i.variations=[],n=i);return t}function Dc(e,t){if(t.marker&&t.marker.comment){let s=t.root;for(;;){const n=s.variations[0];if(!n){s.comment=t.marker.comment;break}s=n}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function kc(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}function is(e,t,s,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,is.prototype),i.expected=t,i.found=s,i.location=n,i.name="SyntaxError",i}kc(is,Error);function On(e,t,s){return s=s||" ",e.length>t?e:(t-=e.length,s+=s.repeat(t),e+s.slice(0,t))}is.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var s=null,n;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){s=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+r.line+":"+r.column;if(s){var l=this.location.end,a=On("",r.line.toString().length," "),u=s[i.line-1],c=i.line===l.line?l.column:u.length+1,p=c-i.column||1;t+=`
 --> `+o+`
`+a+` |
`+r.line+" | "+u+`
`+a+" | "+On("",i.column-1," ")+On("",p,"^")}else t+=`
 at `+o}return t};is.buildMessage=function(e,t){var s={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var c=u.parts.map(function(p){return Array.isArray(p)?r(p[0])+"-"+r(p[1]):r(p)});return"["+(u.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function r(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function o(u){return s[u.type](u)}function l(u){var c=u.map(o),p,h;if(c.sort(),c.length>0){for(p=1,h=1;p<c.length;p++)c[p-1]!==c[p]&&(c[h]=c[p],h++);c.length=h}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}function a(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+l(e)+" but "+a(t)+" found."};function Kc(e,t){t=t!==void 0?t:{};var s={},n=t.grammarSource,i={pgn:vi},r=vi,o="[",l='"',a="]",u=".",c="O-O-O",p="O-O",h="0-0-0",y="0-0",E="$",R="{",K="}",j=";",Y="(",X=")",$="1-0",G="0-1",_e="1/2-1/2",be="*",De=/^[a-zA-Z]/,It=/^[^"]/,ke=/^[0-9]/,pt=/^[.]/,Rt=/^[a-zA-Z1-8\-=]/,qt=/^[+#]/,Vt=/^[!?]/,rs=/^[^}]/,he=/^[^\r\n]/,se=/^[ \t\r\n]/,te=Be("tag pair"),nt=de("[",!1),Nt=de('"',!1),it=de("]",!1),Ke=Be("tag name"),Wt=Ye([["a","z"],["A","Z"]],!1,!1),dn=Be("tag value"),Ps=Ye(['"'],!0,!1),Mt=Be("move number"),rt=Ye([["0","9"]],!1,!1),os=de(".",!1),ls=Ye(["."],!1,!1),$t=Be("standard algebraic notation"),gi=de("O-O-O",!1),f=de("O-O",!1),d=de("0-0-0",!1),b=de("0-0",!1),A=Ye([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),C=Ye(["+","#"],!1,!1),S=Be("suffix annotation"),I=Ye(["!","?"],!1,!1),O=Be("NAG"),w=de("$",!1),x=Be("brace comment"),F=de("{",!1),N=Ye(["}"],!0,!1),M=de("}",!1),U=Be("rest of line comment"),V=de(";",!1),Z=Ye(["\r",`
`],!0,!1),Q=Be("variation"),ye=de("(",!1),Ee=de(")",!1),Ue=Be("game termination marker"),je=de("1-0",!1),Pt=de("0-1",!1),Ls=de("1/2-1/2",!1),we=de("*",!1),He=Be("whitespace"),as=Ye([" ","	","\r",`
`],!1,!1),Fs=function(g,m){return Dc(g,m)},Mo=function(g){return Object.fromEntries(g)},$o=function(g,m){return[g,m]},Po=function(g,m){return{root:g,marker:m}},Lo=function(g,m){return Fc(Pc(g),...m.flat())},Fo=function(g,m,v,L,D){return Lc(g,m,v,L,D)},Do=function(g){return g},ko=function(g){return g.replace(/[\r\n]+/g," ")},Ko=function(g){return g.trim()},Uo=function(g){return g},jo=function(g,m){return{result:g,comment:m}},_=t.peg$currPos|0,Yt=[{line:1,column:1}],qe=_,Ds=t.peg$maxFailExpected||[],T=t.peg$silentFails|0,cs;if(t.startRule){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');r=i[t.startRule]}function de(g,m){return{type:"literal",text:g,ignoreCase:m}}function Ye(g,m,v){return{type:"class",parts:g,inverted:m,ignoreCase:v}}function Ho(){return{type:"end"}}function Be(g){return{type:"other",description:g}}function _i(g){var m=Yt[g],v;if(m)return m;if(g>=Yt.length)v=Yt.length-1;else for(v=g;!Yt[--v];);for(m=Yt[v],m={line:m.line,column:m.column};v<g;)e.charCodeAt(v)===10?(m.line++,m.column=1):m.column++,v++;return Yt[g]=m,m}function mi(g,m,v){var L=_i(g),D=_i(m),ee={source:n,start:{offset:g,line:L.line,column:L.column},end:{offset:m,line:D.line,column:D.column}};return ee}function P(g){_<qe||(_>qe&&(qe=_,Ds=[]),Ds.push(g))}function Bo(g,m,v){return new is(is.buildMessage(g,m),g,m,v)}function vi(){var g,m,v;return g=_,m=Go(),v=Wo(),g=Fs(m,v),g}function Go(){var g,m,v;for(g=_,m=[],v=bi();v!==s;)m.push(v),v=bi();return v=Oe(),g=Mo(m),g}function bi(){var g,m,v,L,D,ee,Lt;return T++,g=_,Oe(),e.charCodeAt(_)===91?(m=o,_++):(m=s,T===0&&P(nt)),m!==s?(Oe(),v=qo(),v!==s?(Oe(),e.charCodeAt(_)===34?(L=l,_++):(L=s,T===0&&P(Nt)),L!==s?(D=Vo(),e.charCodeAt(_)===34?(ee=l,_++):(ee=s,T===0&&P(Nt)),ee!==s?(Oe(),e.charCodeAt(_)===93?(Lt=a,_++):(Lt=s,T===0&&P(it)),Lt!==s?g=$o(v,D):(_=g,g=s)):(_=g,g=s)):(_=g,g=s)):(_=g,g=s)):(_=g,g=s),T--,g===s&&T===0&&P(te),g}function qo(){var g,m,v;if(T++,g=_,m=[],v=e.charAt(_),De.test(v)?_++:(v=s,T===0&&P(Wt)),v!==s)for(;v!==s;)m.push(v),v=e.charAt(_),De.test(v)?_++:(v=s,T===0&&P(Wt));else m=s;return m!==s?g=e.substring(g,_):g=m,T--,g===s&&(m=s,T===0&&P(Ke)),g}function Vo(){var g,m,v;for(T++,g=_,m=[],v=e.charAt(_),It.test(v)?_++:(v=s,T===0&&P(Ps));v!==s;)m.push(v),v=e.charAt(_),It.test(v)?_++:(v=s,T===0&&P(Ps));return g=e.substring(g,_),T--,m=s,T===0&&P(dn),g}function Wo(){var g,m,v;return g=_,m=yi(),Oe(),v=Zo(),v===s&&(v=null),Oe(),g=Po(m,v),g}function yi(){var g,m,v,L;for(g=_,m=pn(),m===s&&(m=null),v=[],L=Ei();L!==s;)v.push(L),L=Ei();return g=Lo(m,v),g}function Ei(){var g,m,v,L,D,ee,Lt,ks;if(g=_,Oe(),Yo(),Oe(),m=Qo(),m!==s){for(v=Jo(),v===s&&(v=null),L=[],D=Ci();D!==s;)L.push(D),D=Ci();for(D=Oe(),ee=pn(),ee===s&&(ee=null),Lt=[],ks=Si();ks!==s;)Lt.push(ks),ks=Si();g=Fo(m,v,L,ee,Lt)}else _=g,g=s;return g}function Yo(){var g,m,v,L,D,ee;for(T++,g=_,m=[],v=e.charAt(_),ke.test(v)?_++:(v=s,T===0&&P(rt));v!==s;)m.push(v),v=e.charAt(_),ke.test(v)?_++:(v=s,T===0&&P(rt));if(e.charCodeAt(_)===46?(v=u,_++):(v=s,T===0&&P(os)),v!==s){for(L=Oe(),D=[],ee=e.charAt(_),pt.test(ee)?_++:(ee=s,T===0&&P(ls));ee!==s;)D.push(ee),ee=e.charAt(_),pt.test(ee)?_++:(ee=s,T===0&&P(ls));m=[m,v,L,D],g=m}else _=g,g=s;return T--,g===s&&(m=s,T===0&&P(Mt)),g}function Qo(){var g,m,v,L,D,ee;if(T++,g=_,m=_,e.substr(_,5)===c?(v=c,_+=5):(v=s,T===0&&P(gi)),v===s&&(e.substr(_,3)===p?(v=p,_+=3):(v=s,T===0&&P(f)),v===s&&(e.substr(_,5)===h?(v=h,_+=5):(v=s,T===0&&P(d)),v===s&&(e.substr(_,3)===y?(v=y,_+=3):(v=s,T===0&&P(b)),v===s))))if(v=_,L=e.charAt(_),De.test(L)?_++:(L=s,T===0&&P(Wt)),L!==s){if(D=[],ee=e.charAt(_),Rt.test(ee)?_++:(ee=s,T===0&&P(A)),ee!==s)for(;ee!==s;)D.push(ee),ee=e.charAt(_),Rt.test(ee)?_++:(ee=s,T===0&&P(A));else D=s;D!==s?(L=[L,D],v=L):(_=v,v=s)}else _=v,v=s;return v!==s?(L=e.charAt(_),qt.test(L)?_++:(L=s,T===0&&P(C)),L===s&&(L=null),v=[v,L],m=v):(_=m,m=s),m!==s?g=e.substring(g,_):g=m,T--,g===s&&(m=s,T===0&&P($t)),g}function Jo(){var g,m,v;for(T++,g=_,m=[],v=e.charAt(_),Vt.test(v)?_++:(v=s,T===0&&P(I));v!==s;)m.push(v),m.length>=2?v=s:(v=e.charAt(_),Vt.test(v)?_++:(v=s,T===0&&P(I)));return m.length<1?(_=g,g=s):g=m,T--,g===s&&(m=s,T===0&&P(S)),g}function Ci(){var g,m,v,L,D;if(T++,g=_,Oe(),e.charCodeAt(_)===36?(m=E,_++):(m=s,T===0&&P(w)),m!==s){if(v=_,L=[],D=e.charAt(_),ke.test(D)?_++:(D=s,T===0&&P(rt)),D!==s)for(;D!==s;)L.push(D),D=e.charAt(_),ke.test(D)?_++:(D=s,T===0&&P(rt));else L=s;L!==s?v=e.substring(v,_):v=L,v!==s?g=Do(v):(_=g,g=s)}else _=g,g=s;return T--,g===s&&T===0&&P(O),g}function pn(){var g;return g=zo(),g===s&&(g=Xo()),g}function zo(){var g,m,v,L,D;if(T++,g=_,e.charCodeAt(_)===123?(m=R,_++):(m=s,T===0&&P(F)),m!==s){for(v=_,L=[],D=e.charAt(_),rs.test(D)?_++:(D=s,T===0&&P(N));D!==s;)L.push(D),D=e.charAt(_),rs.test(D)?_++:(D=s,T===0&&P(N));v=e.substring(v,_),e.charCodeAt(_)===125?(L=K,_++):(L=s,T===0&&P(M)),L!==s?g=ko(v):(_=g,g=s)}else _=g,g=s;return T--,g===s&&(m=s,T===0&&P(x)),g}function Xo(){var g,m,v,L,D;if(T++,g=_,e.charCodeAt(_)===59?(m=j,_++):(m=s,T===0&&P(V)),m!==s){for(v=_,L=[],D=e.charAt(_),he.test(D)?_++:(D=s,T===0&&P(Z));D!==s;)L.push(D),D=e.charAt(_),he.test(D)?_++:(D=s,T===0&&P(Z));v=e.substring(v,_),g=Ko(v)}else _=g,g=s;return T--,g===s&&(m=s,T===0&&P(U)),g}function Si(){var g,m,v,L;return T++,g=_,Oe(),e.charCodeAt(_)===40?(m=Y,_++):(m=s,T===0&&P(ye)),m!==s?(v=yi(),v!==s?(Oe(),e.charCodeAt(_)===41?(L=X,_++):(L=s,T===0&&P(Ee)),L!==s?g=Uo(v):(_=g,g=s)):(_=g,g=s)):(_=g,g=s),T--,g===s&&T===0&&P(Q),g}function Zo(){var g,m,v;return T++,g=_,e.substr(_,3)===$?(m=$,_+=3):(m=s,T===0&&P(je)),m===s&&(e.substr(_,3)===G?(m=G,_+=3):(m=s,T===0&&P(Pt)),m===s&&(e.substr(_,7)===_e?(m=_e,_+=7):(m=s,T===0&&P(Ls)),m===s&&(e.charCodeAt(_)===42?(m=be,_++):(m=s,T===0&&P(we))))),m!==s?(Oe(),v=pn(),v===s&&(v=null),g=jo(m,v)):(_=g,g=s),T--,g===s&&(m=s,T===0&&P(Ue)),g}function Oe(){var g,m;for(T++,g=[],m=e.charAt(_),se.test(m)?_++:(m=s,T===0&&P(as));m!==s;)g.push(m),m=e.charAt(_),se.test(m)?_++:(m=s,T===0&&P(as));return T--,m=s,T===0&&P(He),g}if(cs=r(),t.peg$library)return{peg$result:cs,peg$currPos:_,peg$FAILED:s,peg$maxFailExpected:Ds,peg$maxFailPos:qe};if(cs!==s&&_===e.length)return cs;throw cs!==s&&_<e.length&&P(Ho()),Bo(Ds,qe<e.length?e.charAt(qe):null,qe<e.length?mi(qe,qe+1):mi(qe,qe))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Ws=0xffffffffffffffffn;function Tn(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function Xi(e,t){return e*t&Ws}function Uc(e){return function(){let t=BigInt(e&Ws),s=BigInt(e>>64n&Ws);const n=Xi(Tn(Xi(t,5n),7n),9n);return s^=t,t=(Tn(t,24n)^s^s<<16n)&Ws,s=Tn(s,37n),e=s<<64n|t,n}}const hn=Uc(0xa187eb39cdcaed8f31c4b365b102e01en),jc=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>hn()))),Hc=Array.from({length:8},()=>hn()),Bc=Array.from({length:16},()=>hn()),In=hn(),Ce="w",$e="b",ae="p",Wn="n",Ys="b",ps="r",yt="q",fe="k",Rn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Hs{constructor(t,s){re(this,"color");re(this,"from");re(this,"to");re(this,"piece");re(this,"captured");re(this,"promotion");re(this,"flags");re(this,"san");re(this,"lan");re(this,"before");re(this,"after");const{color:n,piece:i,from:r,to:o,flags:l,captured:a,promotion:u}=s,c=pe(r),p=pe(o);this.color=n,this.piece=i,this.from=c,this.to=p,this.san=t._moveToSan(s,t._moves({legal:!0})),this.lan=c+p,this.before=t.fen(),t._makeMove(s),this.after=t.fen(),t._undoMove(),this.flags="";for(const h in H)H[h]&l&&(this.flags+=kt[h]);a&&(this.captured=a),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(kt.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(kt.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(kt.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(kt.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(kt.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(kt.BIG_PAWN)>-1}}const me=-1,kt={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},H={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Yn={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Gc={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},qc={...Yn,...Gc},k={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Nn={b:[16,32,17,15],w:[-16,-32,-17,-15]},Zi={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Vc=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Wc=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Yc={p:1,n:2,b:4,r:8,q:16,k:32},Qc="pnbrqkPNBRQK",er=[Wn,Ys,ps,yt],Jc=7,zc=6,Xc=1,Zc=0,Bs={[fe]:H.KSIDE_CASTLE,[yt]:H.QSIDE_CASTLE},gt={w:[{square:k.a1,flag:H.QSIDE_CASTLE},{square:k.h1,flag:H.KSIDE_CASTLE}],b:[{square:k.a8,flag:H.QSIDE_CASTLE},{square:k.h8,flag:H.KSIDE_CASTLE}]},ef={b:Xc,w:zc},Mn="--";function Ht(e){return e>>4}function Ts(e){return e&15}function wo(e){return"0123456789".indexOf(e)!==-1}function pe(e){const t=Ts(e),s=Ht(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(s,s+1)}function hs(e){return e===Ce?$e:Ce}function tf(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(t[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=t[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let l=0,a=!1;for(let u=0;u<i[o].length;u++)if(wo(i[o][u])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(i[o][u],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:l}of r){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function sf(e,t){const s=e.from,n=e.to,i=e.piece;let r=0,o=0,l=0;for(let a=0,u=t.length;a<u;a++){const c=t[a].from,p=t[a].to,h=t[a].piece;i===h&&s!==c&&n===p&&(r++,Ht(s)===Ht(c)&&o++,Ts(s)===Ts(c)&&l++)}return r>0?o>0&&l>0?pe(s):l>0?pe(s).charAt(1):pe(s).charAt(0):""}function _t(e,t,s,n,i,r=void 0,o=H.NORMAL){const l=Ht(n);if(i===ae&&(l===Jc||l===Zc))for(let a=0;a<er.length;a++){const u=er[a];e.push({color:t,from:s,to:n,piece:i,captured:r,promotion:u,flags:o|H.PROMOTION})}else e.push({color:t,from:s,to:n,piece:i,captured:r,flags:o})}function tr(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:ae:(t=t.toLowerCase(),t==="o"?fe:t)}function $n(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class nf{constructor(t=Rn,{skipValidation:s=!1}={}){re(this,"_board",new Array(128));re(this,"_turn",Ce);re(this,"_header",{});re(this,"_kings",{w:me,b:me});re(this,"_epSquare",-1);re(this,"_halfMoves",0);re(this,"_moveNumber",0);re(this,"_history",[]);re(this,"_comments",{});re(this,"_castling",{w:0,b:0});re(this,"_hash",0n);re(this,"_positionCount",new Map);this.load(t,{skipValidation:s})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:me,b:me},this._turn=Ce,this._castling={w:0,b:0},this._epSquare=me,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...qc},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:s=!1,preserveHeaders:n=!1}={}){let i=t.split(/\s+/);if(i.length>=2&&i.length<6){const l=["-","-","0","1"];t=i.concat(l.slice(-(6-i.length))).join(" ")}if(i=t.split(/\s+/),!s){const{ok:l,error:a}=tf(t);if(!l)throw new Error(a)}const r=i[0];let o=0;this.clear({preserveHeaders:n});for(let l=0;l<r.length;l++){const a=r.charAt(l);if(a==="/")o+=8;else if(wo(a))o+=parseInt(a,10);else{const u=a<"a"?Ce:$e;this._put({type:a.toLowerCase(),color:u},pe(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=H.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=H.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=H.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=H.QSIDE_CASTLE),this._epSquare=i[3]==="-"?me:k[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var o,l;let s=0,n="";for(let a=k.a8;a<=k.h1;a++){if(this._board[a]){s>0&&(n+=s,s=0);const{color:u,type:c}=this._board[a];n+=u===Ce?c.toUpperCase():c.toLowerCase()}else s++;a+1&136&&(s>0&&(n+=s),a!==k.h1&&(n+="/"),s=0,a+=8)}let i="";this._castling[Ce]&H.KSIDE_CASTLE&&(i+="K"),this._castling[Ce]&H.QSIDE_CASTLE&&(i+="Q"),this._castling[$e]&H.KSIDE_CASTLE&&(i+="k"),this._castling[$e]&H.QSIDE_CASTLE&&(i+="q"),i=i||"-";let r="-";if(this._epSquare!==me)if(t)r=pe(this._epSquare);else{const a=this._epSquare+(this._turn===Ce?16:-16),u=[a+1,a-1];for(const c of u){if(c&136)continue;const p=this._turn;if(((o=this._board[c])==null?void 0:o.color)===p&&((l=this._board[c])==null?void 0:l.type)===ae){this._makeMove({color:p,from:c,to:this._epSquare,piece:ae,captured:ae,flags:H.EP_CAPTURE});const h=!this._isKingAttacked(p);if(this._undoMove(),h){r=pe(this._epSquare);break}}}}return[n,this._turn,i,r,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:s,type:n}=this._board[t],i={w:0,b:1}[s],r={p:0,n:1,b:2,r:3,q:4,k:5}[n];return jc[i][r][t]}_epKey(){return this._epSquare===me?0n:Hc[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return Bc[t]}_computeHash(){let t=0n;for(let s=k.a8;s<=k.h1;s++){if(s&136){s+=7;continue}this._board[s]&&(t^=this._pieceKey(s))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=In),t}_updateSetup(t){this._history.length>0||(t!==Rn?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Rn)}get(t){return this._board[k[t]]}findPiece(t){var n;const s=[];for(let i=k.a8;i<=k.h1;i++){if(i&136){i+=7;continue}!this._board[i]||((n=this._board[i])==null?void 0:n.color)!==t.color||this._board[i].color===t.color&&this._board[i].type===t.type&&s.push(pe(i))}return s}put({type:t,color:s},n){return this._put({type:t,color:s},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,s){this._hash^=this._pieceKey(t),this._board[t]=s,this._hash^=this._pieceKey(t)}_put({type:t,color:s},n){if(Qc.indexOf(t.toLowerCase())===-1||!(n in k))return!1;const i=k[n];if(t==fe&&!(this._kings[s]==me||this._kings[s]==i))return!1;const r=this._board[i];return r&&r.type===fe&&(this._kings[r.color]=me),this._set(i,{type:t,color:s}),t===fe&&(this._kings[s]=i),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const s=this.get(t);return this._clear(k[t]),s&&s.type===fe&&(this._kings[s.color]=me),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),s}_updateCastlingRights(){var n,i,r,o,l,a,u,c,p,h,y,E;this._hash^=this._castlingKey();const t=((n=this._board[k.e1])==null?void 0:n.type)===fe&&((i=this._board[k.e1])==null?void 0:i.color)===Ce,s=((r=this._board[k.e8])==null?void 0:r.type)===fe&&((o=this._board[k.e8])==null?void 0:o.color)===$e;(!t||((l=this._board[k.a1])==null?void 0:l.type)!==ps||((a=this._board[k.a1])==null?void 0:a.color)!==Ce)&&(this._castling.w&=-65),(!t||((u=this._board[k.h1])==null?void 0:u.type)!==ps||((c=this._board[k.h1])==null?void 0:c.color)!==Ce)&&(this._castling.w&=-33),(!s||((p=this._board[k.a8])==null?void 0:p.type)!==ps||((h=this._board[k.a8])==null?void 0:h.color)!==$e)&&(this._castling.b&=-65),(!s||((y=this._board[k.h8])==null?void 0:y.type)!==ps||((E=this._board[k.h8])==null?void 0:E.color)!==$e)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var r,o;if(this._epSquare===me)return;const t=this._epSquare+(this._turn===Ce?-16:16),s=this._epSquare+(this._turn===Ce?16:-16),n=[s+1,s-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((r=this._board[s])==null?void 0:r.color)!==hs(this._turn)||((o=this._board[s])==null?void 0:o.type)!==ae){this._hash^=this._epKey(),this._epSquare=me;return}const i=l=>{var a,u;return!(l&136)&&((a=this._board[l])==null?void 0:a.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===ae};n.some(i)||(this._hash^=this._epKey(),this._epSquare=me)}_attacked(t,s,n){const i=[];for(let r=k.a8;r<=k.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==t)continue;const o=this._board[r],l=r-s;if(l===0)continue;const a=l+119;if(Vc[a]&Yc[o.type]){if(o.type===ae){if(l>0&&o.color===Ce||l<=0&&o.color===$e)if(n)i.push(pe(r));else return!0;continue}if(o.type==="n"||o.type==="k")if(n){i.push(pe(r));continue}else return!0;const u=Wc[a];let c=r+u,p=!1;for(;c!==s;){if(this._board[c]!=null){p=!0;break}c+=u}if(!p)if(n){i.push(pe(r));continue}else return!0}}return n?i:!1}attackers(t,s){return s?this._attacked(s,k[t],!0):this._attacked(this._turn,k[t],!0)}_isKingAttacked(t){const s=this._kings[t];return s===-1?!1:this._attacked(hs(t),s)}hash(){return this._hash.toString(16)}isAttacked(t,s){return this._attacked(s,k[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},s=[];let n=0,i=0;for(let r=k.a8;r<=k.h1;r++){if(i=(i+1)%2,r&136){r+=7;continue}const o=this._board[r];o&&(t[o.type]=o.type in t?t[o.type]+1:1,o.type===Ys&&s.push(i),n++)}if(n===2)return!0;if(n===3&&(t[Ys]===1||t[Wn]===1))return!0;if(n===t[Ys]+2){let r=0;const o=s.length;for(let l=0;l<o;l++)r+=s[l];if(r===0||r===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:s=void 0,piece:n=void 0}={}){const i=this._moves({square:s,piece:n});return t?i.map(r=>new Hs(this,r)):i.map(r=>this._moveToSan(r,i))}_moves({legal:t=!0,piece:s=void 0,square:n=void 0}={}){var y;const i=n?n.toLowerCase():void 0,r=s==null?void 0:s.toLowerCase(),o=[],l=this._turn,a=hs(l);let u=k.a8,c=k.h1,p=!1;if(i)if(i in k)u=c=k[i],p=!0;else return[];for(let E=u;E<=c;E++){if(E&136){E+=7;continue}if(!this._board[E]||this._board[E].color===a)continue;const{type:R}=this._board[E];let K;if(R===ae){if(r&&r!==R)continue;K=E+Nn[l][0],this._board[K]||(_t(o,l,E,K,ae),K=E+Nn[l][1],ef[l]===Ht(E)&&!this._board[K]&&_t(o,l,E,K,ae,void 0,H.BIG_PAWN));for(let j=2;j<4;j++)K=E+Nn[l][j],!(K&136)&&(((y=this._board[K])==null?void 0:y.color)===a?_t(o,l,E,K,ae,this._board[K].type,H.CAPTURE):K===this._epSquare&&_t(o,l,E,K,ae,ae,H.EP_CAPTURE))}else{if(r&&r!==R)continue;for(let j=0,Y=Zi[R].length;j<Y;j++){const X=Zi[R][j];for(K=E;K+=X,!(K&136);){if(!this._board[K])_t(o,l,E,K,R);else{if(this._board[K].color===l)break;_t(o,l,E,K,R,this._board[K].type,H.CAPTURE);break}if(R===Wn||R===fe)break}}}}if((r===void 0||r===fe)&&(!p||c===this._kings[l])){if(this._castling[l]&H.KSIDE_CASTLE){const E=this._kings[l],R=E+2;!this._board[E+1]&&!this._board[R]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,E+1)&&!this._attacked(a,R)&&_t(o,l,this._kings[l],R,fe,void 0,H.KSIDE_CASTLE)}if(this._castling[l]&H.QSIDE_CASTLE){const E=this._kings[l],R=E-2;!this._board[E-1]&&!this._board[E-2]&&!this._board[E-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,E-1)&&!this._attacked(a,R)&&_t(o,l,this._kings[l],R,fe,void 0,H.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return o;const h=[];for(let E=0,R=o.length;E<R;E++)this._makeMove(o[E]),this._isKingAttacked(l)||h.push(o[E]),this._undoMove();return h}move(t,{strict:s=!1}={}){let n=null;if(typeof t=="string")n=this._moveFromSan(t,s);else if(t===null)n=this._moveFromSan(Mn,s);else if(typeof t=="object"){const r=this._moves();for(let o=0,l=r.length;o<l;o++)if(t.from===pe(r[o].from)&&t.to===pe(r[o].to)&&(!("promotion"in r[o])||t.promotion===r[o].promotion)){n=r[o];break}}if(!n)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&n.flags&H.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new Hs(this,n);return this._makeMove(n),this._incPositionCount(),i}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,s){this._hash^=this._pieceKey(t),this._board[s]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(s)}_makeMove(t){var i,r,o,l;const s=this._turn,n=hs(s);if(this._push(t),t.flags&H.NULL_MOVE){s===$e&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=me;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&H.EP_CAPTURE&&(this._turn===$e?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:s})),this._board[t.to].type===fe){if(this._kings[s]=t.to,t.flags&H.KSIDE_CASTLE){const a=t.to-1,u=t.to+1;this._movePiece(u,a)}else if(t.flags&H.QSIDE_CASTLE){const a=t.to+1,u=t.to-2;this._movePiece(u,a)}this._castling[s]=0}if(this._castling[s]){for(let a=0,u=gt[s].length;a<u;a++)if(t.from===gt[s][a].square&&this._castling[s]&gt[s][a].flag){this._castling[s]^=gt[s][a].flag;break}}if(this._castling[n]){for(let a=0,u=gt[n].length;a<u;a++)if(t.to===gt[n][a].square&&this._castling[n]&gt[n][a].flag){this._castling[n]^=gt[n][a].flag;break}}if(this._hash^=this._castlingKey(),t.flags&H.BIG_PAWN){let a;s===$e?a=t.to-16:a=t.to+16,!(t.to-1&136)&&((i=this._board[t.to-1])==null?void 0:i.type)===ae&&((r=this._board[t.to-1])==null?void 0:r.color)===n||!(t.to+1&136)&&((o=this._board[t.to+1])==null?void 0:o.type)===ae&&((l=this._board[t.to+1])==null?void 0:l.color)===n?(this._epSquare=a,this._hash^=this._epKey()):this._epSquare=me}else this._epSquare=me;t.piece===ae?this._halfMoves=0:t.flags&(H.CAPTURE|H.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,s===$e&&this._moveNumber++,this._turn=n,this._hash^=In}undo(){const t=this._hash,s=this._undoMove();if(s){const n=new Hs(this,s);return this._decPositionCount(t),n}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const s=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=In;const n=this._turn,i=hs(n);if(s.flags&H.NULL_MOVE)return s;if(this._movePiece(s.to,s.from),s.piece&&(this._clear(s.from),this._set(s.from,{type:s.piece,color:n})),s.captured)if(s.flags&H.EP_CAPTURE){let r;n===$e?r=s.to-16:r=s.to+16,this._set(r,{type:ae,color:i})}else this._set(s.to,{type:s.captured,color:i});if(s.flags&(H.KSIDE_CASTLE|H.QSIDE_CASTLE)){let r,o;s.flags&H.KSIDE_CASTLE?(r=s.to+1,o=s.to-1):(r=s.to-2,o=s.to+1),this._movePiece(o,r)}return s}pgn({newline:t=`
`,maxWidth:s=0}={}){const n=[];let i=!1;for(const h in this._header)this._header[h]&&n.push(`[${h} "${this._header[h]}"]`+t),i=!0;i&&this._history.length&&n.push(t);const r=h=>{const y=this._comments[this.fen()];if(typeof y<"u"){const E=h.length>0?" ":"";h=`${h}${E}{${y}}`}return h},o=[];for(;this._history.length>0;)o.push(this._undoMove());const l=[];let a="";for(o.length===0&&l.push(r(""));o.length>0;){a=r(a);const h=o.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const y=`${this._moveNumber}. ...`;a=a?`${a} ${y}`:y}else h.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(a.length&&l.push(r(a)),l.push(this._header.Result||"*"),s===0)return n.join("")+l.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},c=function(h,y){for(const E of y.split(" "))if(E){if(h+E.length>s){for(;u();)h--;n.push(t),h=0}n.push(E),h+=E.length,n.push(" "),h++}return u()&&h--,h};let p=0;for(let h=0;h<l.length;h++){if(p+l[h].length>s&&l[h].includes("{")){p=c(p,l[h]);continue}p+l[h].length>s&&h!==0?(n[n.length-1]===" "&&n.pop(),n.push(t),p=0):h!==0&&(n.push(" "),p++),n.push(l[h]),p+=l[h].length}return n.join("")}header(...t){for(let s=0;s<t.length;s+=2)typeof t[s]=="string"&&typeof t[s+1]=="string"&&(this._header[t[s]]=t[s+1]);return this._header}setHeader(t,s){return this._header[t]=s??Yn[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Yn[t]||null,!0):!1}getHeaders(){const t={};for(const[s,n]of Object.entries(this._header))n!==null&&(t[s]=n);return t}loadPgn(t,{strict:s=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(t=t.replace(new RegExp(n,"g"),`
`));const i=Kc(t);this.reset();const r=i.headers;let o="";for(const u in r)u.toLowerCase()==="fen"&&(o=r[u]),this.header(u,r[u]);if(!s)o&&this.load(o,{preserveHeaders:!0});else if(r.SetUp==="1"){if(!("FEN"in r))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(r.FEN,{preserveHeaders:!0})}let l=i.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,s);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const a=i.result;a&&Object.keys(this._header).length&&this._header.Result!==a&&this.setHeader("Result",a)}_moveToSan(t,s){let n="";if(t.flags&H.KSIDE_CASTLE)n="O-O";else if(t.flags&H.QSIDE_CASTLE)n="O-O-O";else{if(t.flags&H.NULL_MOVE)return Mn;if(t.piece!==ae){const i=sf(t,s);n+=t.piece.toUpperCase()+i}t.flags&(H.CAPTURE|H.EP_CAPTURE)&&(t.piece===ae&&(n+=pe(t.from)[0]),n+="x"),n+=pe(t.to),t.promotion&&(n+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(t,s=!1){let n=$n(t);if(s||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Mn)return{color:this._turn,from:0,to:0,piece:"k",flags:H.NULL_MOVE};let i=tr(n),r=this._moves({legal:!0,piece:i});for(let h=0,y=r.length;h<y;h++)if(n===$n(this._moveToSan(r[h],r)))return r[h];if(s)return null;let o,l,a,u,c,p=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(o=l[1],a=l[2],u=l[3],c=l[4],a.length==1&&(p=!0)):(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(o=l[1],a=l[2],u=l[3],c=l[4],a.length==1&&(p=!0))),i=tr(n),r=this._moves({legal:!0,piece:o||i}),!u)return null;for(let h=0,y=r.length;h<y;h++)if(a){if((!o||o.toLowerCase()==r[h].piece)&&k[a]==r[h].from&&k[u]==r[h].to&&(!c||c.toLowerCase()==r[h].promotion))return r[h];if(p){const E=pe(r[h].from);if((!o||o.toLowerCase()==r[h].piece)&&k[u]==r[h].to&&(a==E[0]||a==E[1])&&(!c||c.toLowerCase()==r[h].promotion))return r[h]}}else if(n===$n(this._moveToSan(r[h],r)).replace("x",""))return r[h];return null}ascii(){let t=`   +------------------------+
`;for(let s=k.a8;s<=k.h1;s++){if(Ts(s)===0&&(t+=" "+"87654321"[Ht(s)]+" |"),this._board[s]){const n=this._board[s].type,r=this._board[s].color===Ce?n.toUpperCase():n.toLowerCase();t+=" "+r+" "}else t+=" . ";s+1&136&&(t+=`|
`,s+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const s=this._moves({legal:!1});let n=0;const i=this._turn;for(let r=0,o=s.length;r<o;r++)this._makeMove(s[r]),this._isKingAttacked(i)||(t-1>0?n+=this.perft(t-1):n++),this._undoMove();return n}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let s=[];for(let n=k.a8;n<=k.h1;n++)this._board[n]==null?s.push(null):s.push({square:pe(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(t.push(s),s=[],n+=8);return t}squareColor(t){if(t in k){const s=k[t];return(Ht(s)+Ts(s))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const s=[],n=[];for(;this._history.length>0;)s.push(this._undoMove());for(;;){const i=s.pop();if(!i)break;t?n.push(new Hs(this,i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const s=this._positionCount.get(t)??0;s===1?this._positionCount.delete(t):this._positionCount.set(t,s-1)}_pruneComments(){const t=[],s={},n=i=>{i in this._comments&&(s[i]=this._comments[i])};for(;this._history.length>0;)t.push(this._undoMove());for(n(this.fen());;){const i=t.pop();if(!i)break;this._makeMove(i),n(this.fen())}this._comments=s}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const s=this._comments[t];return delete this._comments[t],{fen:t,comment:s}})}setCastlingRights(t,s){for(const i of[fe,yt])s[i]!==void 0&&(s[i]?this._castling[t]|=Bs[i]:this._castling[t]&=~Bs[i]);this._updateCastlingRights();const n=this.getCastlingRights(t);return(s[fe]===void 0||s[fe]===n[fe])&&(s[yt]===void 0||s[yt]===n[yt])}getCastlingRights(t){return{[fe]:(this._castling[t]&Bs[fe])!==0,[yt]:(this._castling[t]&Bs[yt])!==0}}moveNumber(){return this._moveNumber}}function rf(){const e=new nf,t=Le(e.fen()),s=Le(e.turn()),n=Le(e.isGameOver()),i=Le(e.isCheckmate()),r=Le(e.isDraw()),o=Le(e.history()),l=qn(()=>(t.value,e.board())),a=()=>{t.value=e.fen(),s.value=e.turn(),n.value=e.isGameOver(),i.value=e.isCheckmate(),r.value=e.isDraw(),o.value=e.history()},u=()=>{e.reset(),a()},c=y=>{try{const E=e.move(y);if(E)return a(),E}catch{return null}return null},p=y=>e.moves({square:y,verbose:!0}),h=()=>e.moves();return{chess:e,fen:t,turn:s,isGameOver:n,isCheckmate:i,isDraw:r,history:o,board:l,boardState:qn(()=>(t.value,e.board())),makeMove:c,resetGame:u,getLegalMoves:p,getLegalMovesSAN:h}}var sr;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(sr||(sr={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(nr||(nr={}));var ir;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ir||(ir={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=["user","model","function","system"];var or;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(or||(or={}));var lr;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(lr||(lr={}));var ar;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ar||(ar={}));var cr;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(cr||(cr={}));var Cs;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Cs||(Cs={}));var fr;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(fr||(fr={}));var ur;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(ur||(ur={}));var hr;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(hr||(hr={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Jt extends xe{constructor(t,s){super(t),this.response=s}}class Oo extends xe{constructor(t,s,n,i){super(t),this.status=s,this.statusText=n,this.errorDetails=i}}class At extends xe{}class To extends xe{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="https://generativelanguage.googleapis.com",lf="v1beta",af="0.24.1",cf="genai-js";var Bt;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Bt||(Bt={}));class ff{constructor(t,s,n,i,r){this.model=t,this.task=s,this.apiKey=n,this.stream=i,this.requestOptions=r}toString(){var t,s;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||lf;let r=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||of}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function uf(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${cf}/${af}`),t.join(" ")}async function hf(e){var t;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",uf(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new At(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,r]of n.entries()){if(i==="x-goog-api-key")throw new At(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new At(`Header name ${i} can only be set using the apiClient field`);s.append(i,r)}}return s}async function df(e,t,s,n,i,r){const o=new ff(e,t,s,n,r);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},mf(r)),{method:"POST",headers:await hf(o),body:i})}}async function $s(e,t,s,n,i,r={},o=fetch){const{url:l,fetchOptions:a}=await df(e,t,s,n,i,r);return pf(l,a,o)}async function pf(e,t,s=fetch){let n;try{n=await s(e,t)}catch(i){gf(i,e)}return n.ok||await _f(n,e),n}function gf(e,t){let s=e;throw s.name==="AbortError"?(s=new To(`Request aborted when fetching ${t.toString()}: ${e.message}`),s.stack=e.stack):e instanceof Oo||e instanceof At||(s=new xe(`Error fetching from ${t.toString()}: ${e.message}`),s.stack=e.stack),s}async function _f(e,t){let s="",n;try{const i=await e.json();s=i.error.message,i.error.details&&(s+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new Oo(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,n)}function mf(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const s=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Qs(e.candidates[0]))throw new Jt(`${Et(e)}`,e);return vf(e)}else if(e.promptFeedback)throw new Jt(`Text not available. ${Et(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Qs(e.candidates[0]))throw new Jt(`${Et(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),dr(e)[0]}else if(e.promptFeedback)throw new Jt(`Function call not available. ${Et(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Qs(e.candidates[0]))throw new Jt(`${Et(e)}`,e);return dr(e)}else if(e.promptFeedback)throw new Jt(`Function call not available. ${Et(e)}`,e)},e}function vf(e){var t,s,n,i;const r=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.text&&r.push(o.text),o.executableCode&&r.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&r.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function dr(e){var t,s,n,i;const r=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&r.push(o.functionCall);if(r.length>0)return r}const bf=[Cs.RECITATION,Cs.SAFETY,Cs.LANGUAGE];function Qs(e){return!!e.finishReason&&bf.includes(e.finishReason)}function Et(e){var t,s,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const r=e.candidates[0];Qs(r)&&(i+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(i+=`: ${r.finishMessage}`))}return i}function Is(e){return this instanceof Is?(this.v=e,this):new Is(e)}function yf(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s.apply(e,t||[]),i,r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(y){return new Promise(function(E,R){r.push([h,y,E,R])>1||l(h,y)})})}function l(h,y){try{a(n[h](y))}catch(E){p(r[0][3],E)}}function a(h){h.value instanceof Is?Promise.resolve(h.value.v).then(u,c):p(r[0][2],h)}function u(h){l("next",h)}function c(h){l("throw",h)}function p(h,y){h(y),r.shift(),r.length&&l(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ef(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=xf(t),[n,i]=s.tee();return{stream:Sf(n),response:Cf(i)}}async function Cf(e){const t=[],s=e.getReader();for(;;){const{done:n,value:i}=await s.read();if(n)return pi(Af(t));t.push(i)}}function Sf(e){return yf(this,arguments,function*(){const s=e.getReader();for(;;){const{value:n,done:i}=yield Is(s.read());if(i)break;yield yield Is(pi(n))}})}function xf(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return r();function r(){return t.read().then(({value:o,done:l})=>{if(l){if(i.trim()){n.error(new xe("Failed to parse stream"));return}n.close();return}i+=o;let a=i.match(pr),u;for(;a;){try{u=JSON.parse(a[1])}catch{n.error(new xe(`Error parsing JSON response: "${a[1]}"`));return}n.enqueue(u),i=i.substring(a[0].length),a=i.match(pr)}return r()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new To("Request aborted when reading from the stream"):l=new xe("Error reading from the stream"),l})}}})}function Af(e){const t=e[e.length-1],s={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const r of n.candidates)if(s.candidates||(s.candidates=[]),s.candidates[i]||(s.candidates[i]={index:i}),s.candidates[i].citationMetadata=r.citationMetadata,s.candidates[i].groundingMetadata=r.groundingMetadata,s.candidates[i].finishReason=r.finishReason,s.candidates[i].finishMessage=r.finishMessage,s.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){s.candidates[i].content||(s.candidates[i].content={role:r.content.role||"user",parts:[]});const o={};for(const l of r.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),s.candidates[i].content.parts.push(o)}i++}n.usageMetadata&&(s.usageMetadata=n.usageMetadata)}return s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(e,t,s,n){const i=await $s(t,Bt.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),n);return Ef(i)}async function Ro(e,t,s,n){const r=await(await $s(t,Bt.GENERATE_CONTENT,e,!1,JSON.stringify(s),n)).json();return{response:pi(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Rs(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const s of e)typeof s=="string"?t.push({text:s}):t.push(s);return wf(t)}function wf(e){const t={role:"user",parts:[]},s={role:"function",parts:[]};let n=!1,i=!1;for(const r of e)"functionResponse"in r?(s.parts.push(r),i=!0):(t.parts.push(r),n=!0);if(n&&i)throw new xe("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new xe("No content is provided for sending chat message.");return n?t:s}function Of(e,t){var s;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(s=t==null?void 0:t.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new At("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const r=Rs(e);n.contents=[r]}return{generateContentRequest:n}}function gr(e){let t;return e.contents?t=e:t={contents:[Rs(e)]},e.systemInstruction&&(t.systemInstruction=No(e.systemInstruction)),t}function Tf(e){return typeof e=="string"||Array.isArray(e)?{content:Rs(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],If={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Rf(e){let t=!1;for(const s of e){const{role:n,parts:i}=s;if(!t&&n!=="user")throw new xe(`First content should be with role 'user', got ${n}`);if(!rr.includes(n))throw new xe(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(rr)}`);if(!Array.isArray(i))throw new xe("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new xe("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of i)for(const a of _r)a in l&&(r[a]+=1);const o=If[n];for(const l of _r)if(!o.includes(l)&&r[l]>0)throw new xe(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function mr(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const s=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(s===void 0||s.parts===void 0||s.parts.length===0)return!1;for(const n of s.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="SILENT_ERROR";class Nf{constructor(t,s,n,i={}){this.model=s,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Rf(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,s={}){var n,i,r,o,l,a;await this._sendPromise;const u=Rs(t),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(a=this.params)===null||a===void 0?void 0:a.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),s);let h;return this._sendPromise=this._sendPromise.then(()=>Ro(this._apiKey,this.model,c,p)).then(y=>{var E;if(mr(y.response)){this._history.push(u);const R=Object.assign({parts:[],role:"model"},(E=y.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(R)}else{const R=Et(y.response);R&&console.warn(`sendMessage() was unsuccessful. ${R}. Inspect response object for details.`)}h=y}).catch(y=>{throw this._sendPromise=Promise.resolve(),y}),await this._sendPromise,h}async sendMessageStream(t,s={}){var n,i,r,o,l,a;await this._sendPromise;const u=Rs(t),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(a=this.params)===null||a===void 0?void 0:a.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),s),h=Io(this._apiKey,this.model,c,p);return this._sendPromise=this._sendPromise.then(()=>h).catch(y=>{throw new Error(vr)}).then(y=>y.response).then(y=>{if(mr(y)){this._history.push(u);const E=Object.assign({},y.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=Et(y);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(y=>{y.message!==vr&&console.error(y)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(e,t,s,n){return(await $s(t,Bt.COUNT_TOKENS,e,!1,JSON.stringify(s),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(e,t,s,n){return(await $s(t,Bt.EMBED_CONTENT,e,!1,JSON.stringify(s),n)).json()}async function Pf(e,t,s,n){const i=s.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await $s(t,Bt.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,s,n={}){this.apiKey=t,this._requestOptions=n,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=No(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(t,s={}){var n;const i=gr(t),r=Object.assign(Object.assign({},this._requestOptions),s);return Ro(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),r)}async generateContentStream(t,s={}){var n;const i=gr(t),r=Object.assign(Object.assign({},this._requestOptions),s);return Io(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),r)}startChat(t){var s;return new Nf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},t),this._requestOptions)}async countTokens(t,s={}){const n=Of(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),s);return Mf(this.apiKey,this.model,n,i)}async embedContent(t,s={}){const n=Tf(t),i=Object.assign(Object.assign({},this._requestOptions),s);return $f(this.apiKey,this.model,n,i)}async batchEmbedContents(t,s={}){const n=Object.assign(Object.assign({},this._requestOptions),s);return Pf(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t){this.apiKey=t}getGenerativeModel(t,s){if(!t.model)throw new xe("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new br(this.apiKey,t,s)}getGenerativeModelFromCachedContent(t,s,n){if(!t.name)throw new At("Cached content must contain a `name` field.");if(!t.model)throw new At("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(s!=null&&s[o]&&t[o]&&(s==null?void 0:s[o])!==t[o]){if(o==="model"){const l=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===a)continue}throw new At(`Different value for "${o}" specified in modelParams (${s[o]}) and cachedContent (${t[o]})`)}const r=Object.assign(Object.assign({},s),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new br(this.apiKey,r,n)}}const Ff="AIzaSyBgil-7RGnx4Y9ar6yax360E9_i74ancPs",Df=new Lf(Ff),kf=Df.getGenerativeModel({model:"gemini-3-flash-preview"});function Kf(){const e=Le(!1),t=Le(""),s=Le(""),n=Le(null);return{isThinking:e,aiThought:t,aiTaunt:s,error:n,getBestMove:async(r,o,l)=>{e.value=!0,n.value=null,t.value="";const a=`
You are a Chess Grandmaster playing Black.
Current FEN: "${r}"
Legal Moves for Black: ${JSON.stringify(o)}
Game History: ${JSON.stringify(l.slice(-10))} (Last 10 moves)

Analyze the position deeply. Identify threats, opportunities, and positional advantages.
Select the single best move from the legal moves list to defeat the opponent (White).

Return your response strictly in the following JSON format (no markdown code blocks):
{
  "move": "e7e5", 
  "thought": "Brief strategic reasoning...",
  "taunt": "A short, witty, or slightly arrogant comment to the opponent."
}
    `.trim();try{const p=(await(await kf.generateContent(a)).response).text();if(console.log("Gemini Raw Response:",p),!p||!p.trim())throw console.warn("Gemini returned empty text."),new Error("Empty response from AI");const h=p.match(/\{[\s\S]*\}/);let y=p;h?y=h[0]:y=p.replace(/```json/g,"").replace(/```/g,"").trim();const E=JSON.parse(y);return t.value=E.thought,s.value=E.taunt,E.move}catch(u){if(console.error("Gemini AI Error:",u),n.value="AI failed to respond. "+u.message,o.length>0){const c=o[Math.floor(Math.random()*o.length)];return t.value="I am distracted... I'll just play this.",c}return null}finally{e.value=!1}}}}const Uf={class:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 md:p-8 font-sans"},jf={class:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-3 gap-8"},Hf={class:"lg:col-span-2 flex justify-center items-start"},Bf={class:"relative"},Gf={key:0,class:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-sm"},qf={class:"bg-gray-800 p-8 rounded-xl border border-gray-700 shadow-2xl text-center transform scale-110"},Vf={class:"text-3xl font-bold text-white mb-2"},Wf={class:"text-gray-400 mb-6"},Yf={class:"flex flex-col gap-6 h-[600px]"},Qf={class:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50 backdrop-blur-sm shadow-xl"},Jf={class:"flex items-center justify-between mb-4"},zf={class:"flex items-center gap-2"},Xf={key:0,class:"flex flex-col items-center justify-center py-8 space-y-3"},Zf={key:1,class:"space-y-4"},eu={key:0,class:"bg-gray-900/50 p-4 rounded-xl border-l-4 border-purple-500"},tu={class:"text-purple-300 italic text-sm"},su={key:1,class:"bg-gray-900/50 p-4 rounded-xl border-l-4 border-blue-500"},nu={class:"text-gray-300 text-sm leading-relaxed"},iu={key:2,class:"text-center py-8 text-gray-500 text-sm"},ru={class:"flex-1 bg-gray-800/30 rounded-2xl p-6 border border-gray-700/30 overflow-hidden flex flex-col"},ou={class:"overflow-y-auto flex-1 pr-2 space-y-1 scrollbar-thin scrollbar-thumb-gray-700"},lu={class:"w-8 text-gray-500"},au={key:0,class:"p-4 bg-red-900/20 border border-red-800 rounded-lg text-red-400 text-sm"},cu=Xr({__name:"App",setup(e){const{board:t,turn:s,isGameOver:n,isCheckmate:i,fen:r,history:o,makeMove:l,resetGame:a,getLegalMoves:u,getLegalMovesSAN:c}=rf(),{getBestMove:p,isThinking:h,aiThought:y,aiTaunt:E,error:R}=Kf(),K=Le(null),j=async $=>{if(n.value||s.value!=="w")return;l($)&&(K.value=$,n.value||await Y())},Y=async()=>{if(n.value)return;const $=c(),G=await p(r.value,$,o.value);if(G){const _e=l(G);_e&&(K.value={from:_e.from,to:_e.to})}},X=()=>{a(),K.value=null,y.value="",E.value=""};return($,G)=>(ue(),ge("div",Uf,[W("header",{class:"w-full max-w-6xl flex items-center justify-between mb-8"},[G[1]||(G[1]=W("div",{class:"flex items-center gap-4"},[W("h1",{class:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-500"}," Chess w/ Gemini "),W("span",{class:"px-3 py-1 rounded-full text-xs font-mono bg-gray-800 text-gray-400 border border-gray-700"}," Model: Pro ")],-1)),W("button",{onClick:X,class:"px-6 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-white font-medium transition-colors border border-gray-700 flex items-center gap-2"},[...G[0]||(G[0]=[W("span",null,"Reset Game",-1)])])]),W("main",jf,[W("div",Hf,[W("div",Bf,[tt($c,{board:le(t),turn:le(s),"last-move":K.value,"legal-moves":le(c)(),"get-legal-moves":le(u),onMove:j},null,8,["board","turn","last-move","legal-moves","get-legal-moves"]),le(n)?(ue(),ge("div",Gf,[W("div",qf,[W("h2",Vf,ze(le(i)?le(s)==="w"?"Black Wins!":"White Wins!":"Draw!"),1),W("p",Wf,ze(le(i)?"Checkmate":"Stalemate / Draw"),1),W("button",{onClick:X,class:"px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-bold transition-all"}," Play Again ")])])):ct("",!0)])]),W("div",Yf,[W("div",Qf,[W("div",Jf,[G[3]||(G[3]=W("h3",{class:"text-gray-400 uppercase text-xs font-bold tracking-wider"},"Opponent",-1)),W("span",zf,[W("div",{class:xt(["w-2 h-2 rounded-full",le(h)?"bg-yellow-400 animate-pulse":"bg-emerald-400"])},null,2),G[2]||(G[2]=W("span",{class:"text-sm font-medium text-white"},"Gemini Pro",-1))])]),le(h)?(ue(),ge("div",Xf,[...G[4]||(G[4]=[W("div",{class:"relative w-12 h-12"},[W("div",{class:"absolute inset-0 rounded-full border-4 border-gray-600"}),W("div",{class:"absolute inset-0 rounded-full border-4 border-emerald-500 border-t-transparent animate-spin"})],-1),W("p",{class:"text-gray-300 text-sm animate-pulse"},"Analyzing position...",-1)])])):(ue(),ge("div",Zf,[le(E)?(ue(),ge("div",eu,[W("p",tu,'"'+ze(le(E))+'"',1)])):ct("",!0),le(y)?(ue(),ge("div",su,[G[5]||(G[5]=W("h4",{class:"text-blue-400 text-xs font-bold mb-1 uppercase"},"Analysis",-1)),W("p",nu,ze(le(y)),1)])):ct("",!0),!le(y)&&!le(E)?(ue(),ge("div",iu," Make your move to start the game. ")):ct("",!0)]))]),W("div",ru,[G[6]||(G[6]=W("h3",{class:"text-gray-400 uppercase text-xs font-bold tracking-wider mb-4"},"Move History",-1)),W("div",ou,[(ue(!0),ge(Me,null,Kn(le(o),(_e,be)=>(ue(),ge("div",{key:be,class:"flex text-sm border-b border-gray-800 py-1"},[W("span",lu,ze(Math.floor(be/2)+1)+".",1),W("span",{class:xt(be%2===0?"text-white":"text-gray-400")},ze(_e),3)]))),128))])]),le(R)?(ue(),ge("div",au,ze(le(R)),1)):ct("",!0)])])]))}});Sc(cu).mount("#app");
